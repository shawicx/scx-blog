[["Map",1,2,9,10,990,991],"meta::meta",["Map",3,4,5,6,7,8],"astro-version","5.13.7","content-config-digest","62228762712f1dd7","astro-config-digest","{\"root\":{},\"srcDir\":{},\"publicDir\":{},\"outDir\":{},\"cacheDir\":{},\"site\":\"https://retypeset.radishzz.cc\",\"compressHTML\":true,\"base\":\"/\",\"trailingSlash\":\"always\",\"output\":\"static\",\"scopedStyleStrategy\":\"attribute\",\"build\":{\"format\":\"directory\",\"client\":{},\"server\":{},\"assets\":\"_astro\",\"serverEntry\":\"entry.mjs\",\"redirects\":true,\"inlineStylesheets\":\"auto\",\"concurrency\":1},\"server\":{\"open\":false,\"host\":false,\"port\":4321,\"headers\":{\"Access-Control-Allow-Origin\":\"https://giscus.app\"},\"streaming\":true,\"allowedHosts\":[]},\"redirects\":{},\"prefetch\":{\"prefetchAll\":true,\"defaultStrategy\":\"viewport\"},\"image\":{\"endpoint\":{\"route\":\"/_image/\"},\"service\":{\"entrypoint\":\"astro/assets/services/sharp\",\"config\":{}},\"domains\":[\"image.radishzz.cc\"],\"remotePatterns\":[{\"protocol\":\"https\"}],\"responsiveStyles\":false},\"devToolbar\":{\"enabled\":false},\"markdown\":{\"syntaxHighlight\":{\"type\":\"shiki\",\"excludeLangs\":[\"mermaid\"]},\"shikiConfig\":{\"langs\":[],\"langAlias\":{},\"theme\":\"github-dark\",\"themes\":{\"light\":\"github-light\",\"dark\":\"github-dark\"},\"wrap\":false,\"transformers\":[]},\"remarkPlugins\":[null,null,null,null,null],\"rehypePlugins\":[null,[null,{\"strategy\":\"pre-mermaid\"}],null,null,null,null,null],\"remarkRehype\":{},\"gfm\":true,\"smartypants\":true},\"security\":{\"checkOrigin\":true},\"env\":{\"schema\":{},\"validateSecrets\":false},\"experimental\":{\"clientPrerender\":false,\"contentIntellisense\":false,\"headingIdCompat\":false,\"preserveScriptOrder\":false,\"liveContentCollections\":false,\"csp\":false,\"staticImportMetaEnv\":false,\"chromeDevtoolsWorkspace\":false},\"legacy\":{\"collections\":false}}","posts",["Map",11,12,36,37,87,88,107,108,156,157,183,184,236,237,260,261,307,308,339,340,364,365,385,386,502,503,562,563,581,582,661,662,750,751,796,797,823,824,845,846,873,874,953,954],"scattered-notes",{"id":11,"data":13,"body":22,"filePath":23,"digest":24,"rendered":25},{"title":14,"published":15,"description":16,"tags":17,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"零散笔记",["Date","2025-04-01T00:00:00.000Z"],"技术学习和开发过程中的零散记录和思考",[],false,0,true,"","# 零散笔记","src/content/blog/scattered-notes.md","22eaea10b71930cb",{"html":26,"metadata":27},"\u003Ch1 id=\"零散笔记\">零散笔记\u003Ca href=\"#零散笔记\" class=\"heading-anchor-link\" aria-label=\"Link to 零散笔记\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>",{"headings":28,"localImagePaths":31,"remoteImagePaths":32,"frontmatter":33,"imagePaths":35},[29],{"depth":30,"slug":14,"text":14},1,[],[],{"title":14,"description":16,"draft":18,"published":34,"minutes":30},["Date","2025-04-01T00:00:00.000Z"],[],"updated_constitution",{"id":36,"data":38,"body":43,"filePath":44,"digest":45,"rendered":46},{"title":39,"published":40,"description":41,"tags":42,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"scx-blog 项目章程",["Date","2025-04-01T00:00:00.000Z"],"scx-blog从VitePress迁移到Astro的核心原则、开发流程和质量保证规范",[],"# scx-blog Constitution\n\n## Core Principles\n\n### Maintainable Migration\nAll migration activities must prioritize maintainability by preserving existing Markdown content and frontmatter. The migration from VitePress to Astro must not alter the fundamental content structure, ensuring future editing workflows remain unchanged.\n\n### Lightweight Architecture\nThe system must maintain a lightweight deployment profile, leveraging Astro's zero-JS approach where possible and optimizing for fast loading times. All technical choices should support minimal bundle sizes and efficient static asset delivery.\n\n### Markdown-First Workflow\nThe content authoring workflow must remain Markdown-centric, preserving the existing author experience. All new systems and components should accommodate the established Markdown workflow without requiring authors to learn new content formats.\n\n### Progressive Enhancement\nMigration to Astro must be implemented with progressive enhancement principles: core functionality (content delivery) must work without JavaScript, with enhanced features layered on top for improved UX where appropriate.\n\n### Infrastructure Simplicity\nDeployment and hosting infrastructure must remain simple and cost-effective. Prefer serverless solutions (Cloudflare Pages + R2) over complex server management, and maintain straightforward CI/CD processes.\n\n## Development Workflow\n\nAll development follows a structured approach with distinct roles: Architect designs the overall migration strategy and technical specifications, Developer implements the migration and new features, and Reviewer validates functionality and performance. This ensures quality control and knowledge distribution throughout the project.\n\n## Quality Assurance\n\nMigration deliverables must include a fully functional Astro blog that matches the original VitePress functionality, comprehensive migration scripts to automate the conversion process, and detailed documentation to guide future maintenance and updates. Each component must be tested across multiple environments before acceptance.\n\n## Governance\n\nThis constitution governs all technical and process decisions for the scx-blog migration project. All pull requests and code reviews must verify compliance with these principles. Any significant architectural changes require explicit documentation of how they align with or modify these principles.\n\n**Version**: 1.0.0 | **Ratified**: 2025-10-24 | **Last Amended**: 2025-10-24","src/content/blog/updated_constitution.md","699bc3e27271735b",{"html":47,"metadata":48},"\u003Ch1 id=\"scx-blog-constitution\">scx-blog Constitution\u003Ca href=\"#scx-blog-constitution\" class=\"heading-anchor-link\" aria-label=\"Link to scx-blog Constitution\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>\n\u003Ch2 id=\"core-principles\">Core Principles\u003Ca href=\"#core-principles\" class=\"heading-anchor-link\" aria-label=\"Link to Core Principles\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"maintainable-migration\">Maintainable Migration\u003Ca href=\"#maintainable-migration\" class=\"heading-anchor-link\" aria-label=\"Link to Maintainable Migration\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>All migration activities must prioritize maintainability by preserving existing Markdown content and frontmatter. The migration from VitePress to Astro must not alter the fundamental content structure, ensuring future editing workflows remain unchanged.\u003C/p>\n\u003Ch3 id=\"lightweight-architecture\">Lightweight Architecture\u003Ca href=\"#lightweight-architecture\" class=\"heading-anchor-link\" aria-label=\"Link to Lightweight Architecture\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>The system must maintain a lightweight deployment profile, leveraging Astro’s zero-JS approach where possible and optimizing for fast loading times. All technical choices should support minimal bundle sizes and efficient static asset delivery.\u003C/p>\n\u003Ch3 id=\"markdown-first-workflow\">Markdown-First Workflow\u003Ca href=\"#markdown-first-workflow\" class=\"heading-anchor-link\" aria-label=\"Link to Markdown-First Workflow\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>The content authoring workflow must remain Markdown-centric, preserving the existing author experience. All new systems and components should accommodate the established Markdown workflow without requiring authors to learn new content formats.\u003C/p>\n\u003Ch3 id=\"progressive-enhancement\">Progressive Enhancement\u003Ca href=\"#progressive-enhancement\" class=\"heading-anchor-link\" aria-label=\"Link to Progressive Enhancement\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>Migration to Astro must be implemented with progressive enhancement principles: core functionality (content delivery) must work without JavaScript, with enhanced features layered on top for improved UX where appropriate.\u003C/p>\n\u003Ch3 id=\"infrastructure-simplicity\">Infrastructure Simplicity\u003Ca href=\"#infrastructure-simplicity\" class=\"heading-anchor-link\" aria-label=\"Link to Infrastructure Simplicity\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>Deployment and hosting infrastructure must remain simple and cost-effective. Prefer serverless solutions (Cloudflare Pages + R2) over complex server management, and maintain straightforward CI/CD processes.\u003C/p>\n\u003Ch2 id=\"development-workflow\">Development Workflow\u003Ca href=\"#development-workflow\" class=\"heading-anchor-link\" aria-label=\"Link to Development Workflow\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cp>All development follows a structured approach with distinct roles: Architect designs the overall migration strategy and technical specifications, Developer implements the migration and new features, and Reviewer validates functionality and performance. This ensures quality control and knowledge distribution throughout the project.\u003C/p>\n\u003Ch2 id=\"quality-assurance\">Quality Assurance\u003Ca href=\"#quality-assurance\" class=\"heading-anchor-link\" aria-label=\"Link to Quality Assurance\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cp>Migration deliverables must include a fully functional Astro blog that matches the original VitePress functionality, comprehensive migration scripts to automate the conversion process, and detailed documentation to guide future maintenance and updates. Each component must be tested across multiple environments before acceptance.\u003C/p>\n\u003Ch2 id=\"governance\">Governance\u003Ca href=\"#governance\" class=\"heading-anchor-link\" aria-label=\"Link to Governance\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cp>This constitution governs all technical and process decisions for the scx-blog migration project. All pull requests and code reviews must verify compliance with these principles. Any significant architectural changes require explicit documentation of how they align with or modify these principles.\u003C/p>\n\u003Cp>\u003Cstrong>Version\u003C/strong>: 1.0.0 | \u003Cstrong>Ratified\u003C/strong>: 2025-10-24 | \u003Cstrong>Last Amended\u003C/strong>: 2025-10-24\u003C/p>",{"headings":49,"localImagePaths":82,"remoteImagePaths":83,"frontmatter":84,"imagePaths":86},[50,53,57,61,64,67,70,73,76,79],{"depth":30,"slug":51,"text":52},"scx-blog-constitution","scx-blog Constitution",{"depth":54,"slug":55,"text":56},2,"core-principles","Core Principles",{"depth":58,"slug":59,"text":60},3,"maintainable-migration","Maintainable Migration",{"depth":58,"slug":62,"text":63},"lightweight-architecture","Lightweight Architecture",{"depth":58,"slug":65,"text":66},"markdown-first-workflow","Markdown-First Workflow",{"depth":58,"slug":68,"text":69},"progressive-enhancement","Progressive Enhancement",{"depth":58,"slug":71,"text":72},"infrastructure-simplicity","Infrastructure Simplicity",{"depth":54,"slug":74,"text":75},"development-workflow","Development Workflow",{"depth":54,"slug":77,"text":78},"quality-assurance","Quality Assurance",{"depth":54,"slug":80,"text":81},"governance","Governance",[],[],{"title":39,"description":41,"draft":18,"published":85,"minutes":30},["Date","2025-04-01T00:00:00.000Z"],[],"work-docs",{"id":87,"data":89,"body":94,"filePath":95,"digest":96,"rendered":97},{"title":90,"published":91,"description":92,"tags":93,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"工作文档记录",["Date","2025-04-01T00:00:00.000Z"],"项目开发过程中的技术文档、解决方案和经验总结",[],"# 工作文档记录","src/content/blog/work-docs.md","ff7c37ebe052d344",{"html":98,"metadata":99},"\u003Ch1 id=\"工作文档记录\">工作文档记录\u003Ca href=\"#工作文档记录\" class=\"heading-anchor-link\" aria-label=\"Link to 工作文档记录\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>",{"headings":100,"localImagePaths":102,"remoteImagePaths":103,"frontmatter":104,"imagePaths":106},[101],{"depth":30,"slug":90,"text":90},[],[],{"title":90,"description":92,"draft":18,"published":105,"minutes":30},["Date","2025-04-01T00:00:00.000Z"],[],"scattered-notes/array-dedup",{"id":107,"data":109,"body":114,"filePath":115,"digest":116,"rendered":117},{"title":110,"published":111,"description":112,"tags":113,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"数组去重方法汇总",["Date","2025-04-01T00:00:00.000Z"],"JavaScript数组去重的多种实现方法和性能对比分析",[],"# 数组去重\n\n```typescript\nconst arr = ['宫保鸡丁', '红烧茄子', '番茄炒蛋', '扬州炒饭', '兰州拉面', '麻婆豆腐', '回锅牛肉', '红烧茄子'];\n```\n\n## 双循环\n\n```typescript\nfunction NoRepeat (arr) {\n  if (!Array.isArray(arr)) {\n    console.log(\"not Array\");\n    return\n  }\n  let res = [], isRepeat = false;\n  for (let i = 1; i \u003C arr.length; i++) {\n    isRepeat = false\n    for (let j = 0; j \u003C res.length; j++) {\n      if (arr[i] === res[j]) {\n        isRepeat = true;\n        break;\n      }\n    }\n    if (!isRepeat) {\n      res.push(arr[i])\n    }\n  }\n  return res\n}\n```\n\n## indexOf (1)\n\n```typescript\nfunction NoRepeat (arr) {\n  if (!Array.isArray(arr)) {\n    consolole.log(\"not Array\");\n    return\n  }\n  let newArr = [];\n  for(let i = 0, i \u003C arr.length; i++){\n    if(newArr.indexOf(arr[i]) === -1){\n      newArr.push(item);\n    }\n  }\n  return newArr;\n}\n```\n\n## indexOf (2)\n\n```typescript\nfunction NoRepeat (arr) {\n  if (!Array.isArray(arr)) {\n    consolole.log(\"not Array\");\n    return\n  }\n  return arr.filter.call(arr,   function(item, index){\n    return arr.indexOf(item) === index;\n  });\n}\n```\n\n## 相邻元素\n\n```typescript\nfunction NoRepeat (arr) {\n  if (!Array.isArray(arr)) {\n    consolole.log(\"not Array\");\n    return\n  }\n  arr = arr.sort()\n  let res = []\n  for (let i = 0; i \u003C arr.length; i++) {\n    if (arr[i] !== arr[i-1]) {\n      res.push(arr[i])\n    }\n  }\n  return res\n}\n```\n\n## 对象属性\n\n```typescript\nfunction NoRepeat (arr) {\n  if (!Array.isArray(arr)) {\n    consolole.log(\"not Array\");\n    return\n  }\n  let res = [], obj = {}\n  for (let i = 0; i \u003C arr.length; i++) {\n    if (!obj[arr[i]]) {\n      res.push(arr[i])\n      obj[arr[i]] = 1;\n    } else {\n      obj[arr[i]]++;\n    }\n  }\n  return res\n}\n```\n\n## Set与解构赋值\n\n```typescript\nfunction NoRepeat (arr) {\n  if (!Array.isArray(arr)) {\n    consolole.log(\"not Array\");\n    return\n  }\n  return [...new Set(arr)]\n}\n```\n\n## Array.from与Set\n\n```typescript\nfunction NoRepeat (arr) {\n  if (!Array.isArray(arr)) {\n    consolole.log(\"not Array\");\n    return\n  }\n  return Array.from(new Set(arr))\n}\n```\n\n## Map (1)\n\n```typescript\nfunction NoRepeat (arr) {\n  if (!Array.isArray(arr)) {\n    consolole.log(\"not Array\");\n    return\n  }\n  const newArr = [];\n  const newMap = new Map();\n  for(let i = 0; i \u003C arr.length; i++){\n    if(!newMap.get(arr[i])){\n      newMap.set(arr[i], 1);\n      newArray.push(arr[i]);\n    }\n  }\n  return newArr;\n}\n```\n\n## Map (2)\n\n```typescript\nfunction NoRepeat (arr) {\n  if (!Array.isArray(arr)) {\n    consolole.log(\"not Array\");\n    return\n  }\n  const newMap = new Map();\n  return arr.filter((item) => {\n    return !newMap.has(item) && newMap.set(item, 1);\n  })\n}\n```\n\n## includes\n\n```typescript\nfunction NoRepeat (arr) {\n  if (!Array.isArray(arr)) {\n    consolole.log(\"not Array\");\n    return\n  }\n  const newArr = [];\n  arr.forEach(item => {\n    if (!newArr.includes(item)) {\n      newArr.push(item);\n    }\n  });\n  return newArr;\n}\n```\n\n## reduce\n\n```typescript\nfunction NoRepeat (arr) {\n  if (!Array.isArray(arr)) {\n    consolole.log(\"not Array\");\n    return\n  }\n  const newArr = [];\n  return arr.reduce((init, current) => {\n    if(init.length === 0 || init[init.length - 1] !== current){\n      init.push(current);\n    }\n    return init;\n  }, []);\n}\n```","src/content/blog/scattered-notes/array-dedup.md","f7a1834df1afb0b4",{"html":118,"metadata":119},"\u003Ch1 id=\"数组去重\">数组去重\u003Ca href=\"#数组去重\" class=\"heading-anchor-link\" aria-label=\"Link to 数组去重\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> arr\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'宫保鸡丁'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'红烧茄子'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'番茄炒蛋'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'扬州炒饭'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'兰州拉面'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'麻婆豆腐'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'回锅牛肉'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'红烧茄子'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"双循环\">双循环\u003Ca href=\"#双循环\" class=\"heading-anchor-link\" aria-label=\"Link to 双循环\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> NoRepeat\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">arr\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">Array.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">isArray\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"not Array\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> res \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [], isRepeat \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> false\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  for\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> i \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">; i \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x3C;\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> arr.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">; i\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">++\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    isRepeat \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> false\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    for\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> j \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">; j \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x3C;\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> res.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">; j\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">++\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (arr[i] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> res[j]) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        isRepeat \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> true\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        break\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">isRepeat) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      res.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">push\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr[i])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> res\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"indexof-1\">indexOf (1)\u003Ca href=\"#indexof-1\" class=\"heading-anchor-link\" aria-label=\"Link to indexOf (1)\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> NoRepeat\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">arr\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">Array.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">isArray\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    consolole.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"not Array\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> newArr \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  for\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> i \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, i &#x3C; arr.length; i\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">++\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">){\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(newArr.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">indexOf\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr[i]) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> -\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">){\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      newArr.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">push\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(item);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> newArr;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"indexof-2\">indexOf (2)\u003Ca href=\"#indexof-2\" class=\"heading-anchor-link\" aria-label=\"Link to indexOf (2)\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> NoRepeat\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">arr\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">Array.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">isArray\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    consolole.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"not Array\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> arr.filter.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">call\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr,   \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">item\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">index\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">){\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> arr.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">indexOf\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(item) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> index;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"相邻元素\">相邻元素\u003Ca href=\"#相邻元素\" class=\"heading-anchor-link\" aria-label=\"Link to 相邻元素\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> NoRepeat\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">arr\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">Array.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">isArray\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    consolole.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"not Array\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  arr \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> arr.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">sort\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> res \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> []\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  for\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> i \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">; i \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x3C;\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> arr.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">; i\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">++\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (arr[i] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!==\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> arr[i\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">-\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      res.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">push\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr[i])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> res\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"对象属性\">对象属性\u003Ca href=\"#对象属性\" class=\"heading-anchor-link\" aria-label=\"Link to 对象属性\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> NoRepeat\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">arr\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">Array.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">isArray\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    consolole.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"not Array\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> res \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [], obj \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  for\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> i \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">; i \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x3C;\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> arr.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">; i\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">++\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">obj[arr[i]]) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      res.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">push\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr[i])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      obj[arr[i]] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">else\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      obj[arr[i]]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">++\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> res\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"set与解构赋值\">Set与解构赋值\u003Ca href=\"#set与解构赋值\" class=\"heading-anchor-link\" aria-label=\"Link to Set与解构赋值\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> NoRepeat\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">arr\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">Array.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">isArray\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    consolole.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"not Array\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">...new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Set\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr)]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"arrayfrom与set\">Array.from与Set\u003Ca href=\"#arrayfrom与set\" class=\"heading-anchor-link\" aria-label=\"Link to Array.from与Set\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> NoRepeat\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">arr\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">Array.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">isArray\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    consolole.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"not Array\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> Array.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">from\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Set\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr))\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"map-1\">Map (1)\u003Ca href=\"#map-1\" class=\"heading-anchor-link\" aria-label=\"Link to Map (1)\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> NoRepeat\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">arr\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">Array.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">isArray\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    consolole.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"not Array\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> newArr\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> newMap\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Map\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  for\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> i \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">; i \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x3C;\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> arr.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">; i\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">++\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">){\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">newMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">get\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr[i])){\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      newMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">set\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr[i], \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      newArray.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">push\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr[i]);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> newArr;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"map-2\">Map (2)\u003Ca href=\"#map-2\" class=\"heading-anchor-link\" aria-label=\"Link to Map (2)\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> NoRepeat\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">arr\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">Array.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">isArray\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    consolole.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"not Array\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> newMap\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Map\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> arr.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">filter\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">((\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">item\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> !\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">newMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">has\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(item) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x26;&#x26;\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> newMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">set\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(item, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  })\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"includes\">includes\u003Ca href=\"#includes\" class=\"heading-anchor-link\" aria-label=\"Link to includes\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> NoRepeat\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">arr\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">Array.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">isArray\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    consolole.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"not Array\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> newArr\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  arr.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">forEach\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">item\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">newArr.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">includes\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(item)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      newArr.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">push\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(item);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> newArr;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"reduce\">reduce\u003Ca href=\"#reduce\" class=\"heading-anchor-link\" aria-label=\"Link to reduce\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> NoRepeat\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">arr\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">Array.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">isArray\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arr)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    consolole.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"not Array\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> newArr\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> arr.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">reduce\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">((\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">init\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">current\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(init.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> ===\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 0\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> ||\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> init[init.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> -\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!==\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> current){\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      init.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">push\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(current);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> init;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }, []);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>",{"headings":120,"localImagePaths":151,"remoteImagePaths":152,"frontmatter":153,"imagePaths":155},[121,123,125,128,131,133,135,138,141,144,147,149],{"depth":30,"slug":122,"text":122},"数组去重",{"depth":54,"slug":124,"text":124},"双循环",{"depth":54,"slug":126,"text":127},"indexof-1","indexOf (1)",{"depth":54,"slug":129,"text":130},"indexof-2","indexOf (2)",{"depth":54,"slug":132,"text":132},"相邻元素",{"depth":54,"slug":134,"text":134},"对象属性",{"depth":54,"slug":136,"text":137},"set与解构赋值","Set与解构赋值",{"depth":54,"slug":139,"text":140},"arrayfrom与set","Array.from与Set",{"depth":54,"slug":142,"text":143},"map-1","Map (1)",{"depth":54,"slug":145,"text":146},"map-2","Map (2)",{"depth":54,"slug":148,"text":148},"includes",{"depth":54,"slug":150,"text":150},"reduce",[],[],{"title":110,"description":112,"draft":18,"published":154,"minutes":54},["Date","2025-04-01T00:00:00.000Z"],[],"scattered-notes/debounce-throttle",{"id":156,"data":158,"body":163,"filePath":164,"digest":165,"rendered":166},{"title":159,"published":160,"description":161,"tags":162,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"防抖与节流详解",["Date","2025-08-09T00:00:00.000Z"],"JavaScript中防抖和节流的实现原理、代码示例以及实际应用场景",[],"# 节流与防抖\n\n## 节流: 规定时间段内只执行一次事件\n\n```typescript\nfunction throttle(fn, delay) {\n  let previous = 0;\n  return function() {\n    let now = +new Date();\n    let that = this, args = arguments;\n    if (now - previous > delay) {\n      fn.apply(that, args);\n      previous = now;\n    }\n  }\n}\n```\n\n```typescript\nfunction throttle(fn, delay) {\n  let timer = null;\n  return function() {\n    let that = this, args = arguments;\n    if(!timer){\n      timer = setTimeout(() => {\n        fn.apply(that,args);\n        timer = null;\n      },delay);\n    }\n  }\n}\n```\n\n## 防抖: 事件在n秒内才执行，如果n秒内再次触发，以新的事件时间为准重新计时，n秒后再执行\n\n```typescript\nfunction debounce(fn, delay) {\n  let timer = null;\n  return function() {\n    \u003C!-- this指向 和 event对象-->\n    let that = this, args = arguments;\n    if (timer) {\n      clearTimeout(timer);\n    }\n    timer = setTimeout(function() {\n      fn.apply(that, args);\n    }, delay);\n  }\n}\n```\n\n``` typescript\nfunction debounce(fn, delay, immediate) {\n  let timer = null;\n  return function() {\n    \u003C!-- this指向 和 event对象-->\n    let that = this, args = arguments;\n    if (timer) {\n      clearTimeout(timer);\n    }\n    if (immediate) {\n      let callNow = !timeout;\n      timeout = setTimeout(function(){\n        timeout = null;\n      }, wait)\n      if (callNow) result = fn.apply(context, args)\n    } else {\n      timer = setTimeout(function() {\n        fn.apply(that, args);\n      }, delay);\n    }\n  }\n}\n```","src/content/blog/scattered-notes/debounce-throttle.md","136ba70ade6eb907",{"html":167,"metadata":168},"\u003Ch1 id=\"节流与防抖\">节流与防抖\u003Ca href=\"#节流与防抖\" class=\"heading-anchor-link\" aria-label=\"Link to 节流与防抖\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>\n\u003Ch2 id=\"节流-规定时间段内只执行一次事件\">节流: 规定时间段内只执行一次事件\u003Ca href=\"#节流-规定时间段内只执行一次事件\" class=\"heading-anchor-link\" aria-label=\"Link to 节流: 规定时间段内只执行一次事件\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> throttle\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">fn\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">delay\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> previous \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> function\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> now \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> +new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Date\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> that \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, args \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> arguments\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (now \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">-\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> previous \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> delay) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      fn.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">apply\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(that, args);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      previous \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> now;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> throttle\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">fn\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">delay\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> timer \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> function\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> that \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, args \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> arguments\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">timer){\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      timer \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setTimeout\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        fn.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">apply\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(that,args);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        timer \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      },delay);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"防抖-事件在n秒内才执行如果n秒内再次触发以新的事件时间为准重新计时n秒后再执行\">防抖: 事件在n秒内才执行，如果n秒内再次触发，以新的事件时间为准重新计时，n秒后再执行\u003Ca href=\"#防抖-事件在n秒内才执行如果n秒内再次触发以新的事件时间为准重新计时n秒后再执行\" class=\"heading-anchor-link\" aria-label=\"Link to 防抖: 事件在n秒内才执行，如果n秒内再次触发，以新的事件时间为准重新计时，n秒后再执行\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> debounce\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">fn\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">delay\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> timer \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> function\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    &#x3C;!--\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> this指向 和 event对象\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">-->\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> that \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, args \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> arguments\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (timer) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">      clearTimeout\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(timer);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    timer \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setTimeout\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      fn.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">apply\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(that, args);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }, delay);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> debounce\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">fn\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">delay\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">immediate\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> timer \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> function\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    &#x3C;!--\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> this指向 和 event对象\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">-->\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> that \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, args \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> arguments\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (timer) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">      clearTimeout\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(timer);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (immediate) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> callNow \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> !\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">timeout;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      timeout \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setTimeout\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(){\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        timeout \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      }, wait)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (callNow) result \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> fn.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">apply\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(context, args)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">else\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      timer \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setTimeout\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        fn.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">apply\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(that, args);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      }, delay);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>",{"headings":169,"localImagePaths":178,"remoteImagePaths":179,"frontmatter":180,"imagePaths":182},[170,172,175],{"depth":30,"slug":171,"text":171},"节流与防抖",{"depth":54,"slug":173,"text":174},"节流-规定时间段内只执行一次事件","节流: 规定时间段内只执行一次事件",{"depth":54,"slug":176,"text":177},"防抖-事件在n秒内才执行如果n秒内再次触发以新的事件时间为准重新计时n秒后再执行","防抖: 事件在n秒内才执行，如果n秒内再次触发，以新的事件时间为准重新计时，n秒后再执行",[],[],{"title":159,"description":161,"draft":18,"published":181,"minutes":30},["Date","2025-08-09T00:00:00.000Z"],[],"scattered-notes/http",{"id":183,"data":185,"body":190,"filePath":191,"digest":192,"rendered":193},{"title":186,"published":187,"description":188,"tags":189,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"HTTP协议详解",["Date","2025-08-09T00:00:00.000Z"],"深入了解HTTP协议的特点、工作过程、状态码、请求方法以及HTTP/2多路复用技术",[],"# HTTP\n\n## URI和URL\n\n1. URI(统一资源标识符)，用来唯一的标识一个资源。\n\n    - 访问资源的命名机制\n    - 存放资源的主机名\n    - 资源自身的名称，由路径表示，着重强调于资源。\n\n2. URL(统一资源定位符)，是一种具体的URI，可以用来标识一个资源。\n\n    - 协议(或称为服务方式)\n    - 存有该资源的主机IP地址(有时也包括端口号)\n    - 主机资源的具体地址。如目录和文件名等\n\n## HTTP的特点\n\n- 支持客户/服务器模式(C/S)。\n- 简单快速：只需传送请求方法和路径，因程序规模小而通信速度快。\n- 灵活：允许传输任意类型的数据对象。\n- 无连接：限制每次连接只处理一个请求，完成应答即断开连接节省时间。\n- 无状态：对事务处理没有记忆能力。\n\n## HTTP的工作过程\n\n建立连接，发送请求信息，发送响应信息，关闭连接。\n\n## HTTP格式\n\n> HTTP有两类报文，请求报文和响应报文，组成一样。\n\n- 开始行：区别两者。请求报文中称为请求行，响应报文称为响应行。\n- 首部行：说明浏览器、服务器或报文主体的一些信息。∂\n- 附属体行：一般不使用。\n\n## 状态码\n\n> 参考维基百科 [HTTP状态码](https://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81 \"HTTP状态码\")\n\n***常见状态码***\n\n| 状态码 | 含义                                     |\n|-----|----------------------------------------|\n| 200 | 成功处理了请求。 通常，这表示服务器提供了请求的网页。            |\n| 204 | 处理了请求，但没有返回任何内容。                       |\n| 206 | 客户端进行了范围请求，服务器成功执行。                    |\n| 300 | 针对请求，服务器可执行多种操作。                       |\n| 301 | 请求的网页已永久移动到新位置。                        |\n| 304 | 自从上次请求后，请求的网页未修改过。                     |\n| 305 | 请求者只能使用代理访问请求的网页。                      |\n| 400 | 服务器不理解请求的语法。                           |\n| 401 | 请求要求身份验证。                              |\n| 403 | 服务器拒绝请求。                               |\n| 404 | 服务器找不到请求的网页。                           |\n| 500 | 服务器遇到错误，无法完成请求。                        |\n| 501 | 服务器不具备完成请求的功能。例如，服务器无法识别请求方法时可能会返回此代码。 |\n| 503 | 服务器目前无法使用(由于超载或停机维护)。 通常，这只是暂时状态。      |\n| 505 | 服务器不支持请求中所用的 HTTP 协议版本。                |\n\n## 请求方法\n\n| 方法名     | 方法作用                                    |\n|---------|-----------------------------------------|\n| GET     | GET方法请求一个指定资源的表示形式. 使用GET的请求应该只被用于获取数据. |\n| POST    | POST方法用于将实体提交到指定的资源，通常导致状态或服务器上的副作用的更改. |\n| OPTIONS | OPTIONS方法用于描述目标资源的通信选项。                 |\n| PUT     | PUT方法用请求有效载荷替换目标资源的所有当前表示。              |\n| HEAD    | HEAD方法请求一个与GET请求的响应相同的响应，但没有响应体.        |\n| DELETE  | DELETE方法删除指定的资源。                        |\n| CONNECT | CONNECT方法建立一个到由目标资源标识的服务器的隧道。           |\n| TRACE   | TRACE方法沿着到目标资源的路径执行一个消息环回测试。            |\n| PATCH   | PATCH方法用于对资源应用部分修改。                     |\n\n***GET和POST的区别：***\n\n|          | GET                                                           | POST                                                                  |\n|----------|---------------------------------------------------------------|-----------------------------------------------------------------------|\n| 后退按钮/刷新  | 无害                                                            | 数据会被重新提交（浏览器应该告知用户数据会被重新提交）。                                          |\n| 书签       | 可收藏为书签                                                        | 不可收藏为书签                                                               |\n| 缓存       | 能被缓存                                                          | 不能缓存                                                                  |\n| 编码类型     | application/x-www-form-urlencoded                             | application/x-www-form-urlencoded 或 multipart/form-data。为二进制数据使用多重编码。 |\n| 历史       | 参数保留在浏览器历史中。                                                  | 参数不会保存在浏览器历史中。                                                        |\n| 对数据长度的限制 | 是的。当发送数据时，GET 方法向 URL 添加数据；URL 的长度是受限制的（URL 的最大长度是 2048 个字符）。 | 无限制。                                                                  |\n| 对数据类型的限制 | 只允许 ASCII 字符。                                                 | 没有限制。也允许二进制数据。                                                        |\n| 安全性      | 安全性较差，因为所发送的数据是 URL 的一部分。&#xA;在发送密码或其他敏感信息时绝不要使用 GET ！        | 较安全，参数不会被保存在浏览器历史或 web 服务器日志中。                                        |\n| 可见性      | 数据在 URL 中对所有人都是可见的。                                           | 数据不会显示在 URL 中。                                                        |\n\n## http2 的多路复用\n\n### HTTP/1.x 的局限性\n\n1. 队头阻塞（Head-of-Line Blocking）：在 HTTP/1.1 中，同一 TCP 连接的请求必须按顺序处理，若前一个请求延迟，后续请求会被阻塞。\n2. 高延迟与低效连接：浏览器为并行加载资源，需建立多个 TCP 连接（如 HTTP/1.1 的 6-8 个），导致资源竞争和额外开销。\n\n### 多路复用的核心机制\n\n1. 单一 TCP 连接：所有请求和响应通过一个 TCP 连接完成，避免多连接的开销。\n2. 二进制分帧层（Binary Framing Layer）：\n    - 将 HTTP 消息（请求/响应）拆分为更小的二进制帧​（Frame），每个帧包含流标识符（Stream ID）​，标识所属的流（Stream）。\n    - 帧可乱序发送、交错传输，接收方通过流 ID 重组完整消息。\n3. 流（Stream）\n    - 一个独立的双向通信通道（对应一个逻辑请求/响应），多个流可并行传输。\n    - 流之间完全独立，某个流的阻塞不会影响其他流。\n\n### 工作原理示例\n\n1. 客户端发送多个请求​（如 HTML、CSS、JS 文件），无需等待前一个请求完成，也无需建立多个连接。\n2. 服务器将每个资源拆分为多个帧，通过同一 TCP 连接交错发送。\n3. 客户端根据流 ID 将帧重组为完整响应，实现资源的并行加载。\n\n### 核心优势\n\n1. 消除应用层队头阻塞：请求/响应帧可并行处理。\n2. 减少连接开销：单连接替代多连接，降低 TLS 握手、TCP 慢启动等成本。\n3. 提升网络利用率：避免连接数限制，充分利用带宽。\n4. 支持优先级与流量控制：可为流设置优先级（如优先加载关键资源），优化用户体验。\n\n### 局限性\n\n1. TCP 层的队头阻塞：若 TCP 包丢失，后续所有流需等待重传（HTTP/3 改用 QUIC 协议解决）。\n2. 服务器实现复杂度：需高效管理帧的排序、优先级和流量控制。","src/content/blog/scattered-notes/http.md","e045d30c2dd382ec",{"html":194,"metadata":195},"\u003Ch1 id=\"http\">HTTP\u003Ca href=\"#http\" class=\"heading-anchor-link\" aria-label=\"Link to HTTP\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>\n\u003Ch2 id=\"uri和url\">URI和URL\u003Ca href=\"#uri和url\" class=\"heading-anchor-link\" aria-label=\"Link to URI和URL\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Col>\n\u003Cli>\n\u003Cp>URI(统一资源标识符)，用来唯一的标识一个资源。\u003C/p>\n\u003Cul>\n\u003Cli>访问资源的命名机制\u003C/li>\n\u003Cli>存放资源的主机名\u003C/li>\n\u003Cli>资源自身的名称，由路径表示，着重强调于资源。\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\n\u003Cp>URL(统一资源定位符)，是一种具体的URI，可以用来标识一个资源。\u003C/p>\n\u003Cul>\n\u003Cli>协议(或称为服务方式)\u003C/li>\n\u003Cli>存有该资源的主机IP地址(有时也包括端口号)\u003C/li>\n\u003Cli>主机资源的具体地址。如目录和文件名等\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"http的特点\">HTTP的特点\u003Ca href=\"#http的特点\" class=\"heading-anchor-link\" aria-label=\"Link to HTTP的特点\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cul>\n\u003Cli>支持客户/服务器模式(C/S)。\u003C/li>\n\u003Cli>简单快速：只需传送请求方法和路径，因程序规模小而通信速度快。\u003C/li>\n\u003Cli>灵活：允许传输任意类型的数据对象。\u003C/li>\n\u003Cli>无连接：限制每次连接只处理一个请求，完成应答即断开连接节省时间。\u003C/li>\n\u003Cli>无状态：对事务处理没有记忆能力。\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"http的工作过程\">HTTP的工作过程\u003Ca href=\"#http的工作过程\" class=\"heading-anchor-link\" aria-label=\"Link to HTTP的工作过程\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cp>建立连接，发送请求信息，发送响应信息，关闭连接。\u003C/p>\n\u003Ch2 id=\"http格式\">HTTP格式\u003Ca href=\"#http格式\" class=\"heading-anchor-link\" aria-label=\"Link to HTTP格式\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cblockquote>\n\u003Cp>HTTP有两类报文，请求报文和响应报文，组成一样。\u003C/p>\n\u003C/blockquote>\n\u003Cul>\n\u003Cli>开始行：区别两者。请求报文中称为请求行，响应报文称为响应行。\u003C/li>\n\u003Cli>首部行：说明浏览器、服务器或报文主体的一些信息。∂\u003C/li>\n\u003Cli>附属体行：一般不使用。\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"状态码\">状态码\u003Ca href=\"#状态码\" class=\"heading-anchor-link\" aria-label=\"Link to 状态码\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cblockquote>\n\u003Cp>参考维基百科 \u003Ca href=\"https://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81\" title=\"HTTP状态码\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">HTTP状态码\u003C/a>\u003C/p>\n\u003C/blockquote>\n\u003Cp>\u003Cem>\u003Cstrong>常见状态码\u003C/strong>\u003C/em>\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>状态码\u003C/th>\u003Cth>含义\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>200\u003C/td>\u003Ctd>成功处理了请求。 通常，这表示服务器提供了请求的网页。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>204\u003C/td>\u003Ctd>处理了请求，但没有返回任何内容。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>206\u003C/td>\u003Ctd>客户端进行了范围请求，服务器成功执行。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>300\u003C/td>\u003Ctd>针对请求，服务器可执行多种操作。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>301\u003C/td>\u003Ctd>请求的网页已永久移动到新位置。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>304\u003C/td>\u003Ctd>自从上次请求后，请求的网页未修改过。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>305\u003C/td>\u003Ctd>请求者只能使用代理访问请求的网页。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>400\u003C/td>\u003Ctd>服务器不理解请求的语法。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>401\u003C/td>\u003Ctd>请求要求身份验证。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>403\u003C/td>\u003Ctd>服务器拒绝请求。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>404\u003C/td>\u003Ctd>服务器找不到请求的网页。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>500\u003C/td>\u003Ctd>服务器遇到错误，无法完成请求。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>501\u003C/td>\u003Ctd>服务器不具备完成请求的功能。例如，服务器无法识别请求方法时可能会返回此代码。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>503\u003C/td>\u003Ctd>服务器目前无法使用(由于超载或停机维护)。 通常，这只是暂时状态。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>505\u003C/td>\u003Ctd>服务器不支持请求中所用的 HTTP 协议版本。\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"请求方法\">请求方法\u003Ca href=\"#请求方法\" class=\"heading-anchor-link\" aria-label=\"Link to 请求方法\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>方法名\u003C/th>\u003Cth>方法作用\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>GET\u003C/td>\u003Ctd>GET方法请求一个指定资源的表示形式. 使用GET的请求应该只被用于获取数据.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>POST\u003C/td>\u003Ctd>POST方法用于将实体提交到指定的资源，通常导致状态或服务器上的副作用的更改.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>OPTIONS\u003C/td>\u003Ctd>OPTIONS方法用于描述目标资源的通信选项。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>PUT\u003C/td>\u003Ctd>PUT方法用请求有效载荷替换目标资源的所有当前表示。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>HEAD\u003C/td>\u003Ctd>HEAD方法请求一个与GET请求的响应相同的响应，但没有响应体.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>DELETE\u003C/td>\u003Ctd>DELETE方法删除指定的资源。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>CONNECT\u003C/td>\u003Ctd>CONNECT方法建立一个到由目标资源标识的服务器的隧道。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>TRACE\u003C/td>\u003Ctd>TRACE方法沿着到目标资源的路径执行一个消息环回测试。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>PATCH\u003C/td>\u003Ctd>PATCH方法用于对资源应用部分修改。\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Cp>\u003Cem>\u003Cstrong>GET和POST的区别：\u003C/strong>\u003C/em>\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>\u003C/th>\u003Cth>GET\u003C/th>\u003Cth>POST\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>后退按钮/刷新\u003C/td>\u003Ctd>无害\u003C/td>\u003Ctd>数据会被重新提交（浏览器应该告知用户数据会被重新提交）。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>书签\u003C/td>\u003Ctd>可收藏为书签\u003C/td>\u003Ctd>不可收藏为书签\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>缓存\u003C/td>\u003Ctd>能被缓存\u003C/td>\u003Ctd>不能缓存\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>编码类型\u003C/td>\u003Ctd>application/x-www-form-urlencoded\u003C/td>\u003Ctd>application/x-www-form-urlencoded 或 multipart/form-data。为二进制数据使用多重编码。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>历史\u003C/td>\u003Ctd>参数保留在浏览器历史中。\u003C/td>\u003Ctd>参数不会保存在浏览器历史中。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>对数据长度的限制\u003C/td>\u003Ctd>是的。当发送数据时，GET 方法向 URL 添加数据；URL 的长度是受限制的（URL 的最大长度是 2048 个字符）。\u003C/td>\u003Ctd>无限制。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>对数据类型的限制\u003C/td>\u003Ctd>只允许 ASCII 字符。\u003C/td>\u003Ctd>没有限制。也允许二进制数据。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>安全性\u003C/td>\u003Ctd>安全性较差，因为所发送的数据是 URL 的一部分。\n在发送密码或其他敏感信息时绝不要使用 GET ！\u003C/td>\u003Ctd>较安全，参数不会被保存在浏览器历史或 web 服务器日志中。\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>可见性\u003C/td>\u003Ctd>数据在 URL 中对所有人都是可见的。\u003C/td>\u003Ctd>数据不会显示在 URL 中。\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"http2-的多路复用\">http2 的多路复用\u003Ca href=\"#http2-的多路复用\" class=\"heading-anchor-link\" aria-label=\"Link to http2 的多路复用\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"http1x-的局限性\">HTTP/1.x 的局限性\u003Ca href=\"#http1x-的局限性\" class=\"heading-anchor-link\" aria-label=\"Link to HTTP/1.x 的局限性\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Col>\n\u003Cli>队头阻塞（Head-of-Line Blocking）：在 HTTP/1.1 中，同一 TCP 连接的请求必须按顺序处理，若前一个请求延迟，后续请求会被阻塞。\u003C/li>\n\u003Cli>高延迟与低效连接：浏览器为并行加载资源，需建立多个 TCP 连接（如 HTTP/1.1 的 6-8 个），导致资源竞争和额外开销。\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"多路复用的核心机制\">多路复用的核心机制\u003Ca href=\"#多路复用的核心机制\" class=\"heading-anchor-link\" aria-label=\"Link to 多路复用的核心机制\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Col>\n\u003Cli>单一 TCP 连接：所有请求和响应通过一个 TCP 连接完成，避免多连接的开销。\u003C/li>\n\u003Cli>二进制分帧层（Binary Framing Layer）：\n\u003Cul>\n\u003Cli>将 HTTP 消息（请求/响应）拆分为更小的二进制帧​（Frame），每个帧包含流标识符（Stream ID）​，标识所属的流（Stream）。\u003C/li>\n\u003Cli>帧可乱序发送、交错传输，接收方通过流 ID 重组完整消息。\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>流（Stream）\n\u003Cul>\n\u003Cli>一个独立的双向通信通道（对应一个逻辑请求/响应），多个流可并行传输。\u003C/li>\n\u003Cli>流之间完全独立，某个流的阻塞不会影响其他流。\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"工作原理示例\">工作原理示例\u003Ca href=\"#工作原理示例\" class=\"heading-anchor-link\" aria-label=\"Link to 工作原理示例\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Col>\n\u003Cli>客户端发送多个请求​（如 HTML、CSS、JS 文件），无需等待前一个请求完成，也无需建立多个连接。\u003C/li>\n\u003Cli>服务器将每个资源拆分为多个帧，通过同一 TCP 连接交错发送。\u003C/li>\n\u003Cli>客户端根据流 ID 将帧重组为完整响应，实现资源的并行加载。\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"核心优势\">核心优势\u003Ca href=\"#核心优势\" class=\"heading-anchor-link\" aria-label=\"Link to 核心优势\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Col>\n\u003Cli>消除应用层队头阻塞：请求/响应帧可并行处理。\u003C/li>\n\u003Cli>减少连接开销：单连接替代多连接，降低 TLS 握手、TCP 慢启动等成本。\u003C/li>\n\u003Cli>提升网络利用率：避免连接数限制，充分利用带宽。\u003C/li>\n\u003Cli>支持优先级与流量控制：可为流设置优先级（如优先加载关键资源），优化用户体验。\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"局限性\">局限性\u003Ca href=\"#局限性\" class=\"heading-anchor-link\" aria-label=\"Link to 局限性\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Col>\n\u003Cli>TCP 层的队头阻塞：若 TCP 包丢失，后续所有流需等待重传（HTTP/3 改用 QUIC 协议解决）。\u003C/li>\n\u003Cli>服务器实现复杂度：需高效管理帧的排序、优先级和流量控制。\u003C/li>\n\u003C/ol>",{"headings":196,"localImagePaths":230,"remoteImagePaths":231,"frontmatter":232,"imagePaths":235},[197,200,203,206,209,212,214,216,219,222,224,226,228],{"depth":30,"slug":198,"text":199},"http","HTTP",{"depth":54,"slug":201,"text":202},"uri和url","URI和URL",{"depth":54,"slug":204,"text":205},"http的特点","HTTP的特点",{"depth":54,"slug":207,"text":208},"http的工作过程","HTTP的工作过程",{"depth":54,"slug":210,"text":211},"http格式","HTTP格式",{"depth":54,"slug":213,"text":213},"状态码",{"depth":54,"slug":215,"text":215},"请求方法",{"depth":54,"slug":217,"text":218},"http2-的多路复用","http2 的多路复用",{"depth":58,"slug":220,"text":221},"http1x-的局限性","HTTP/1.x 的局限性",{"depth":58,"slug":223,"text":223},"多路复用的核心机制",{"depth":58,"slug":225,"text":225},"工作原理示例",{"depth":58,"slug":227,"text":227},"核心优势",{"depth":58,"slug":229,"text":229},"局限性",[],[],{"title":186,"description":188,"draft":18,"published":233,"minutes":234},["Date","2025-08-09T00:00:00.000Z"],8,[],"scattered-notes/coordinate-system",{"id":236,"data":238,"body":242,"filePath":243,"digest":244,"rendered":245},{"title":239,"published":240,"description":21,"tags":241,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"地图坐标系",["Date","2025-04-01T00:00:00.000Z"],[],"## 坐标系\n\n1. 地球坐标系——WGS84：常见于 GPS 设备，Google 地图等国际标准的坐标体系。\n2. 火星坐标系——GCJ-02：中国国内使用的被强制加密后的坐标体系，高德坐标就属于该种坐标体系。\n3. 百度坐标系——BD-09：百度地图所使用的坐标体系，是在火星坐标系的基础上又进行了一次加密处理。\n\n### 坐标系转换\n\n```typescript\n// 其他转高德\nconst gps = [116.3, 39.9];\nAMap.convertFrom(gps, 'gps', function (status, result) {\n  if (result.info === 'ok') {\n    var lnglats = result.locations; // Array.\u003CLngLat>\n  }\n});\n```\n\n### 高德地图使用\n\n```html\n// index.html\n\u003C!doctype html>\n\u003Chtml lang=\"en\">\n\u003Chead>\n    \u003Cmeta charset=\"UTF-8\">\n    \u003Cmeta name=\"viewport\"\n          content=\"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0\">\n    \u003Cmeta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n    \u003Cscript type=\"text/javascript\">\n      // window._AMapSecurityConfig = {\n      //   serviceHost:'您的代理服务器域名或地址/_AMapService',\n      //   // 例如 ：serviceHost:'http://1.1.1.1:80/_AMapService',\n      // }\n      window._AMapSecurityConfig = {\n        securityJsCode: '5a140667dc5bbe20e03cae7f1cf60fd6',\n      };\n    \u003C/script>\n    \u003Cscript type=\"text/javascript\" src=\"https://webapi.amap.com/maps?v=1.4.15&key=94483fe7a13c234bc844ceb20c7a1915\">\u003C/script>\n    \u003Cscript type=\"text/javascript\" src=\"https://webapi.amap.com/maps?v=1.4.15&key=94483fe7a13c234bc844ceb20c7a1915&plugin=AMap.MouseTool,AMap.Scale,AMap.OverView,AMap.Geolocation,AMap.AdvancedInfoWindow,AMap.Autocomplete,AMap.PlaceSearch,AMap.PlaceSearch,AMap.Geocoder,AMap.Marker\">\u003C/script>\n    \u003Ctitle>Document\u003C/title>\n\u003C/head>\n\u003Cbody>\n    \u003Cdiv id=\"root\">\u003C/div>\n\u003C/body>\n\u003C/html>\n```\n\n```tsx\n// AMap.ts\nimport { Input } from 'antd';\nimport { ChangeEvent, FC, useEffect, useRef, useState } from 'react';\n\nimport styles from './amap.less';\n\ninterface IAMapProps {\n  // 中心点 [经度, 纬度]\n  center: number[];\n  // zoom\n  zoom: number;\n  width: string;\n  height: string;\n  autoOptions?: object;\n  markCenter?: boolean;\n}\n\nconst defaultAutoOptions = {\n  // 城市，默认全国\n  city: '全国',\n  // 使用联想输入的input的id\n  input: 'gd-map-autoComplete',\n};\n\n// @ts-ignore\nconst { AMap } = window;\n\nconst Map: FC\u003CIAMapProps> = props => {\n  const { center, zoom, width, height, autoOptions, markCenter = true } = props;\n  const mapInstance = useRef\u003Cany>(null);\n\n  const [inputValue, setInputValue] = useState('');\n\n  const renderMap = () => {\n    // 实例化地图\n    if (mapInstance.current) mapInstance.current.destroy();\n    const map = new AMap.Map('gd-map', {\n      zoom,\n      center,\n    });\n    const clickHandler = function(e: any) {\n      map.clearMap();\n      const point = [e.lnglat.getLng(), e.lnglat.getLat()];\n      const marker = new AMap.Marker({\n        position: point,\n      });\n      map.add(marker);\n      // map.setZoomAndCenter(zoom, point);\n    };\n    // 绑定事件\n    map.on('click', clickHandler);\n\n    AMap.plugin(['AMap.Autocomplete', 'AMap.PlaceSearch'], () => {\n      const autocomplete = new AMap.Autocomplete(\n        autoOptions\n          ? Object.assign(defaultAutoOptions, autoOptions)\n          : defaultAutoOptions,\n      );\n      AMap.event.addListener(autocomplete, 'select', (e: any) => {\n        const {\n          poi: { name, location },\n        } = e;\n        const { lat, lng } = location;\n        const point = [lng, lat];\n        setInputValue(name);\n        const marker = new AMap.Marker({\n          position: point,\n        });\n        map.setCenter(point);\n        map.add(marker);\n      });\n    });\n\n    mapInstance.current = map;\n  };\n\n  // 输入框内容\n  const handleInput = (event: ChangeEvent\u003CHTMLInputElement>) => {\n    const { value } = event.target;\n    setInputValue(value);\n  };\n\n  useEffect(() => {\n    renderMap();\n  }, []);\n\n  useEffect(() => {\n    if (mapInstance.current) {\n      if (!markCenter) {\n        mapInstance.current.setZoomAndCenter(zoom, center);\n        return;\n      }\n      const marker = new AMap.Marker({\n        position: center,\n      });\n      mapInstance.current.setZoomAndCenter(zoom, center);\n      mapInstance.current.add(marker);\n    }\n  }, [center, zoom]);\n\n  return (\n    \u003Cdiv className={styles.amap}>\n      \u003Cdiv className={styles['amap-input-wrapper']}>\n        \u003CInput\n          id=\"gd-map-autoComplete\"\n          value={inputValue}\n          onChange={handleInput}\n          allowClear\n          className={styles['amap-input']}\n          placeholder=\"请输入\"\n        />\n      \u003C/div>\n      \u003Cdiv\n        id=\"gd-map\"\n        style={{ width: width || '100%', height: height || '100%' }}\n      />\n    \u003C/div>\n  );\n};\n\nexport default Map;\n```\n\n```less\n// amap.less`\n.amap {\n  position: relative;\n\n  &-input-wrapper {\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 30;\n\n    .amap-input {\n      width: 200px;\n      height: 32px;\n    }\n  }\n}\n```","src/content/blog/scattered-notes/coordinate-system.md","29736dae230e9340",{"html":246,"metadata":247},"\u003Ch2 id=\"坐标系\">坐标系\u003Ca href=\"#坐标系\" class=\"heading-anchor-link\" aria-label=\"Link to 坐标系\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Col>\n\u003Cli>地球坐标系——WGS84：常见于 GPS 设备，Google 地图等国际标准的坐标体系。\u003C/li>\n\u003Cli>火星坐标系——GCJ-02：中国国内使用的被强制加密后的坐标体系，高德坐标就属于该种坐标体系。\u003C/li>\n\u003Cli>百度坐标系——BD-09：百度地图所使用的坐标体系，是在火星坐标系的基础上又进行了一次加密处理。\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"坐标系转换\">坐标系转换\u003Ca href=\"#坐标系转换\" class=\"heading-anchor-link\" aria-label=\"Link to 坐标系转换\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 其他转高德\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> gps\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">116.3\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">39.9\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">AMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">convertFrom\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(gps, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'gps'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">status\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">result\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (result.info \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'ok'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    var\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> lnglats \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> result.locations; \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// Array.&#x3C;LngLat>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">});\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"高德地图使用\">高德地图使用\u003Ca href=\"#高德地图使用\" class=\"heading-anchor-link\" aria-label=\"Link to 高德地图使用\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"html\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">// index.html\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;!\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">doctype\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> html\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">html\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> lang\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"en\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">head\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">meta\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> charset\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"UTF-8\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">meta\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> name\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"viewport\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">          content\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">meta\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> http-equiv\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"X-UA-Compatible\"\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> content\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"ie=edge\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> type\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"text/javascript\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">      // window._AMapSecurityConfig = {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">      //   serviceHost:'您的代理服务器域名或地址/_AMapService',\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">      //   // 例如 ：serviceHost:'http://1.1.1.1:80/_AMapService',\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">      // }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      window._AMapSecurityConfig \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        securityJsCode: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'5a140667dc5bbe20e03cae7f1cf60fd6'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> type\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"text/javascript\"\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> src\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"https://webapi.amap.com/maps?v=1.4.15&#x26;key=94483fe7a13c234bc844ceb20c7a1915\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> type\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"text/javascript\"\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> src\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"https://webapi.amap.com/maps?v=1.4.15&#x26;key=94483fe7a13c234bc844ceb20c7a1915&#x26;plugin=AMap.MouseTool,AMap.Scale,AMap.OverView,AMap.Geolocation,AMap.AdvancedInfoWindow,AMap.Autocomplete,AMap.PlaceSearch,AMap.PlaceSearch,AMap.Geocoder,AMap.Marker\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">title\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>Document&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">title\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">head\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">body\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> id\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"root\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">body\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">html\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"tsx\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// AMap.ts\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { Input } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'antd'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { ChangeEvent, FC, useEffect, useRef, useState } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'react'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> styles \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> './amap.less'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">interface\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> IAMapProps\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 中心点 [经度, 纬度]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">  center\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> number\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">[];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // zoom\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">  zoom\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> number\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">  width\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">  height\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">  autoOptions\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> object\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">  markCenter\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> boolean\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> defaultAutoOptions\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 城市，默认全国\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  city: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'全国'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 使用联想输入的input的id\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  input: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'gd-map-autoComplete'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// @ts-ignore\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">AMap\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> window;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Map\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> FC\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">IAMapProps\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">> \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"> props\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">center\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">zoom\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">width\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">height\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">autoOptions\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">markCenter\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> true\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> props;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> mapInstance\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> useRef\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">any\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">inputValue\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">setInputValue\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> useState\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> renderMap\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    // 实例化地图\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (mapInstance.current) mapInstance.current.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">destroy\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> map\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> AMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">Map\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'gd-map'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      zoom,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      center,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> clickHandler\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> function\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">e\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> any\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      map.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">clearMap\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> point\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [e.lnglat.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">getLng\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(), e.lnglat.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">getLat\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">()];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> marker\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> AMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">Marker\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        position: point,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      map.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">add\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(marker);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">      // map.setZoomAndCenter(zoom, point);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    // 绑定事件\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    map.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">on\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'click'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, clickHandler);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    AMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">plugin\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">([\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'AMap.Autocomplete'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'AMap.PlaceSearch'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">], () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> autocomplete\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> AMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">Autocomplete\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        autoOptions\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">          ?\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> Object.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">assign\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(defaultAutoOptions, autoOptions)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">          :\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> defaultAutoOptions,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      );\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      AMap.event.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">addListener\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(autocomplete, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'select'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">e\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> any\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        const\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">          poi\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: { \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">name\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">location\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> e;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        const\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">lat\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">lng\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> location;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> point\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [lng, lat];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">        setInputValue\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(name);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> marker\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> AMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">Marker\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">          position: point,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        map.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">setCenter\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(point);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        map.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">add\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(marker);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    mapInstance.current \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> map;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 输入框内容\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> handleInput\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">event\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ChangeEvent\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">HTMLInputElement\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">value\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> event.target;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    setInputValue\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(value);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  useEffect\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    renderMap\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }, []);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  useEffect\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (mapInstance.current) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">markCenter) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        mapInstance.current.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">setZoomAndCenter\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(zoom, center);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> marker\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> AMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">Marker\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        position: center,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      mapInstance.current.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">setZoomAndCenter\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(zoom, center);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      mapInstance.current.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">add\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(marker);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }, [center, zoom]);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> className\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">{styles.amap}>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> className\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">{styles[\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'amap-input-wrapper'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]}>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        &#x3C;\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">Input\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">          id\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"gd-map-autoComplete\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">          value\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">{inputValue}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">          onChange\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">{handleInput}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">          allowClear\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">          className\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">{styles[\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'amap-input'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">          placeholder\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"请输入\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        />\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">        id\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"gd-map\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">        style\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">{{ width: width \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">||\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '100%'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, height: height \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">||\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '100%'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      />\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  );\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">export\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> default\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> Map;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"less\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// amap.less`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">.amap\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">  position\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">relative\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  &#x26;-\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">input-wrapper\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    position\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">absolute\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    top\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    left\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    z-index\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">30\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    .amap-input\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">      width\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">200\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">px\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">      height\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">32\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">px\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>",{"headings":248,"localImagePaths":255,"remoteImagePaths":256,"frontmatter":257,"imagePaths":259},[249,251,253],{"depth":54,"slug":250,"text":250},"坐标系",{"depth":58,"slug":252,"text":252},"坐标系转换",{"depth":58,"slug":254,"text":254},"高德地图使用",[],[],{"title":239,"description":21,"draft":18,"published":258,"minutes":58},["Date","2025-04-01T00:00:00.000Z"],[],"scattered-notes/js-clone",{"id":260,"data":262,"body":267,"filePath":268,"digest":269,"rendered":270},{"title":263,"published":264,"description":265,"tags":266,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"JavaScript深浅拷贝详解",["Date","2025-08-09T00:00:00.000Z"],"深入理解JavaScript中的深浅拷贝概念，包含多种实现方法和实际应用场景",[],"\u003C!--\n * @Author: shawicx d35f3153@proton.me\n * @Date: 2024-06-23 00:57:25\n * @LastEditors: shawicx d35f3153@proton.me\n * @LastEditTime: 2025-08-09 09:45:45\n * @Description:\n-->\n# 深浅拷贝\n\n## 一、问题由来\n\n*这个问题的出现主要是Javascript的数据类型差异，即原始数据类型和引用数据类型。**我们知道对于原始数据类型来说，变量是直接按值存放的，存放在栈内存中的简单数据段，可以直接访问。而对于引用数据类型来说，变量保存的是一个指针，这个指针指向另一个位置。当需要访问引用类型（如对象，数组等）的值时，首先从栈中获得该对象的地址指针，然后再从堆内存中取得所需的数据。*\n\n```typescript\nlet obj = {\n  begin: \"begin\",\n  last: \"last\",\n  func: function() {\n    console.log(this.first);\n  }\n};\nlet copy = obj;\ncopy.begin = \"end\";\nconsole.log(obj.begin);\n// end\n```\n\n> 出现这个现象的原因是因为copy和obj指向的是同一个内存地址，改变其中一个时另一个自然也改变了，这就是浅拷贝。而深拷贝则会新开辟一个内存地址，将原对象的各个属性逐个复制进去，对拷贝对象和被拷贝对象的操作互不影响。\n\n***\n\n## 二、浅拷贝\n\n> 定义一个复制对象:\n\n```typescript\nconst obj = {\n  name: \"张三\",\n  age: 18,\n  // 性别\n  gender: \"man\",\n  school: {\n    primary: \"希望小学\",\n    middle: \"明德中学\",\n    university: \"人生大学\"\n  }\n}\n```\n\n#### 1. 遍历复制\n\n```typescript\nfunction shallowCopy(obj) {\n  if (typeof obj !== 'object') return;\n  // 根据obj的类型判断是新建一个数组还是对象\n  let _obj = obj instanceof Array ? [] : {};\n  // 遍历obj，并且判断是obj的属性才拷贝\n  for (let key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      _obj[key] = obj[key];\n    }\n  }\n  return _obj;\n}\n```\n\n现在来测试一下这个函数:\n\n```typescript\nlet x = shallowCopy(obj);\nlet y = x;\ny.school.middle = \"平川中学\";\nconsole.log(x.school.middle);\n// 平川中学\n// 测试结果表明这是浅拷贝\n```\n\n#### 2. `Object.assign()`\n\n*这个Api的功能是把任意多个的源对象自身的可枚举属性拷贝给目标对象，然后返回目标对象*\n\n```typescript\nlet _obj = Object.assign({}, obj);\n_obj.school.primary = \"红旗小学\";\nconsole.log(obj.school.primary);\n// 红旗小学\n```\n\n## 三、深拷贝\n\n#### 1. `Object.prototype.hasOwnProperty()`\n\n```typescript\nfunction deepCopy(obj) {\n  if (typeof obj !== 'object') return;\n  let _obj = obj instanceof Array ? [] : {};\n  for (let key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      _obj[key] = typeof obj[key] === 'object' ? deepCopy(obj[key]) : obj[key];\n    }\n  }\n  return _obj;\n}\n```\n\n**测试：**\n\n```typescript\nlet copy = deepCopy(obj);\ncopy.school.middle = \"华夏中学\";\nconsole.log(obj.school.middle);\n// 明德中学\n// 拷贝出来的对象值的改变并未导致原对象值的改变。\n```\n\n#### 2. `JSON.parse()`和`JSON.stringify()`\n\n```typescript\nlet copy = JSON.parse(JSON.stringify(obj));\ncopy.shcool.university = \"清华大学\";\nconsole.log(obj.shcool.university);\n// 人生大学\n```\n\n> 这种方法不能对Function、Date等对象实现深拷贝。\n\n## 四、能应对大部分场景的深拷贝\n\n> 此方法来自Stackoverflow的高支持答案，目前支持数达到1342(截至2018-10-01)，原答案[戳这里](https://stackoverflow.com/questions/728360/how-do-i-correctly-clone-a-javascript-object?page=1#tab-top \"戳这里\")\n\n```typescript\nfunction deepCopy(obj) {\n  let copy;\n  // 处理3个简单的类型, null 或者 undefined\n  if (obj === null || typeof obj !== 'object') {\n    return obj;\n  }\n  if (obj instanceof Date) {\n    copy = new Date();\n    copy.setTime(obj.getTime());\n    return copy;\n  }\n  if (obj instanceof Array) {\n    let copy = [];\n    for (var i = 0, len = obj.length; i \u003C len; i++) {\n      copy[i] = clone(obj[i]);\n    }\n    return copy;\n  }\n  if (obj instanceof Object) {\n    let copy = {};\n    for (let attr in obj) {\n      if (obj.hasOwnProperty(attr)) {\n        copy[attr] = clone(obj[attr]);\n      }\n    }\n    return copy;\n  }\n  throw new Error(\"Unable to copy obj! Its type isn't supported.\");\n}\n```\n\n以上代码能满足大部分的需求，但仍有一些情形不能解决，如：\n\n```typescript\n// 这样可以成功深拷贝\nvar tree = {\n  \"left\": { \"left\": null, \"right\": null, \"data\": 3 },\n  \"right\": null,\n  \"data\": 8\n};\n\n// 这样也可以成功，但是你会得到2份内部节点，而不是2个引用相同的副本\nvar directedAcyclicGraph = {\n  \"left\"  : { \"left\" : null, \"right\" : null, \"data\" : 3 },\n  \"data\"  : 8\n};\n\ndirectedAcyclicGraph[\"right\"] = directedAcyclicGraph[\"left\"];\n\n// 这种情况因为无限的递归，会导致堆栈溢出\nvar cylicGraph = {\n  \"left\"  : { \"left\" : null, \"right\" : null, \"data\" : 3 },\n  \"data\"  : 8\n};\ncylicGraph[\"right\"] = cylicGraph;\n```","src/content/blog/scattered-notes/js-clone.md","aaf742a6cda18a27",{"html":271,"metadata":272},"\u003C!--\n * @Author: shawicx d35f3153@proton.me\n * @Date: 2024-06-23 00:57:25\n * @LastEditors: shawicx d35f3153@proton.me\n * @LastEditTime: 2025-08-09 09:45:45\n * @Description:\n-->\n\u003Ch1 id=\"深浅拷贝\">深浅拷贝\u003Ca href=\"#深浅拷贝\" class=\"heading-anchor-link\" aria-label=\"Link to 深浅拷贝\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>\n\u003Ch2 id=\"一问题由来\">一、问题由来\u003Ca href=\"#一问题由来\" class=\"heading-anchor-link\" aria-label=\"Link to 一、问题由来\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cp>*这个问题的出现主要是Javascript的数据类型差异，即原始数据类型和引用数据类型。*\u003Cem>我们知道对于原始数据类型来说，变量是直接按值存放的，存放在栈内存中的简单数据段，可以直接访问。而对于引用数据类型来说，变量保存的是一个指针，这个指针指向另一个位置。当需要访问引用类型（如对象，数组等）的值时，首先从栈中获得该对象的地址指针，然后再从堆内存中取得所需的数据。\u003C/em>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> obj \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  begin: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"begin\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  last: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"last\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  func\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.first);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> copy \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> obj;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">copy.begin \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> \"end\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(obj.begin);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// end\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cblockquote>\n\u003Cp>出现这个现象的原因是因为copy和obj指向的是同一个内存地址，改变其中一个时另一个自然也改变了，这就是浅拷贝。而深拷贝则会新开辟一个内存地址，将原对象的各个属性逐个复制进去，对拷贝对象和被拷贝对象的操作互不影响。\u003C/p>\n\u003C/blockquote>\n\u003Chr>\n\u003Ch2 id=\"二浅拷贝\">二、浅拷贝\u003Ca href=\"#二浅拷贝\" class=\"heading-anchor-link\" aria-label=\"Link to 二、浅拷贝\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cblockquote>\n\u003Cp>定义一个复制对象:\u003C/p>\n\u003C/blockquote>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> obj\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"张三\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  age: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">18\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 性别\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  gender: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"man\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  school: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    primary: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"希望小学\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    middle: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"明德中学\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    university: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"人生大学\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch4 id=\"1-遍历复制\">1. 遍历复制\u003Ca href=\"#1-遍历复制\" class=\"heading-anchor-link\" aria-label=\"Link to 1. 遍历复制\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> shallowCopy\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">obj\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">typeof\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> obj \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!==\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'object'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 根据obj的类型判断是新建一个数组还是对象\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> _obj \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> obj \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">instanceof\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Array\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> ?\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 遍历obj，并且判断是obj的属性才拷贝\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  for\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> key \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">in\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> obj) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (obj.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">hasOwnProperty\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(key)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      _obj[key] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> obj[key];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> _obj;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cp>现在来测试一下这个函数:\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> x \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> shallowCopy\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(obj);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> y \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> x;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">y.school.middle \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> \"平川中学\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(x.school.middle);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 平川中学\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 测试结果表明这是浅拷贝\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch4 id=\"2-objectassign\">2. \u003Ccode>Object.assign()\u003C/code>\u003Ca href=\"#2-objectassign\" class=\"heading-anchor-link\" aria-label=\"Link to 2. Object.assign()\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cp>\u003Cem>这个Api的功能是把任意多个的源对象自身的可枚举属性拷贝给目标对象，然后返回目标对象\u003C/em>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> _obj \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> Object.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">assign\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({}, obj);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">_obj.school.primary \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> \"红旗小学\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(obj.school.primary);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 红旗小学\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"三深拷贝\">三、深拷贝\u003Ca href=\"#三深拷贝\" class=\"heading-anchor-link\" aria-label=\"Link to 三、深拷贝\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch4 id=\"1-objectprototypehasownproperty\">1. \u003Ccode>Object.prototype.hasOwnProperty()\u003C/code>\u003Ca href=\"#1-objectprototypehasownproperty\" class=\"heading-anchor-link\" aria-label=\"Link to 1. Object.prototype.hasOwnProperty()\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> deepCopy\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">obj\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">typeof\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> obj \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!==\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'object'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> _obj \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> obj \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">instanceof\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Array\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> ?\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  for\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> key \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">in\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> obj) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (obj.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">hasOwnProperty\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(key)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      _obj[key] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> typeof\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> obj[key] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'object'\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> ?\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> deepCopy\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(obj[key]) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> obj[key];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> _obj;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cp>\u003Cstrong>测试：\u003C/strong>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> copy \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> deepCopy\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(obj);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">copy.school.middle \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> \"华夏中学\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(obj.school.middle);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 明德中学\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 拷贝出来的对象值的改变并未导致原对象值的改变。\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch4 id=\"2-jsonparse和jsonstringify\">2. \u003Ccode>JSON.parse()\u003C/code>和\u003Ccode>JSON.stringify()\u003C/code>\u003Ca href=\"#2-jsonparse和jsonstringify\" class=\"heading-anchor-link\" aria-label=\"Link to 2. JSON.parse()和JSON.stringify()\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> copy \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> JSON\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">parse\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">JSON\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">stringify\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(obj));\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">copy.shcool.university \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> \"清华大学\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(obj.shcool.university);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 人生大学\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cblockquote>\n\u003Cp>这种方法不能对Function、Date等对象实现深拷贝。\u003C/p>\n\u003C/blockquote>\n\u003Ch2 id=\"四能应对大部分场景的深拷贝\">四、能应对大部分场景的深拷贝\u003Ca href=\"#四能应对大部分场景的深拷贝\" class=\"heading-anchor-link\" aria-label=\"Link to 四、能应对大部分场景的深拷贝\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cblockquote>\n\u003Cp>此方法来自Stackoverflow的高支持答案，目前支持数达到1342(截至2018-10-01)，原答案\u003Ca href=\"https://stackoverflow.com/questions/728360/how-do-i-correctly-clone-a-javascript-object?page=1#tab-top\" title=\"戳这里\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">戳这里\u003C/a>\u003C/p>\n\u003C/blockquote>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> deepCopy\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">obj\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> copy;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 处理3个简单的类型, null 或者 undefined\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (obj \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> null\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> ||\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> typeof\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> obj \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!==\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'object'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> obj;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (obj \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">instanceof\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Date\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    copy \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Date\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    copy.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">setTime\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(obj.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">getTime\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">());\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> copy;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (obj \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">instanceof\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Array\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> copy \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    for\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">var\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> i \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, len \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> obj.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">; i \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x3C;\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> len; i\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">++\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      copy[i] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> clone\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(obj[i]);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> copy;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (obj \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">instanceof\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Object\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> copy \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    for\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> attr \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">in\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> obj) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (obj.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">hasOwnProperty\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(attr)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        copy[attr] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> clone\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(obj[attr]);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> copy;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  throw\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Error\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"Unable to copy obj! Its type isn't supported.\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cp>以上代码能满足大部分的需求，但仍有一些情形不能解决，如：\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 这样可以成功深拷贝\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">var\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> tree \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">  \"left\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: { \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"left\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"right\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"data\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">3\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">  \"right\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">  \"data\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 这样也可以成功，但是你会得到2份内部节点，而不是2个引用相同的副本\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">var\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> directedAcyclicGraph \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">  \"left\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  : { \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"left\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> : \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"right\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> : \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"data\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> : \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">3\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">  \"data\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  : \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">directedAcyclicGraph[\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"right\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> directedAcyclicGraph[\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"left\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 这种情况因为无限的递归，会导致堆栈溢出\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">var\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> cylicGraph \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">  \"left\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  : { \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"left\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> : \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"right\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> : \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"data\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> : \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">3\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">  \"data\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  : \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">cylicGraph[\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"right\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> cylicGraph;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>",{"headings":273,"localImagePaths":301,"remoteImagePaths":302,"frontmatter":303,"imagePaths":306},[274,276,279,282,286,289,292,295,298],{"depth":30,"slug":275,"text":275},"深浅拷贝",{"depth":54,"slug":277,"text":278},"一问题由来","一、问题由来",{"depth":54,"slug":280,"text":281},"二浅拷贝","二、浅拷贝",{"depth":283,"slug":284,"text":285},4,"1-遍历复制","1. 遍历复制",{"depth":283,"slug":287,"text":288},"2-objectassign","2. Object.assign()",{"depth":54,"slug":290,"text":291},"三深拷贝","三、深拷贝",{"depth":283,"slug":293,"text":294},"1-objectprototypehasownproperty","1. Object.prototype.hasOwnProperty()",{"depth":283,"slug":296,"text":297},"2-jsonparse和jsonstringify","2. JSON.parse()和JSON.stringify()",{"depth":54,"slug":299,"text":300},"四能应对大部分场景的深拷贝","四、能应对大部分场景的深拷贝",[],[],{"title":263,"description":265,"draft":18,"published":304,"minutes":305},["Date","2025-08-09T00:00:00.000Z"],5,[],"scattered-notes/my-promise",{"id":307,"data":309,"body":314,"filePath":315,"digest":316,"rendered":317},{"title":310,"published":311,"description":312,"tags":313,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"Promise与HTTPS技术详解",["Date","2025-08-09T00:00:00.000Z"],"JavaScript Promise状态机机制和HTTPS安全通信协议的核心概念解析",[],"\u003C!--\n * @Author: shawicx d35f3153@proton.me\n * @Date: 2025-04-03 13:58:46\n * @LastEditors: shawicx d35f3153@proton.me\n * @LastEditTime: 2025-08-09 09:45:52\n * @Description:\n-->\n# Promise\n\n## 核心概念\n\n1. Promise 是一个状态机，有三种不可逆的状态：\n    - Pending（等待中）：初始状态，未完成或未拒绝。\n    - Fulfilled（已成功）：操作成功完成，通过 resolve(value) 触发。\n    - Rejected（已失败）：操作失败，通过 reject(reason) 触发。\n      状态一旦变化，不可回退。\n\n2. 链式调用 - 每个 Promise 实例的 .then()、.catch() 和 .finally() 方法返回 新的 Promise，支持链式调用。\n   这种设计允许将多个异步操作串联起来，形成清晰的代码逻辑。\n\n3. 微任务（Microtask）- Promise 的回调函数（如 .then()）会被放入 微任务队列，在当前主线程任务执行完毕后、下一个宏任务（如\n   setTimeout）之前执行。这确保了\n   Promise 的高优先级处理。\n\n## HTTPS\n\n### HTTPS 与 HTTP 的区别\n\n1. 安全性：HTTP 以明文传输数据，易被窃听或篡改；HTTPS 通过加密和完整性校验保护数据。\n2. 端口：HTTP 默认使用 80 端口，HTTPS 使用 443 端口。\n3. 协议栈：HTTPS 在 HTTP 和 TCP 之间加入 SSL/TLS 加密层，实现安全通信。\n4. URL 标识：HTTPS 网址以 https:// 开头，浏览器通常显示锁形图标。\n\n### 核心功能\n\n1. 加密传输：使用对称加密算法（如 SSL/TLS 协议）加密数据，防止窃听。\n2. 身份验证：通过数字证书验证服务器身份，防止中间人攻击。\n3. 数据完整性：使用哈希算法（如 SHA-256）校验数据未被篡改。","src/content/blog/scattered-notes/my-promise.md","76c7f1b98dbab685",{"html":318,"metadata":319},"\u003C!--\n * @Author: shawicx d35f3153@proton.me\n * @Date: 2025-04-03 13:58:46\n * @LastEditors: shawicx d35f3153@proton.me\n * @LastEditTime: 2025-08-09 09:45:52\n * @Description:\n-->\n\u003Ch1 id=\"promise\">Promise\u003Ca href=\"#promise\" class=\"heading-anchor-link\" aria-label=\"Link to Promise\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>\n\u003Ch2 id=\"核心概念\">核心概念\u003Ca href=\"#核心概念\" class=\"heading-anchor-link\" aria-label=\"Link to 核心概念\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Col>\n\u003Cli>\n\u003Cp>Promise 是一个状态机，有三种不可逆的状态：\u003C/p>\n\u003Cul>\n\u003Cli>Pending（等待中）：初始状态，未完成或未拒绝。\u003C/li>\n\u003Cli>Fulfilled（已成功）：操作成功完成，通过 resolve(value) 触发。\u003C/li>\n\u003Cli>Rejected（已失败）：操作失败，通过 reject(reason) 触发。\n状态一旦变化，不可回退。\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\n\u003Cp>链式调用 - 每个 Promise 实例的 .then()、.catch() 和 .finally() 方法返回 新的 Promise，支持链式调用。\n这种设计允许将多个异步操作串联起来，形成清晰的代码逻辑。\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>微任务（Microtask）- Promise 的回调函数（如 .then()）会被放入 微任务队列，在当前主线程任务执行完毕后、下一个宏任务（如\nsetTimeout）之前执行。这确保了\nPromise 的高优先级处理。\u003C/p>\n\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"https\">HTTPS\u003Ca href=\"#https\" class=\"heading-anchor-link\" aria-label=\"Link to HTTPS\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"https-与-http-的区别\">HTTPS 与 HTTP 的区别\u003Ca href=\"#https-与-http-的区别\" class=\"heading-anchor-link\" aria-label=\"Link to HTTPS 与 HTTP 的区别\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Col>\n\u003Cli>安全性：HTTP 以明文传输数据，易被窃听或篡改；HTTPS 通过加密和完整性校验保护数据。\u003C/li>\n\u003Cli>端口：HTTP 默认使用 80 端口，HTTPS 使用 443 端口。\u003C/li>\n\u003Cli>协议栈：HTTPS 在 HTTP 和 TCP 之间加入 SSL/TLS 加密层，实现安全通信。\u003C/li>\n\u003Cli>URL 标识：HTTPS 网址以 https:// 开头，浏览器通常显示锁形图标。\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"核心功能\">核心功能\u003Ca href=\"#核心功能\" class=\"heading-anchor-link\" aria-label=\"Link to 核心功能\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Col>\n\u003Cli>加密传输：使用对称加密算法（如 SSL/TLS 协议）加密数据，防止窃听。\u003C/li>\n\u003Cli>身份验证：通过数字证书验证服务器身份，防止中间人攻击。\u003C/li>\n\u003Cli>数据完整性：使用哈希算法（如 SHA-256）校验数据未被篡改。\u003C/li>\n\u003C/ol>",{"headings":320,"localImagePaths":334,"remoteImagePaths":335,"frontmatter":336,"imagePaths":338},[321,324,326,329,332],{"depth":30,"slug":322,"text":323},"promise","Promise",{"depth":54,"slug":325,"text":325},"核心概念",{"depth":54,"slug":327,"text":328},"https","HTTPS",{"depth":58,"slug":330,"text":331},"https-与-http-的区别","HTTPS 与 HTTP 的区别",{"depth":58,"slug":333,"text":333},"核心功能",[],[],{"title":310,"description":312,"draft":18,"published":337,"minutes":54},["Date","2025-08-09T00:00:00.000Z"],[],"scattered-notes/monorepo",{"id":339,"data":341,"body":346,"filePath":347,"digest":348,"rendered":349},{"title":342,"published":343,"description":344,"tags":345,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"Monorepo项目问题记录",["Date","2025-08-09T00:00:00.000Z"],"Monorepo项目中遇到的TypeScript路径解析等技术问题及解决方案",[],"\u003C!--\n * @Author: shawicx d35f3153@proton.me\n * @Date: 2024-06-23 01:01:02\n * @LastEditors: shawicx d35f3153@proton.me\n * @LastEditTime: 2025-08-09 09:49:33\n * @Description:\n-->\n# monorepo 的一些问题\n## tsconfig paths 解析失败\n\n```json\n{\n  \"paths\": {\n    \"@/*\": [\n      \"./src/*\"\n    ],\n    \"@/api\": [\n      \"./src/api\"\n    ],\n    \"@toucan/meta\": [\n      \"../toucan-meta/src\"\n    ]\n  }\n}\n```\n\nwebpack 报错 Error: ERROR in ./packages/toucan-core/src/DataStatistics/index.tsx","src/content/blog/scattered-notes/monorepo.md","ff9d7a4398201d24",{"html":350,"metadata":351},"\u003C!--\n * @Author: shawicx d35f3153@proton.me\n * @Date: 2024-06-23 01:01:02\n * @LastEditors: shawicx d35f3153@proton.me\n * @LastEditTime: 2025-08-09 09:49:33\n * @Description:\n-->\n\u003Ch1 id=\"monorepo-的一些问题\">monorepo 的一些问题\u003Ca href=\"#monorepo-的一些问题\" class=\"heading-anchor-link\" aria-label=\"Link to monorepo 的一些问题\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>\n\u003Ch2 id=\"tsconfig-paths-解析失败\">tsconfig paths 解析失败\u003Ca href=\"#tsconfig-paths-解析失败\" class=\"heading-anchor-link\" aria-label=\"Link to tsconfig paths 解析失败\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"json\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">  \"paths\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    \"@/*\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">      \"./src/*\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    ],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    \"@/api\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">      \"./src/api\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    ],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    \"@toucan/meta\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">      \"../toucan-meta/src\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    ]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cp>webpack 报错 Error: ERROR in ./packages/toucan-core/src/DataStatistics/index.tsx\u003C/p>",{"headings":352,"localImagePaths":359,"remoteImagePaths":360,"frontmatter":361,"imagePaths":363},[353,356],{"depth":30,"slug":354,"text":355},"monorepo-的一些问题","monorepo 的一些问题",{"depth":54,"slug":357,"text":358},"tsconfig-paths-解析失败","tsconfig paths 解析失败",[],[],{"title":342,"description":344,"draft":18,"published":362,"minutes":30},["Date","2025-08-09T00:00:00.000Z"],[],"scattered-notes/regex",{"id":364,"data":366,"body":371,"filePath":372,"digest":373,"rendered":374},{"title":367,"published":368,"description":369,"tags":370,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"常用正则表达式大全",["Date","2025-08-09T00:00:00.000Z"],"收录常用的正则表达式模式，包括密码校验、手机号、身份证号、邮箱等验证规则",[],"# 正则\n\n```typescript\n// 允许中文、英文字母、数字、空格和特殊字符，长度1-32位\nconst reg = /^[\\u4e00-\\u9fa5a-zA-Z\\d\\s_~!@#$%^&*()[\\]{}+-=.,;/\\\\|\"']{1,32}$/;\n```\n\n```typescript\n// 只允许中文和英文字母，长度1-64位\nconst reg = /^[\\u4e00-\\u9fa5a-zA-Z]{1,64}$/;\n```\n\n```typescript\n// 允许任意字符，长度1-128位\nconst reg = /^.{1,128}$/;\n```\n\n```typescript\n// URL地址校验（支持http、https、ftp协议）\nconst reg = /^(https?|ftp):\\/\\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+\\.([a-zA-Z]{2,}))(:[0-9]+)*(\\/($|[a-zA-Z0-9.,?'\\\\+&%$#=~_-]+))*$/;\n```\n\n```typescript\n// 密码校验：6-18位，不能是纯数字、纯字母或纯特殊字符\nconst reg = /(?!^(\\d+|[a-zA-Z]+|[_~!@#$%^&*()[\\]{}+-=.,;/\\\\|\"']+)$)^[\\w_~!@#$%^&*()[\\]{}+-=.,;/\\\\|\"']{6,18}$/;\n```\n\n```typescript\n// 允许任意字符，长度1-255位\nconst reg = /^.{1,255}$/;\n```\n\n```typescript\n// 手机号码校验（11位，以1开头）\nconst reg = /^1[0-9]{10}$/;\n```\n\n```typescript\n// 固定电话校验（可选3-4位区号-7-8位号码）\nconst reg = /^([0-9]{3,4}-)?[0-9]{7,8}$/;\n```\n\n```typescript\n// 数字校验（10-30位，不能以0开头）\nconst reg = /^[1-9]\\d{9,29}$/;\n```\n\n```typescript\n// IPv4地址校验（0-255.0-255.0-255.0-255）\nconst reg = /(?=(\\b|\\D))(((\\d{1,2})|(1\\d{1,2})|(2[0-4]\\d)|(25[0-5]))\\.){3}((\\d{1,2})|(1\\d{1,2})|(2[0-4]\\d)|(25[0-5]))(?=(\\b|\\D))/;\n```\n\n```typescript\n// MAC地址校验（支持xx-xx-xx-xx-xx-xx或xx:xx:xx:xx:xx:xx格式）\nconst reg = /^[A-Fa-f0-9]{2}(-[A-Fa-f0-9]{2}){5}$|^[A-Fa-f0-9]{2}(:[A-Fa-f0-9]{2}){5}$/;\n```\n\n```typescript\n// 身份证号码校验（18位）\nconst reg = /^[1-9]\\d{5}(18|19|([23]\\d))\\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]$/;\n```\n\n```typescript\n// 电子邮箱校验\nconst reg = /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/;\n```\n\n```typescript\n// 8位数字校验\nconst reg = /^[0-9]{8}$/;\n```\n\n```typescript\n// 正整数校验（不能以0开头）\nconst reg = /^[1-9]{1,}[\\d]*$/\n```","src/content/blog/scattered-notes/regex.md","d6ba235c14a84e47",{"html":375,"metadata":376},"\u003Ch1 id=\"正则\">正则\u003Ca href=\"#正则\" class=\"heading-anchor-link\" aria-label=\"Link to 正则\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 允许中文、英文字母、数字、空格和特殊字符，长度1-32位\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> reg\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">^\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[\\u4e00-\\u9fa5a-zA-Z\\d\\s_~!@#$%^&#x26;*()[\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold\">\\]\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">{}+-=.,;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold\">\\\\\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">|\"']\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{1,32}$\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">/\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 只允许中文和英文字母，长度1-64位\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> reg\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">^\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[\\u4e00-\\u9fa5a-zA-Z]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{1,64}$\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">/\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 允许任意字符，长度1-128位\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> reg\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">^\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">.\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{1,128}$\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">/\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// URL地址校验（支持http、https、ftp协议）\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> reg\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">^\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(https\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">ftp):\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold\">\\/\\/\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[a-zA-Z0-9.-]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[a-zA-Z0-9.&#x26;%$-]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">*\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">@)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">*\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">((25\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-5]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">2\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-4][0-9]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">1\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-9]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{2}|\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[1-9][0-9]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold\">\\.\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(25\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-5]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">2\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-4][0-9]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">1\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-9]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{2}|\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[1-9]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-9]\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">))\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{3}|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[a-zA-Z0-9-]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold\">\\.\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">*\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[a-zA-Z0-9-]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold\">\\.\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[a-zA-Z]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{2,}\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">))(:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-9]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">*\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold\">\\/\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">$|\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[a-zA-Z0-9.,?'\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold\">\\\\\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">+&#x26;%$#=~_-]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">))\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">*$\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">/\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 密码校验：6-18位，不能是纯数字、纯字母或纯特殊字符\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> reg\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(?!\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">^\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">\\d\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+|\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[a-zA-Z]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+|\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[_~!@#$%^&#x26;*()[\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold\">\\]\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">{}+-=.,;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold\">\\\\\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">|\"']\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">$\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">^\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[\\w_~!@#$%^&#x26;*()[\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold\">\\]\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">{}+-=.,;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold\">\\\\\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">|\"']\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{6,18}$\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">/\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 允许任意字符，长度1-255位\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> reg\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">^\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">.\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{1,255}$\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">/\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 手机号码校验（11位，以1开头）\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> reg\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">^\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">1\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-9]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{10}$\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">/\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 固定电话校验（可选3-4位区号-7-8位号码）\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> reg\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">^\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-9]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{3,4}\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">-)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-9]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{7,8}$\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">/\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 数字校验（10-30位，不能以0开头）\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> reg\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">^\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[1-9]\\d\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{9,29}$\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">/\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// IPv4地址校验（0-255.0-255.0-255.0-255）\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> reg\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(?=(\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">\\b|\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">\\D\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">))(((\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">\\d\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{1,2}\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(1\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">\\d\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{1,2}\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(2\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-4]\\d\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(25\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-5]\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">))\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold\">\\.\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{3}\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">((\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">\\d\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{1,2}\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(1\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">\\d\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{1,2}\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(2\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-4]\\d\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(25\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-5]\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">))(?=(\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">\\b|\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">\\D\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">))\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">/\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// MAC地址校验（支持xx-xx-xx-xx-xx-xx或xx:xx:xx:xx:xx:xx格式）\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> reg\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">^\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[A-Fa-f0-9]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{2}\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(-\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[A-Fa-f0-9]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{2}\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{5}$|^\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[A-Fa-f0-9]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{2}\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[A-Fa-f0-9]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{2}\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{5}$\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">/\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 身份证号码校验（18位）\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> reg\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">^\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[1-9]\\d\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{5}\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(18\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">19\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[23]\\d\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">))\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">\\d\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{2}\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">((0\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[1-9]\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(10\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">11\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">12))((\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-2][1-9]\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">10\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">20\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">30\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">31)\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">\\d\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{3}\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-9Xx]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">$\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">/\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 电子邮箱校验\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> reg\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">^\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">\\w\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[-+.]\\w\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">*\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">@\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">\\w\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[-.]\\w\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">*\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold\">\\.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">\\w\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[-.]\\w\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">*$\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">/\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 8位数字校验\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> reg\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">^\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[0-9]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{8}$\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">/\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 正整数校验（不能以0开头）\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> reg\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">^\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[1-9]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{1,}\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">[\\d]\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">*$\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">/\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>",{"headings":377,"localImagePaths":380,"remoteImagePaths":381,"frontmatter":382,"imagePaths":384},[378],{"depth":30,"slug":379,"text":379},"正则",[],[],{"title":367,"description":369,"draft":18,"published":383,"minutes":30},["Date","2025-08-09T00:00:00.000Z"],[],"work-docs/viewshine/bi-map",{"id":385,"data":387,"body":392,"filePath":393,"digest":394,"rendered":395},{"title":388,"published":389,"description":390,"tags":391,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"BI地图组件开发",["Date","2025-08-09T00:00:00.000Z"],"BI系统中地图组件的状态码映射、数据处理和可视化实现方案",[],"# BiMap 双向映射工具类\n\n## 介绍\n\nBiMap 是一个双向映射数据结构，支持 label 和 value 之间的双向查找。它内部维护两个 Map，确保 label 和 value 的一一对应关系，提供了高效的双向查询能力。\n\n## 特性\n\n- **双向映射**: 支持通过 label 查找 value，也支持通过 value 查找 label\n- **类型安全**: 使用 TypeScript 提供完整的类型支持\n- **高性能**: 基于原生 Map 实现，查找时间复杂度为 O(1)\n- **缓存优化**: BiMapFactory 提供基于 WeakMap 的缓存机制\n- **灵活的数据类型**: value 支持 string、number、boolean 类型\n\n## 类型定义\n\n```typescript\ntype ValueType = string | number | boolean;\ntype Item = { label: string; value: ValueType };\n```\n\n## BiMap 类\n\n### 构造函数\n\n```typescript\nconstructor(items: Item[] = [])\n```\n\n创建一个新的 BiMap 实例，可选择性地传入初始数据。\n\n**参数:**\n- `items`: 初始化的映射项数组，默认为空数组\n\n**示例:**\n```typescript\nconst biMap = new BiMap([\n  { label: '启用', value: 1 },\n  { label: '禁用', value: 0 }\n]);\n```\n\n### 添加方法\n\n#### add(item: Item)\n添加单个映射关系。\n\n**参数:**\n- `item`: 包含 label 和 value 的对象\n\n**示例:**\n```typescript\nbiMap.add({ label: '待审核', value: 'pending' });\n```\n\n#### addAll(items: Item[])\n批量添加映射关系。\n\n**参数:**\n- `items`: 映射项数组\n\n**示例:**\n```typescript\nbiMap.addAll([\n  { label: '草稿', value: 'draft' },\n  { label: '已发布', value: 'published' }\n]);\n```\n\n### 查询方法\n\n#### getLabel(value: ValueType): string | undefined\n根据 value 获取对应的 label。\n\n**参数:**\n- `value`: 要查询的值\n\n**返回值:** 对应的 label，如果不存在则返回 undefined\n\n**示例:**\n```typescript\nconst label = biMap.getLabel(1); // '启用'\n```\n\n#### getValue(label: string): ValueType | undefined\n根据 label 获取对应的 value。\n\n**参数:**\n- `label`: 要查询的标签\n\n**返回值:** 对应的 value，如果不存在则返回 undefined\n\n**示例:**\n```typescript\nconst value = biMap.getValue('启用'); // 1\n```\n\n#### hasValue(value: ValueType): boolean\n检查是否存在指定的 value。\n\n**示例:**\n```typescript\nif (biMap.hasValue(1)) {\n  console.log('存在该值');\n}\n```\n\n#### hasLabel(label: string): boolean\n检查是否存在指定的 label。\n\n**示例:**\n```typescript\nif (biMap.hasLabel('启用')) {\n  console.log('存在该标签');\n}\n```\n\n### 删除方法\n\n#### removeByValue(value: ValueType): boolean\n根据 value 删除映射关系。\n\n**参数:**\n- `value`: 要删除的值\n\n**返回值:** 是否成功删除\n\n**示例:**\n```typescript\nconst success = biMap.removeByValue(1); // true\n```\n\n#### removeByLabel(label: string): boolean\n根据 label 删除映射关系。\n\n**参数:**\n- `label`: 要删除的标签\n\n**返回值:** 是否成功删除\n\n**示例:**\n```typescript\nconst success = biMap.removeByLabel('启用'); // true\n```\n\n#### clear()\n清空所有映射关系。\n\n**示例:**\n```typescript\nbiMap.clear();\n```\n\n### 工具方法\n\n#### entries(): [ValueType, string][]\n获取所有 value→label 映射的数组。\n\n**返回值:** [value, label] 元组数组\n\n**示例:**\n```typescript\nconst entries = biMap.entries(); // [[1, '启用'], [0, '禁用']]\n```\n\n#### toArray(): Item[]\n将 BiMap 转换为 Item 数组。\n\n**返回值:** Item 对象数组\n\n**示例:**\n```typescript\nconst items = biMap.toArray();\n// [{ label: '启用', value: 1 }, { label: '禁用', value: 0 }]\n```\n\n## BiMapFactory 工厂类\n\nBiMapFactory 提供了创建和转换 BiMap 的静态方法，并包含缓存优化。\n\n### fromArray(items: Item[]): BiMap\n基于数组创建 BiMap，支持缓存复用。\n\n**参数:**\n- `items`: Item 数组\n\n**返回值:** BiMap 实例\n\n**特性:**\n- 使用 WeakMap 缓存，相同的数组引用会返回缓存的 BiMap 实例\n- 提高性能，避免重复创建\n\n**示例:**\n```typescript\nconst statusOptions = [\n  { label: '启用', value: 1 },\n  { label: '禁用', value: 0 }\n];\n\nconst biMap1 = BiMapFactory.fromArray(statusOptions);\nconst biMap2 = BiMapFactory.fromArray(statusOptions); // 返回缓存的实例\nconsole.log(biMap1 === biMap2); // true\n```\n\n### toBiMap(items: Item[]): BiMap\n一次性创建 BiMap，不使用缓存。\n\n**参数:**\n- `items`: Item 数组\n\n**返回值:** 新的 BiMap 实例\n\n**示例:**\n```typescript\nconst biMap = BiMapFactory.toBiMap(statusOptions);\n```\n\n### toValueMap(items: Item[]): Map\u003CValueType, string>\n将 Item 数组转换为 value→label 的 Map。\n\n**参数:**\n- `items`: Item 数组\n\n**返回值:** Map\u003CValueType, string>\n\n**示例:**\n```typescript\nconst valueMap = BiMapFactory.toValueMap(statusOptions);\nconsole.log(valueMap.get(1)); // '启用'\n```\n\n### toLabelMap(items: Item[]): Map\u003Cstring, ValueType>\n将 Item 数组转换为 label→value 的 Map。\n\n**参数:**\n- `items`: Item 数组\n\n**返回值:** Map\u003Cstring, ValueType>\n\n**示例:**\n```typescript\nconst labelMap = BiMapFactory.toLabelMap(statusOptions);\nconsole.log(labelMap.get('启用')); // 1\n```\n\n## 使用场景\n\n### 1. 状态码映射\n```typescript\nconst statusBiMap = new BiMap([\n  { label: '待审核', value: 'pending' },\n  { label: '已通过', value: 'approved' },\n  { label: '已拒绝', value: 'rejected' }\n]);\n\n// API 返回状态码，需要显示中文\nconst displayStatus = statusBiMap.getLabel('pending'); // '待审核'\n\n// 用户选择中文状态，需要提交状态码\nconst statusCode = statusBiMap.getValue('已通过'); // 'approved'\n```\n\n### 2. 下拉选项处理\n```typescript\nconst departmentOptions = [\n  { label: '技术部', value: 'tech' },\n  { label: '产品部', value: 'product' },\n  { label: '运营部', value: 'operation' }\n];\n\nconst departmentBiMap = BiMapFactory.fromArray(departmentOptions);\n\n// 表单提交时获取 value\nconst selectedValue = departmentBiMap.getValue('技术部'); // 'tech'\n\n// 数据回显时获取 label\nconst displayLabel = departmentBiMap.getLabel('tech'); // '技术部'\n```\n\n### 3. 枚举值转换\n```typescript\nconst priorityBiMap = new BiMap([\n  { label: '低', value: 1 },\n  { label: '中', value: 2 },\n  { label: '高', value: 3 },\n  { label: '紧急', value: 4 }\n]);\n\n// 根据优先级数值显示文本\nconst getPriorityText = (level: number) => {\n  return priorityBiMap.getLabel(level) || '未知';\n};\n\n// 根据优先级文本获取数值\nconst getPriorityLevel = (text: string) => {\n  return priorityBiMap.getValue(text) as number;\n};\n```\n\n## 最佳实践\n\n### 1. 使用工厂方法创建\n推荐使用 `BiMapFactory.fromArray()` 来创建 BiMap，可以享受缓存带来的性能优势：\n\n```typescript\n// 推荐\nconst biMap = BiMapFactory.fromArray(options);\n\n// 不推荐\nconst biMap = new BiMap(options);\n```\n\n### 2. 类型安全使用\n配合 TypeScript 的类型系统，确保类型安全：\n\n```typescript\ninterface StatusOption {\n  label: string;\n  value: 'active' | 'inactive' | 'pending';\n}\n\nconst statusOptions: StatusOption[] = [\n  { label: '激活', value: 'active' },\n  { label: '禁用', value: 'inactive' },\n  { label: '待处理', value: 'pending' }\n];\n\nconst statusBiMap = BiMapFactory.fromArray(statusOptions);\n```\n\n### 3. 空值检查\n查询方法可能返回 undefined，使用时应进行空值检查：\n\n```typescript\nconst label = biMap.getLabel(value);\nif (label) {\n  console.log(`标签: ${label}`);\n} else {\n  console.log('未找到对应标签');\n}\n\n// 或使用默认值\nconst displayLabel = biMap.getLabel(value) || '未知';\n```\n\n### 4. 数据一致性\n确保 label 和 value 的唯一性，避免数据覆盖：\n\n```typescript\n// 错误示例：重复的 value 会导致前面的映射被覆盖\nconst wrongData = [\n  { label: '是', value: 1 },\n  { label: '对', value: 1 }  // 会覆盖前面的映射\n];\n\n// 正确示例：确保 value 唯一\nconst correctData = [\n  { label: '是', value: 1 },\n  { label: '对', value: 2 }\n];\n```\n\n## 性能特性\n\n- **查询复杂度**: O(1) - 基于 Map 的快速查找\n- **内存优化**: 使用 WeakMap 缓存，避免内存泄漏\n- **私有字段**: 使用 `#` 私有字段，确保数据封装性","src/content/blog/work-docs/viewshine/bi-map.md","7ea7066a1644c71e",{"html":396,"metadata":397},"\u003Ch1 id=\"bimap-双向映射工具类\">BiMap 双向映射工具类\u003Ca href=\"#bimap-双向映射工具类\" class=\"heading-anchor-link\" aria-label=\"Link to BiMap 双向映射工具类\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>\n\u003Ch2 id=\"介绍\">介绍\u003Ca href=\"#介绍\" class=\"heading-anchor-link\" aria-label=\"Link to 介绍\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cp>BiMap 是一个双向映射数据结构，支持 label 和 value 之间的双向查找。它内部维护两个 Map，确保 label 和 value 的一一对应关系，提供了高效的双向查询能力。\u003C/p>\n\u003Ch2 id=\"特性\">特性\u003Ca href=\"#特性\" class=\"heading-anchor-link\" aria-label=\"Link to 特性\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Cstrong>双向映射\u003C/strong>: 支持通过 label 查找 value，也支持通过 value 查找 label\u003C/li>\n\u003Cli>\u003Cstrong>类型安全\u003C/strong>: 使用 TypeScript 提供完整的类型支持\u003C/li>\n\u003Cli>\u003Cstrong>高性能\u003C/strong>: 基于原生 Map 实现，查找时间复杂度为 O(1)\u003C/li>\n\u003Cli>\u003Cstrong>缓存优化\u003C/strong>: BiMapFactory 提供基于 WeakMap 的缓存机制\u003C/li>\n\u003Cli>\u003Cstrong>灵活的数据类型\u003C/strong>: value 支持 string、number、boolean 类型\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"类型定义\">类型定义\u003Ca href=\"#类型定义\" class=\"heading-anchor-link\" aria-label=\"Link to 类型定义\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">type\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ValueType\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> |\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> number\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> |\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> boolean\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">type\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Item\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">label\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">; \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">value\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ValueType\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> };\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"bimap-类\">BiMap 类\u003Ca href=\"#bimap-类\" class=\"heading-anchor-link\" aria-label=\"Link to BiMap 类\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"构造函数\">构造函数\u003Ca href=\"#构造函数\" class=\"heading-anchor-link\" aria-label=\"Link to 构造函数\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">constructor\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(items: Item[] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [])\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cp>创建一个新的 BiMap 实例，可选择性地传入初始数据。\u003C/p>\n\u003Cp>\u003Cstrong>参数:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ccode>items\u003C/code>: 初始化的映射项数组，默认为空数组\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>示例:\u003C/strong>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> biMap\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> BiMap\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">([\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'启用'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'禁用'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]);\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"添加方法\">添加方法\u003Ca href=\"#添加方法\" class=\"heading-anchor-link\" aria-label=\"Link to 添加方法\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Ch4 id=\"additem-item\">add(item: Item)\u003Ca href=\"#additem-item\" class=\"heading-anchor-link\" aria-label=\"Link to add(item: Item)\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cp>添加单个映射关系。\u003C/p>\n\u003Cp>\u003Cstrong>参数:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ccode>item\u003C/code>: 包含 label 和 value 的对象\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>示例:\u003C/strong>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">biMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">add\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({ label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'待审核'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'pending'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> });\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch4 id=\"addallitems-item\">addAll(items: Item[])\u003Ca href=\"#addallitems-item\" class=\"heading-anchor-link\" aria-label=\"Link to addAll(items: Item[])\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cp>批量添加映射关系。\u003C/p>\n\u003Cp>\u003Cstrong>参数:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ccode>items\u003C/code>: 映射项数组\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>示例:\u003C/strong>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">biMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">addAll\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">([\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'草稿'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'draft'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'已发布'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'published'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]);\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"查询方法\">查询方法\u003Ca href=\"#查询方法\" class=\"heading-anchor-link\" aria-label=\"Link to 查询方法\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Ch4 id=\"getlabelvalue-valuetype-string--undefined\">getLabel(value: ValueType): string | undefined\u003Ca href=\"#getlabelvalue-valuetype-string--undefined\" class=\"heading-anchor-link\" aria-label=\"Link to getLabel(value: ValueType): string | undefined\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cp>根据 value 获取对应的 label。\u003C/p>\n\u003Cp>\u003Cstrong>参数:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ccode>value\u003C/code>: 要查询的值\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>返回值:\u003C/strong> 对应的 label，如果不存在则返回 undefined\u003C/p>\n\u003Cp>\u003Cstrong>示例:\u003C/strong>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> label\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> biMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">getLabel\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">); \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// '启用'\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch4 id=\"getvaluelabel-string-valuetype--undefined\">getValue(label: string): ValueType | undefined\u003Ca href=\"#getvaluelabel-string-valuetype--undefined\" class=\"heading-anchor-link\" aria-label=\"Link to getValue(label: string): ValueType | undefined\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cp>根据 label 获取对应的 value。\u003C/p>\n\u003Cp>\u003Cstrong>参数:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ccode>label\u003C/code>: 要查询的标签\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>返回值:\u003C/strong> 对应的 value，如果不存在则返回 undefined\u003C/p>\n\u003Cp>\u003Cstrong>示例:\u003C/strong>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> value\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> biMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">getValue\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'启用'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">); \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 1\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch4 id=\"hasvaluevalue-valuetype-boolean\">hasValue(value: ValueType): boolean\u003Ca href=\"#hasvaluevalue-valuetype-boolean\" class=\"heading-anchor-link\" aria-label=\"Link to hasValue(value: ValueType): boolean\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cp>检查是否存在指定的 value。\u003C/p>\n\u003Cp>\u003Cstrong>示例:\u003C/strong>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (biMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">hasValue\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'存在该值'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch4 id=\"haslabellabel-string-boolean\">hasLabel(label: string): boolean\u003Ca href=\"#haslabellabel-string-boolean\" class=\"heading-anchor-link\" aria-label=\"Link to hasLabel(label: string): boolean\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cp>检查是否存在指定的 label。\u003C/p>\n\u003Cp>\u003Cstrong>示例:\u003C/strong>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (biMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">hasLabel\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'启用'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'存在该标签'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"删除方法\">删除方法\u003Ca href=\"#删除方法\" class=\"heading-anchor-link\" aria-label=\"Link to 删除方法\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Ch4 id=\"removebyvaluevalue-valuetype-boolean\">removeByValue(value: ValueType): boolean\u003Ca href=\"#removebyvaluevalue-valuetype-boolean\" class=\"heading-anchor-link\" aria-label=\"Link to removeByValue(value: ValueType): boolean\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cp>根据 value 删除映射关系。\u003C/p>\n\u003Cp>\u003Cstrong>参数:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ccode>value\u003C/code>: 要删除的值\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>返回值:\u003C/strong> 是否成功删除\u003C/p>\n\u003Cp>\u003Cstrong>示例:\u003C/strong>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> success\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> biMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">removeByValue\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">); \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// true\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch4 id=\"removebylabellabel-string-boolean\">removeByLabel(label: string): boolean\u003Ca href=\"#removebylabellabel-string-boolean\" class=\"heading-anchor-link\" aria-label=\"Link to removeByLabel(label: string): boolean\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cp>根据 label 删除映射关系。\u003C/p>\n\u003Cp>\u003Cstrong>参数:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ccode>label\u003C/code>: 要删除的标签\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>返回值:\u003C/strong> 是否成功删除\u003C/p>\n\u003Cp>\u003Cstrong>示例:\u003C/strong>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> success\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> biMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">removeByLabel\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'启用'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">); \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// true\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch4 id=\"clear\">clear()\u003Ca href=\"#clear\" class=\"heading-anchor-link\" aria-label=\"Link to clear()\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cp>清空所有映射关系。\u003C/p>\n\u003Cp>\u003Cstrong>示例:\u003C/strong>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">biMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">clear\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"工具方法\">工具方法\u003Ca href=\"#工具方法\" class=\"heading-anchor-link\" aria-label=\"Link to 工具方法\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Ch4 id=\"entries-valuetype-string\">entries(): [ValueType, string][]\u003Ca href=\"#entries-valuetype-string\" class=\"heading-anchor-link\" aria-label=\"Link to entries(): [ValueType, string][]\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cp>获取所有 value→label 映射的数组。\u003C/p>\n\u003Cp>\u003Cstrong>返回值:\u003C/strong> [value, label] 元组数组\u003C/p>\n\u003Cp>\u003Cstrong>示例:\u003C/strong>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> entries\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> biMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">entries\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(); \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// [[1, '启用'], [0, '禁用']]\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch4 id=\"toarray-item\">toArray(): Item[]\u003Ca href=\"#toarray-item\" class=\"heading-anchor-link\" aria-label=\"Link to toArray(): Item[]\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cp>将 BiMap 转换为 Item 数组。\u003C/p>\n\u003Cp>\u003Cstrong>返回值:\u003C/strong> Item 对象数组\u003C/p>\n\u003Cp>\u003Cstrong>示例:\u003C/strong>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> items\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> biMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">toArray\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// [{ label: '启用', value: 1 }, { label: '禁用', value: 0 }]\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"bimapfactory-工厂类\">BiMapFactory 工厂类\u003Ca href=\"#bimapfactory-工厂类\" class=\"heading-anchor-link\" aria-label=\"Link to BiMapFactory 工厂类\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cp>BiMapFactory 提供了创建和转换 BiMap 的静态方法，并包含缓存优化。\u003C/p>\n\u003Ch3 id=\"fromarrayitems-item-bimap\">fromArray(items: Item[]): BiMap\u003Ca href=\"#fromarrayitems-item-bimap\" class=\"heading-anchor-link\" aria-label=\"Link to fromArray(items: Item[]): BiMap\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>基于数组创建 BiMap，支持缓存复用。\u003C/p>\n\u003Cp>\u003Cstrong>参数:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ccode>items\u003C/code>: Item 数组\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>返回值:\u003C/strong> BiMap 实例\u003C/p>\n\u003Cp>\u003Cstrong>特性:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>使用 WeakMap 缓存，相同的数组引用会返回缓存的 BiMap 实例\u003C/li>\n\u003Cli>提高性能，避免重复创建\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>示例:\u003C/strong>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> statusOptions\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'启用'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'禁用'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> biMap1\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> BiMapFactory.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">fromArray\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(statusOptions);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> biMap2\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> BiMapFactory.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">fromArray\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(statusOptions); \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 返回缓存的实例\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(biMap1 \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> biMap2); \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// true\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"tobimapitems-item-bimap\">toBiMap(items: Item[]): BiMap\u003Ca href=\"#tobimapitems-item-bimap\" class=\"heading-anchor-link\" aria-label=\"Link to toBiMap(items: Item[]): BiMap\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>一次性创建 BiMap，不使用缓存。\u003C/p>\n\u003Cp>\u003Cstrong>参数:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ccode>items\u003C/code>: Item 数组\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>返回值:\u003C/strong> 新的 BiMap 实例\u003C/p>\n\u003Cp>\u003Cstrong>示例:\u003C/strong>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> biMap\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> BiMapFactory.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">toBiMap\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(statusOptions);\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"tovaluemapitems-item-mapvaluetype-string\">toValueMap(items: Item[]): Map&#x3C;ValueType, string>\u003Ca href=\"#tovaluemapitems-item-mapvaluetype-string\" class=\"heading-anchor-link\" aria-label=\"Link to toValueMap(items: Item[]): Map\u003CValueType, string>\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>将 Item 数组转换为 value→label 的 Map。\u003C/p>\n\u003Cp>\u003Cstrong>参数:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ccode>items\u003C/code>: Item 数组\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>返回值:\u003C/strong> Map&#x3C;ValueType, string>\u003C/p>\n\u003Cp>\u003Cstrong>示例:\u003C/strong>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> valueMap\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> BiMapFactory.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">toValueMap\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(statusOptions);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(valueMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">get\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)); \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// '启用'\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"tolabelmapitems-item-mapstring-valuetype\">toLabelMap(items: Item[]): Map&#x3C;string, ValueType>\u003Ca href=\"#tolabelmapitems-item-mapstring-valuetype\" class=\"heading-anchor-link\" aria-label=\"Link to toLabelMap(items: Item[]): Map\u003Cstring, ValueType>\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>将 Item 数组转换为 label→value 的 Map。\u003C/p>\n\u003Cp>\u003Cstrong>参数:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ccode>items\u003C/code>: Item 数组\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>返回值:\u003C/strong> Map&#x3C;string, ValueType>\u003C/p>\n\u003Cp>\u003Cstrong>示例:\u003C/strong>\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> labelMap\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> BiMapFactory.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">toLabelMap\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(statusOptions);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(labelMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">get\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'启用'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)); \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 1\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"使用场景\">使用场景\u003Ca href=\"#使用场景\" class=\"heading-anchor-link\" aria-label=\"Link to 使用场景\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"1-状态码映射\">1. 状态码映射\u003Ca href=\"#1-状态码映射\" class=\"heading-anchor-link\" aria-label=\"Link to 1. 状态码映射\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> statusBiMap\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> BiMap\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">([\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'待审核'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'pending'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'已通过'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'approved'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'已拒绝'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'rejected'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// API 返回状态码，需要显示中文\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> displayStatus\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> statusBiMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">getLabel\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'pending'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">); \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// '待审核'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 用户选择中文状态，需要提交状态码\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> statusCode\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> statusBiMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">getValue\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'已通过'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">); \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 'approved'\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"2-下拉选项处理\">2. 下拉选项处理\u003Ca href=\"#2-下拉选项处理\" class=\"heading-anchor-link\" aria-label=\"Link to 2. 下拉选项处理\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> departmentOptions\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'技术部'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'tech'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'产品部'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'product'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'运营部'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'operation'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> departmentBiMap\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> BiMapFactory.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">fromArray\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(departmentOptions);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 表单提交时获取 value\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> selectedValue\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> departmentBiMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">getValue\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'技术部'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">); \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 'tech'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 数据回显时获取 label\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> displayLabel\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> departmentBiMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">getLabel\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'tech'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">); \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// '技术部'\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"3-枚举值转换\">3. 枚举值转换\u003Ca href=\"#3-枚举值转换\" class=\"heading-anchor-link\" aria-label=\"Link to 3. 枚举值转换\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> priorityBiMap\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> BiMap\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">([\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'低'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'中'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">2\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'高'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">3\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'紧急'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">4\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 根据优先级数值显示文本\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> getPriorityText\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">level\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> number\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> priorityBiMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">getLabel\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(level) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">||\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '未知'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 根据优先级文本获取数值\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> getPriorityLevel\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">text\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> priorityBiMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">getValue\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(text) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">as\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> number\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"最佳实践\">最佳实践\u003Ca href=\"#最佳实践\" class=\"heading-anchor-link\" aria-label=\"Link to 最佳实践\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"1-使用工厂方法创建\">1. 使用工厂方法创建\u003Ca href=\"#1-使用工厂方法创建\" class=\"heading-anchor-link\" aria-label=\"Link to 1. 使用工厂方法创建\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>推荐使用 \u003Ccode>BiMapFactory.fromArray()\u003C/code> 来创建 BiMap，可以享受缓存带来的性能优势：\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 推荐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> biMap\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> BiMapFactory.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">fromArray\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(options);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 不推荐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> biMap\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> BiMap\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(options);\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"2-类型安全使用\">2. 类型安全使用\u003Ca href=\"#2-类型安全使用\" class=\"heading-anchor-link\" aria-label=\"Link to 2. 类型安全使用\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>配合 TypeScript 的类型系统，确保类型安全：\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">interface\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> StatusOption\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">  label\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">  value\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'active'\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> |\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'inactive'\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> |\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'pending'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> statusOptions\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> StatusOption\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">[] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'激活'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'active'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'禁用'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'inactive'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'待处理'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'pending'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> statusBiMap\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> BiMapFactory.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">fromArray\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(statusOptions);\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"3-空值检查\">3. 空值检查\u003Ca href=\"#3-空值检查\" class=\"heading-anchor-link\" aria-label=\"Link to 3. 空值检查\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>查询方法可能返回 undefined，使用时应进行空值检查：\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> label\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> biMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">getLabel\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(value);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (label) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">`标签: ${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">label\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}`\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">} \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">else\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'未找到对应标签'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 或使用默认值\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> displayLabel\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> biMap.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">getLabel\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(value) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">||\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '未知'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"4-数据一致性\">4. 数据一致性\u003Ca href=\"#4-数据一致性\" class=\"heading-anchor-link\" aria-label=\"Link to 4. 数据一致性\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>确保 label 和 value 的唯一性，避免数据覆盖：\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 错误示例：重复的 value 会导致前面的映射被覆盖\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> wrongData\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'是'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'对'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }  \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 会覆盖前面的映射\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 正确示例：确保 value 唯一\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> correctData\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'是'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { label: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'对'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, value: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">2\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"性能特性\">性能特性\u003Ca href=\"#性能特性\" class=\"heading-anchor-link\" aria-label=\"Link to 性能特性\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Cstrong>查询复杂度\u003C/strong>: O(1) - 基于 Map 的快速查找\u003C/li>\n\u003Cli>\u003Cstrong>内存优化\u003C/strong>: 使用 WeakMap 缓存，避免内存泄漏\u003C/li>\n\u003Cli>\u003Cstrong>私有字段\u003C/strong>: 使用 \u003Ccode>#\u003C/code> 私有字段，确保数据封装性\u003C/li>\n\u003C/ul>",{"headings":398,"localImagePaths":496,"remoteImagePaths":497,"frontmatter":498,"imagePaths":501},[399,402,404,406,408,411,413,415,418,421,423,426,429,432,435,437,440,443,446,448,451,454,457,460,463,466,469,471,474,477,480,482,485,488,491,494],{"depth":30,"slug":400,"text":401},"bimap-双向映射工具类","BiMap 双向映射工具类",{"depth":54,"slug":403,"text":403},"介绍",{"depth":54,"slug":405,"text":405},"特性",{"depth":54,"slug":407,"text":407},"类型定义",{"depth":54,"slug":409,"text":410},"bimap-类","BiMap 类",{"depth":58,"slug":412,"text":412},"构造函数",{"depth":58,"slug":414,"text":414},"添加方法",{"depth":283,"slug":416,"text":417},"additem-item","add(item: Item)",{"depth":283,"slug":419,"text":420},"addallitems-item","addAll(items: Item[])",{"depth":58,"slug":422,"text":422},"查询方法",{"depth":283,"slug":424,"text":425},"getlabelvalue-valuetype-string--undefined","getLabel(value: ValueType): string | undefined",{"depth":283,"slug":427,"text":428},"getvaluelabel-string-valuetype--undefined","getValue(label: string): ValueType | undefined",{"depth":283,"slug":430,"text":431},"hasvaluevalue-valuetype-boolean","hasValue(value: ValueType): boolean",{"depth":283,"slug":433,"text":434},"haslabellabel-string-boolean","hasLabel(label: string): boolean",{"depth":58,"slug":436,"text":436},"删除方法",{"depth":283,"slug":438,"text":439},"removebyvaluevalue-valuetype-boolean","removeByValue(value: ValueType): boolean",{"depth":283,"slug":441,"text":442},"removebylabellabel-string-boolean","removeByLabel(label: string): boolean",{"depth":283,"slug":444,"text":445},"clear","clear()",{"depth":58,"slug":447,"text":447},"工具方法",{"depth":283,"slug":449,"text":450},"entries-valuetype-string","entries(): [ValueType, string][]",{"depth":283,"slug":452,"text":453},"toarray-item","toArray(): Item[]",{"depth":54,"slug":455,"text":456},"bimapfactory-工厂类","BiMapFactory 工厂类",{"depth":58,"slug":458,"text":459},"fromarrayitems-item-bimap","fromArray(items: Item[]): BiMap",{"depth":58,"slug":461,"text":462},"tobimapitems-item-bimap","toBiMap(items: Item[]): BiMap",{"depth":58,"slug":464,"text":465},"tovaluemapitems-item-mapvaluetype-string","toValueMap(items: Item[]): Map\u003CValueType, string>",{"depth":58,"slug":467,"text":468},"tolabelmapitems-item-mapstring-valuetype","toLabelMap(items: Item[]): Map\u003Cstring, ValueType>",{"depth":54,"slug":470,"text":470},"使用场景",{"depth":58,"slug":472,"text":473},"1-状态码映射","1. 状态码映射",{"depth":58,"slug":475,"text":476},"2-下拉选项处理","2. 下拉选项处理",{"depth":58,"slug":478,"text":479},"3-枚举值转换","3. 枚举值转换",{"depth":54,"slug":481,"text":481},"最佳实践",{"depth":58,"slug":483,"text":484},"1-使用工厂方法创建","1. 使用工厂方法创建",{"depth":58,"slug":486,"text":487},"2-类型安全使用","2. 类型安全使用",{"depth":58,"slug":489,"text":490},"3-空值检查","3. 空值检查",{"depth":58,"slug":492,"text":493},"4-数据一致性","4. 数据一致性",{"depth":54,"slug":495,"text":495},"性能特性",[],[],{"title":388,"description":390,"draft":18,"published":499,"minutes":500},["Date","2025-08-09T00:00:00.000Z"],7,[],"scattered-notes/yahoo-rules",{"id":502,"data":504,"body":509,"filePath":510,"digest":511,"rendered":512},{"title":505,"published":506,"description":507,"tags":508,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"雅虎军规 - 前端性能优化指南",["Date","2025-08-09T00:00:00.000Z"],"雅虎前端性能优化14条军规，包括减少HTTP请求、使用CDN、启用压缩等经典优化策略",[],"# 雅虎军规\n\n### 1. 尽可能减少HTTP请求\n\n### 2. 使用CDN（内容分发网络）\n\n### 3. 添加 expire/cache-control头\n\n- expire: 如果开启 expire，发起请求时，服务器返回资源的同时会返回 expire http\n  头，其内容是资源过期时间。当前时间没有超过过期时间时，不发送http请求，直接使用本地缓存的资源。\n-\ncache-control: [Cache-Control](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control \"Cache-Control\")\n\\\u003Ca name=\"HxoR0\">\\\u003C/a>\n\n### 4. 启用Gzip压缩\n\n### 5. CSS 顶部加载，JavaScript 底部加载\n\n### 6. 避免在CSS中使用表达式\n\n### 7. 使用外部引用的 JavaScript CSS 文件\n\n### 8. 减少 DNS 查询\n\n### 9. 压缩 JavaScript CSS 文件\n\n### 10. 避免重定向（301/302）\n\n- [301重定向](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status/301 \"301重定向\") - 永久的\n- [302重定向](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status/302 \"302重定向\") - 临时的\n\n### 11. 避免重复引用\n\n### 12. 配置实体标签（Entity Tag）\n\n使用特殊的字符标识资源版本\n\n### 13. Ajax 缓存","src/content/blog/scattered-notes/yahoo-rules.md","b142983d44112a94",{"html":513,"metadata":514},"\u003Ch1 id=\"雅虎军规\">雅虎军规\u003Ca href=\"#雅虎军规\" class=\"heading-anchor-link\" aria-label=\"Link to 雅虎军规\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>\n\u003Ch3 id=\"1-尽可能减少http请求\">1. 尽可能减少HTTP请求\u003Ca href=\"#1-尽可能减少http请求\" class=\"heading-anchor-link\" aria-label=\"Link to 1. 尽可能减少HTTP请求\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Ch3 id=\"2-使用cdn内容分发网络\">2. 使用CDN（内容分发网络）\u003Ca href=\"#2-使用cdn内容分发网络\" class=\"heading-anchor-link\" aria-label=\"Link to 2. 使用CDN（内容分发网络）\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Ch3 id=\"3-添加-expirecache-control头\">3. 添加 expire/cache-control头\u003Ca href=\"#3-添加-expirecache-control头\" class=\"heading-anchor-link\" aria-label=\"Link to 3. 添加 expire/cache-control头\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cul>\n\u003Cli>expire: 如果开启 expire，发起请求时，服务器返回资源的同时会返回 expire http\n头，其内容是资源过期时间。当前时间没有超过过期时间时，不发送http请求，直接使用本地缓存的资源。\u003C/li>\n\u003Cli>\u003C/li>\n\u003C/ul>\n\u003Cp>cache-control: \u003Ca href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control\" title=\"Cache-Control\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">Cache-Control\u003C/a>\n&#x3C;a name=“HxoR0”>&#x3C;/a>\u003C/p>\n\u003Ch3 id=\"4-启用gzip压缩\">4. 启用Gzip压缩\u003Ca href=\"#4-启用gzip压缩\" class=\"heading-anchor-link\" aria-label=\"Link to 4. 启用Gzip压缩\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Ch3 id=\"5-css-顶部加载javascript-底部加载\">5. CSS 顶部加载，JavaScript 底部加载\u003Ca href=\"#5-css-顶部加载javascript-底部加载\" class=\"heading-anchor-link\" aria-label=\"Link to 5. CSS 顶部加载，JavaScript 底部加载\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Ch3 id=\"6-避免在css中使用表达式\">6. 避免在CSS中使用表达式\u003Ca href=\"#6-避免在css中使用表达式\" class=\"heading-anchor-link\" aria-label=\"Link to 6. 避免在CSS中使用表达式\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Ch3 id=\"7-使用外部引用的-javascript-css-文件\">7. 使用外部引用的 JavaScript CSS 文件\u003Ca href=\"#7-使用外部引用的-javascript-css-文件\" class=\"heading-anchor-link\" aria-label=\"Link to 7. 使用外部引用的 JavaScript CSS 文件\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Ch3 id=\"8-减少-dns-查询\">8. 减少 DNS 查询\u003Ca href=\"#8-减少-dns-查询\" class=\"heading-anchor-link\" aria-label=\"Link to 8. 减少 DNS 查询\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Ch3 id=\"9-压缩-javascript-css-文件\">9. 压缩 JavaScript CSS 文件\u003Ca href=\"#9-压缩-javascript-css-文件\" class=\"heading-anchor-link\" aria-label=\"Link to 9. 压缩 JavaScript CSS 文件\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Ch3 id=\"10-避免重定向301302\">10. 避免重定向（301/302）\u003Ca href=\"#10-避免重定向301302\" class=\"heading-anchor-link\" aria-label=\"Link to 10. 避免重定向（301/302）\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status/301\" title=\"301重定向\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">301重定向\u003C/a> - 永久的\u003C/li>\n\u003Cli>\u003Ca href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status/302\" title=\"302重定向\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">302重定向\u003C/a> - 临时的\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"11-避免重复引用\">11. 避免重复引用\u003Ca href=\"#11-避免重复引用\" class=\"heading-anchor-link\" aria-label=\"Link to 11. 避免重复引用\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Ch3 id=\"12-配置实体标签entity-tag\">12. 配置实体标签（Entity Tag）\u003Ca href=\"#12-配置实体标签entity-tag\" class=\"heading-anchor-link\" aria-label=\"Link to 12. 配置实体标签（Entity Tag）\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>使用特殊的字符标识资源版本\u003C/p>\n\u003Ch3 id=\"13-ajax-缓存\">13. Ajax 缓存\u003Ca href=\"#13-ajax-缓存\" class=\"heading-anchor-link\" aria-label=\"Link to 13. Ajax 缓存\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>",{"headings":515,"localImagePaths":557,"remoteImagePaths":558,"frontmatter":559,"imagePaths":561},[516,518,521,524,527,530,533,536,539,542,545,548,551,554],{"depth":30,"slug":517,"text":517},"雅虎军规",{"depth":58,"slug":519,"text":520},"1-尽可能减少http请求","1. 尽可能减少HTTP请求",{"depth":58,"slug":522,"text":523},"2-使用cdn内容分发网络","2. 使用CDN（内容分发网络）",{"depth":58,"slug":525,"text":526},"3-添加-expirecache-control头","3. 添加 expire/cache-control头",{"depth":58,"slug":528,"text":529},"4-启用gzip压缩","4. 启用Gzip压缩",{"depth":58,"slug":531,"text":532},"5-css-顶部加载javascript-底部加载","5. CSS 顶部加载，JavaScript 底部加载",{"depth":58,"slug":534,"text":535},"6-避免在css中使用表达式","6. 避免在CSS中使用表达式",{"depth":58,"slug":537,"text":538},"7-使用外部引用的-javascript-css-文件","7. 使用外部引用的 JavaScript CSS 文件",{"depth":58,"slug":540,"text":541},"8-减少-dns-查询","8. 减少 DNS 查询",{"depth":58,"slug":543,"text":544},"9-压缩-javascript-css-文件","9. 压缩 JavaScript CSS 文件",{"depth":58,"slug":546,"text":547},"10-避免重定向301302","10. 避免重定向（301/302）",{"depth":58,"slug":549,"text":550},"11-避免重复引用","11. 避免重复引用",{"depth":58,"slug":552,"text":553},"12-配置实体标签entity-tag","12. 配置实体标签（Entity Tag）",{"depth":58,"slug":555,"text":556},"13-ajax-缓存","13. Ajax 缓存",[],[],{"title":505,"description":507,"draft":18,"published":560,"minutes":30},["Date","2025-08-09T00:00:00.000Z"],[],"scattered-notes/yapi",{"id":562,"data":564,"body":569,"filePath":570,"digest":571,"rendered":572},{"title":565,"published":566,"description":567,"tags":568,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"YApi接口管理工具使用",["Date","2025-08-09T00:00:00.000Z"],"YApi接口分类获取和项目迁移的TypeScript实现代码",[],"```typescript\nimport axios from 'axios';\n\nconst PROJECT_CONFIHG = {\n  project_id: 746,\n  token: \"f9d8fc1b2e8a8dac9b880e7ae4b73297f13fda67abef76931abf0db982116cde\",\n}\n\nconst COPY_PROJECT_CONFIHG = {\n  project_id: 1380,\n  token: \"4092a629af039262cea2b11e47c1fbe5d34b5934ce1bb2a01ec43f4c623ac2cb\",\n}\n\nconst YAPI_CONFIG = {\n  url: 'http://yapi.uniubi.com',\n  catPath: '/api/interface/list_menu',\n};\n\n// 需要遍历的分类ID\nconst ids = [\n  8379, 8684, 8359, 8679, 8614, 8429, 8619, 8639, 8934, 8689, 8629, 8694, 8674,\n  8909, 7926, 8649, 8944, 7932, 8954, 8634, 8919, 10564, 10729, 10709, 8754,\n  8929, 7934, 13352, 13388, 7927, 7929, 14855, 15125, 7918, 16133, 23216, 7909,\n  8364, 7361, 8444, 8704, 8374, 29641,\n];\n\n/**\n * 获取分类列表\n */\nexport const fetchCats = async () => {\n  const result: number[] = [];\n  // 在复制出来的yapi项目中 未被找到的分类\n  const notFound: number[] = [];\n  try {\n    console.log('请求数据中...')\n    const resSource = await axios.get(`${YAPI_CONFIG.url}${YAPI_CONFIG.catPath}`, {\n      params: {\n        ...PROJECT_CONFIHG,\n      }\n    });\n    // 复制的yapi 项目\n    const resCopy = await axios.get(`${YAPI_CONFIG.url}${YAPI_CONFIG.catPath}`, {\n      params: {\n        ...COPY_PROJECT_CONFIHG,\n      }\n    });\n    console.log('数据请求完成,正在处理...')\n    const source: any[] = resSource?.data?.data?.length ? resSource?.data?.data : [];\n    const copySource: any[] = resCopy?.data?.data?.length ? resCopy?.data?.data : [];\n    // 未找到分类 直接返回空\n    if (!source.length || !copySource.length) {\n      return;\n    }\n    source.forEach((element: any) => {\n      const { name } = element;\n      if (ids.includes(element['_id'])) {\n        const item: any = copySource.find((c) => c.name === name);\n        if (item) {\n          result.push(item['_id'] as number);\n        } else {\n          notFound.push(element['_id']);\n          // console.log(element, '未被找到的分类');\n        }\n      }\n    });\n    console.log(result, notFound, '遍历结果')\n    // console.log('数据处理完成,读取文件...')\n    // const fileStr = fs.readFileSync(path.join(__dirname, './config.ts'))\n    // \t.toString('utf8')\n    // fs.writeFileSync(path.join(__dirname, './config.ts'), fileStr)\n  } catch (e) {\n    console.log(e);\n    return result\n  }\n};\n```","src/content/blog/scattered-notes/yapi.md","000dc7245816c4e7",{"html":573,"metadata":574},"\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> axios \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'axios'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> PROJECT_CONFIHG\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  project_id: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">746\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  token: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"f9d8fc1b2e8a8dac9b880e7ae4b73297f13fda67abef76931abf0db982116cde\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> COPY_PROJECT_CONFIHG\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  project_id: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1380\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  token: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"4092a629af039262cea2b11e47c1fbe5d34b5934ce1bb2a01ec43f4c623ac2cb\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> YAPI_CONFIG\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  url: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'http://yapi.uniubi.com'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  catPath: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'/api/interface/list_menu'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 需要遍历的分类ID\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> ids\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">  8379\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8684\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8359\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8679\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8614\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8429\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8619\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8639\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8934\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8689\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8629\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8694\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8674\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">  8909\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">7926\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8649\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8944\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">7932\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8954\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8634\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8919\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">10564\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">10729\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">10709\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8754\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">  8929\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">7934\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">13352\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">13388\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">7927\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">7929\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">14855\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">15125\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">7918\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">16133\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">23216\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">7909\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">  8364\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">7361\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8444\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8704\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">8374\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">29641\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">/**\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\"> * 获取分类列表\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\"> */\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">export\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> fetchCats\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> async\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> result\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> number\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">[] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 在复制出来的yapi项目中 未被找到的分类\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> notFound\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> number\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">[] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  try\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'请求数据中...'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> resSource\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> await\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> axios.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">get\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">`${\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">YAPI_CONFIG\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">url\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}${\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">YAPI_CONFIG\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">catPath\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}`\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      params: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        ...\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">PROJECT_CONFIHG\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    // 复制的yapi 项目\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> resCopy\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> await\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> axios.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">get\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">`${\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">YAPI_CONFIG\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">url\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}${\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">YAPI_CONFIG\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">catPath\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}`\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      params: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        ...\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">COPY_PROJECT_CONFIHG\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'数据请求完成,正在处理...'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> source\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> any\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">[] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> resSource?.data?.data?.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> ?\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> resSource?.data?.data \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> copySource\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> any\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">[] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> resCopy?.data?.data?.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> ?\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> resCopy?.data?.data \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    // 未找到分类 直接返回空\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">source.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> ||\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> !\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">copySource.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    source.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">forEach\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">((\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">element\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> any\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      const\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">name\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> element;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (ids.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">includes\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(element[\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'_id'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">])) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> item\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> any\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> copySource.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">find\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">((\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">c\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> c.name \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> name);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (item) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">          result.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">push\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(item[\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'_id'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">as\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> number\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">else\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">          notFound.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">push\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(element[\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'_id'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">          // console.log(element, '未被找到的分类');\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(result, notFound, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'遍历结果'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    // console.log('数据处理完成,读取文件...')\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    // const fileStr = fs.readFileSync(path.join(__dirname, './config.ts'))\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    // \t.toString('utf8')\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    // fs.writeFileSync(path.join(__dirname, './config.ts'), fileStr)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">catch\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (e) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(e);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> result\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>",{"headings":575,"localImagePaths":576,"remoteImagePaths":577,"frontmatter":578,"imagePaths":580},[],[],[],{"title":565,"description":567,"draft":18,"published":579,"minutes":30},["Date","2025-08-09T00:00:00.000Z"],[],"work-docs/viewshine/formatter",{"id":581,"data":583,"body":588,"filePath":589,"digest":590,"rendered":591},{"title":584,"published":585,"description":586,"tags":587,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"Formatter 类深度解析",["Date","2025-08-09T00:00:00.000Z"],"优雅的字符串格式化工具",[],"在前端开发中，我们经常需要处理各种数据格式化的需求：日期转换、字符串处理、多数据源组合等。传统的字符串拼接方式不仅代码冗长，还容易出错。今天分享一个优雅的解决方案——基于配置的字符串格式化工具类 `Formatter`。\n\n## 🎯 解决的痛点\n\n在日常开发中，你是否遇到过这些场景：\n\n```javascript\n// 传统的字符串拼接方式\nconst userInfo = `${user.name}${user.age ? `（${user.age}岁）` : ''}${user.department ? `，${user.department}` : ''}`;\nconst dateText = user.createTime ? dayjs(user.createTime).format('YYYY-MM-DD') : '';\n```\n\n这种方式存在诸多问题：\n- 代码冗长且难以维护\n- 容易出现空值处理不当\n- 复用性差\n- 逻辑分散，难以统一管理\n\n## 💡 核心设计思想\n\n`Formatter` 类采用**配置驱动**的设计理念，通过描述性的配置对象来定义字符串的构建规则，实现了：\n\n- **声明式编程**：用配置描述结果，而非过程\n- **高度可复用**：一次配置，多处使用\n- **灵活的过滤器系统**：支持链式数据处理\n- **多数据源支持**：自动从多个对象中查找字段值\n\n## 🏗️ 核心架构\n\n### 数据结构设计\n\n```typescript\ninterface Segment {\n  field?: string;           // 数据字段路径，支持嵌套（如 'user.profile.name'）\n  defaultValue?: string;    // 字段为空时的默认值\n  filters?: Array\u003Cstring | { name: string; format?: string }>; // 过滤器链\n  text?: string;           // 固定文本内容\n  suffix?: string;         // 后缀符号（如 \"，\"、\"/\"、\"-\"）\n  wrap?: [string, string]; // 包裹符号（如 [\"（\", \"）\"]）\n}\n```\n\n### 内置过滤器\n\n```typescript\n{\n  upper: (str: string) => str.toUpperCase(),        // 转大写\n  lower: (str: string) => str.toLowerCase(),        // 转小写\n  trim: (str: string) => str.trim(),                // 去空格\n  capitalize: (str: string) => str.charAt(0).toUpperCase() + str.slice(1), // 首字母大写\n  formatDate: (str: string, format?: string) => {  // 日期格式化\n    // 智能日期处理逻辑\n  }\n}\n```\n\n## 🚀 实际应用场景\n\n### 场景1：用户信息展示\n\n```typescript\nconst formatter = new Formatter();\n\n// 配置用户信息格式\nconst userInfoConfig = [\n  { field: 'name', filters: ['capitalize'] },\n  { field: 'age', wrap: ['（', '岁）'], suffix: '，' },\n  { field: 'department' },\n  { field: 'position', wrap: ['/', ''] }\n];\n\nconst userData = {\n  name: 'zhang san',\n  age: 28,\n  department: '技术部',\n  position: '前端工程师'\n};\n\nconst result = formatter.format(userInfoConfig, userData);\n// 输出: \"Zhang san（28岁），技术部/前端工程师\"\n```\n\n### 场景2：日期时间处理\n\n```typescript\nconst dateConfig = [\n  { text: '创建时间：' },\n  {\n    field: 'createTime',\n    filters: [{ name: 'formatDate', format: 'YYYY年MM月DD日 HH:mm' }],\n    defaultValue: '未知'\n  }\n];\n\nconst data = { createTime: '2024-01-15T10:30:00Z' };\nconst result = formatter.format(dateConfig, data);\n// 输出: \"创建时间：2024年01月15日 10:30\"\n```\n\n### 场景3：多数据源合并\n\n```typescript\n// 支持从多个对象中查找字段值\nconst config = [\n  { field: 'user.name' },\n  { field: 'profile.title', wrap: ['（', '）'] },\n  { field: 'contact.email', suffix: ' - ' },\n  { field: 'department.name' }\n];\n\nconst user = { name: 'Alice' };\nconst profile = { title: '高级工程师' };\nconst contact = { email: 'alice@company.com' };\nconst department = { name: 'AI研发部' };\n\nconst result = formatter.format(config, user, profile, contact, department);\n// 输出: \"Alice（高级工程师）alice@company.com - AI研发部\"\n```\n\n## 🔧 高级特性\n\n### 自定义过滤器\n\n```typescript\nconst formatter = new Formatter();\n\n// 注册自定义过滤器\nformatter.registerFilter('currency', (value: string, currency = 'CNY') => {\n  const num = parseFloat(value);\n  return new Intl.NumberFormat('zh-CN', {\n    style: 'currency',\n    currency: currency\n  }).format(num);\n});\n\n// 使用自定义过滤器\nconst config = [\n  { text: '价格：' },\n  { field: 'price', filters: [{ name: 'currency', format: 'USD' }] }\n];\n```\n\n### 嵌套字段访问\n\n```typescript\n// 支持深层嵌套字段访问\nconst config = [\n  { field: 'user.profile.personal.firstName' },\n  { field: 'user.profile.personal.lastName' }\n];\n\nconst data = {\n  user: {\n    profile: {\n      personal: {\n        firstName: 'John',\n        lastName: 'Doe'\n      }\n    }\n  }\n};\n```\n\n### 智能空值处理\n\n```typescript\nconst config = [\n  { field: 'title' },\n  { field: 'subtitle', wrap: ['（', '）'], suffix: ' - ' }, // 如果subtitle为空，整个segment不输出\n  { field: 'author', defaultValue: '匿名' }\n];\n\n// 自动处理空值，避免输出多余的符号\n```\n\n## 🎨 设计亮点\n\n### 1. 链式过滤器处理\n过滤器支持链式调用，数据经过多层处理：\n```typescript\nfilters: ['trim', 'lower', { name: 'formatDate', format: 'MM/DD' }]\n```\n\n### 2. 智能符号处理\n自动清理末尾多余的分隔符，确保输出整洁：\n```typescript\n// 正则清理：/[\\s/，-]+$/\n\"张三，技术部，/\" → \"张三，技术部\"\n```\n\n### 3. 安全的属性访问\n使用 `Reflect.get` 和异常处理，避免访问不存在属性时报错：\n```typescript\nconst val = fieldPath.split('.').reduce((obj, key) => {\n  if (obj && typeof obj === 'object' && Object.prototype.hasOwnProperty.call(obj, key)) {\n    return Reflect.get(obj, key);\n  }\n  return undefined;\n}, data);\n```\n\n## 📈 性能优化\n\n1. **惰性求值**：只有当字段值非空时才进行后续处理\n2. **短路机制**：找到第一个有效值即停止搜索\n3. **缓存友好**：过滤器函数可复用，避免重复创建\n\n## 🔮 扩展性\n\n### 添加新过滤器\n```typescript\nformatter.registerFilter('mask', (str: string, maskChar = '*') => {\n  // 手机号脱敏处理\n  return str.replace(/(\\d{3})\\d{4}(\\d{4})/, `$1${maskChar.repeat(4)}$2`);\n});\n```\n\n### 与模板引擎结合\n```typescript\n// 可与Vue、React等框架的模板系统结合\nconst Template = ({ config, data }) => {\n  const formatter = new Formatter();\n  return \u003Cspan>{formatter.format(config, data)}\u003C/span>;\n};\n```\n\n## 🎯 最佳实践\n\n1. **配置复用**：将常用配置提取为常量\n2. **类型安全**：结合TypeScript使用，获得更好的类型提示\n3. **错误处理**：合理设置默认值，避免显示异常数据\n4. **性能考虑**：对于大量数据处理，考虑使用缓存机制\n\n## 总结\n\n`Formatter` 类通过配置驱动的方式，优雅地解决了字符串格式化的常见问题。它不仅提高了代码的可读性和维护性，还提供了强大的扩展能力。在实际项目中，这种设计模式可以显著减少重复代码，提升开发效率。\n\n无论是简单的字符串拼接，还是复杂的多数据源处理，`Formatter` 都能提供统一、优雅的解决方案。推荐在需要大量字符串处理的项目中使用这种设计思路。","src/content/blog/work-docs/viewshine/formatter.md","ec3f97589bf6097f",{"html":592,"metadata":593},"\u003Cp>在前端开发中，我们经常需要处理各种数据格式化的需求：日期转换、字符串处理、多数据源组合等。传统的字符串拼接方式不仅代码冗长，还容易出错。今天分享一个优雅的解决方案——基于配置的字符串格式化工具类 \u003Ccode>Formatter\u003C/code>。\u003C/p>\n\u003Ch2 id=\"-解决的痛点\">🎯 解决的痛点\u003Ca href=\"#-解决的痛点\" class=\"heading-anchor-link\" aria-label=\"Link to 🎯 解决的痛点\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cp>在日常开发中，你是否遇到过这些场景：\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 传统的字符串拼接方式\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> userInfo\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> `${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">user\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">name\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">user\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">age\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> ?\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> `（${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">user\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">age\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}岁）`\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> :\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> ''}${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">user\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">department\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> ?\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> `，${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">user\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">department\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}`\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> :\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> ''}`\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> dateText\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> user.createTime \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> dayjs\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(user.createTime).\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">format\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'YYYY-MM-DD'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> ''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cp>这种方式存在诸多问题：\u003C/p>\n\u003Cul>\n\u003Cli>代码冗长且难以维护\u003C/li>\n\u003Cli>容易出现空值处理不当\u003C/li>\n\u003Cli>复用性差\u003C/li>\n\u003Cli>逻辑分散，难以统一管理\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"-核心设计思想\">💡 核心设计思想\u003Ca href=\"#-核心设计思想\" class=\"heading-anchor-link\" aria-label=\"Link to 💡 核心设计思想\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cp>\u003Ccode>Formatter\u003C/code> 类采用\u003Cstrong>配置驱动\u003C/strong>的设计理念，通过描述性的配置对象来定义字符串的构建规则，实现了：\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>声明式编程\u003C/strong>：用配置描述结果，而非过程\u003C/li>\n\u003Cli>\u003Cstrong>高度可复用\u003C/strong>：一次配置，多处使用\u003C/li>\n\u003Cli>\u003Cstrong>灵活的过滤器系统\u003C/strong>：支持链式数据处理\u003C/li>\n\u003Cli>\u003Cstrong>多数据源支持\u003C/strong>：自动从多个对象中查找字段值\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"️-核心架构\">🏗️ 核心架构\u003Ca href=\"#️-核心架构\" class=\"heading-anchor-link\" aria-label=\"Link to 🏗️ 核心架构\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"数据结构设计\">数据结构设计\u003Ca href=\"#数据结构设计\" class=\"heading-anchor-link\" aria-label=\"Link to 数据结构设计\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">interface\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Segment\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">  field\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;           \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 数据字段路径，支持嵌套（如 'user.profile.name'）\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">  defaultValue\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;    \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 字段为空时的默认值\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">  filters\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Array\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">string\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> |\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">name\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">; \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">format\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }>; \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 过滤器链\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">  text\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;           \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 固定文本内容\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">  suffix\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;         \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 后缀符号（如 \"，\"、\"/\"、\"-\"）\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">  wrap\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?:\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]; \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 包裹符号（如 [\"（\", \"）\"]）\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"内置过滤器\">内置过滤器\u003Ca href=\"#内置过滤器\" class=\"heading-anchor-link\" aria-label=\"Link to 内置过滤器\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  upper\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">str\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> str.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">toUpperCase\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(),        \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 转大写\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  lower\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">str\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> str.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">toLowerCase\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(),        \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 转小写\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  trim\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">str\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> str.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">trim\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(),                \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 去空格\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  capitalize\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">str\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> str.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">charAt\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">).\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">toUpperCase\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> str.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">slice\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">), \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 首字母大写\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  formatDate\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">str\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">format\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {  \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 日期格式化\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    // 智能日期处理逻辑\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"-实际应用场景\">🚀 实际应用场景\u003Ca href=\"#-实际应用场景\" class=\"heading-anchor-link\" aria-label=\"Link to 🚀 实际应用场景\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"场景1用户信息展示\">场景1：用户信息展示\u003Ca href=\"#场景1用户信息展示\" class=\"heading-anchor-link\" aria-label=\"Link to 场景1：用户信息展示\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> formatter\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Formatter\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 配置用户信息格式\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> userInfoConfig\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { field: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'name'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, filters: [\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'capitalize'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">] },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { field: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'age'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, wrap: [\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'（'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'岁）'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">], suffix: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'，'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { field: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'department'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { field: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'position'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, wrap: [\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'/'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">] }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> userData\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'zhang san'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  age: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">28\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  department: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'技术部'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  position: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'前端工程师'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> result\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> formatter.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">format\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(userInfoConfig, userData);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 输出: \"Zhang san（28岁），技术部/前端工程师\"\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"场景2日期时间处理\">场景2：日期时间处理\u003Ca href=\"#场景2日期时间处理\" class=\"heading-anchor-link\" aria-label=\"Link to 场景2：日期时间处理\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> dateConfig\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { text: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'创建时间：'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    field: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'createTime'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    filters: [{ name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'formatDate'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, format: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'YYYY年MM月DD日 HH:mm'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    defaultValue: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'未知'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> data\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { createTime: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'2024-01-15T10:30:00Z'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> result\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> formatter.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">format\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(dateConfig, data);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 输出: \"创建时间：2024年01月15日 10:30\"\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"场景3多数据源合并\">场景3：多数据源合并\u003Ca href=\"#场景3多数据源合并\" class=\"heading-anchor-link\" aria-label=\"Link to 场景3：多数据源合并\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 支持从多个对象中查找字段值\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> config\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { field: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'user.name'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { field: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'profile.title'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, wrap: [\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'（'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'）'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">] },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { field: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'contact.email'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, suffix: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">' - '\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { field: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'department.name'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> user\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'Alice'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> profile\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { title: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'高级工程师'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> contact\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { email: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'alice@company.com'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> department\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'AI研发部'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> result\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> formatter.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">format\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(config, user, profile, contact, department);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 输出: \"Alice（高级工程师）alice@company.com - AI研发部\"\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"-高级特性\">🔧 高级特性\u003Ca href=\"#-高级特性\" class=\"heading-anchor-link\" aria-label=\"Link to 🔧 高级特性\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"自定义过滤器\">自定义过滤器\u003Ca href=\"#自定义过滤器\" class=\"heading-anchor-link\" aria-label=\"Link to 自定义过滤器\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> formatter\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Formatter\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 注册自定义过滤器\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">formatter.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">registerFilter\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'currency'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">value\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">currency\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'CNY'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> num\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> parseFloat\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(value);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> Intl.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">NumberFormat\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'zh-CN'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    style: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'currency'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    currency: currency\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }).\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">format\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(num);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">});\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 使用自定义过滤器\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> config\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { text: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'价格：'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { field: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'price'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, filters: [{ name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'currency'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, format: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'USD'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }] }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"嵌套字段访问\">嵌套字段访问\u003Ca href=\"#嵌套字段访问\" class=\"heading-anchor-link\" aria-label=\"Link to 嵌套字段访问\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 支持深层嵌套字段访问\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> config\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { field: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'user.profile.personal.firstName'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { field: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'user.profile.personal.lastName'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> data\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  user: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    profile: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      personal: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        firstName: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'John'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        lastName: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'Doe'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"智能空值处理\">智能空值处理\u003Ca href=\"#智能空值处理\" class=\"heading-anchor-link\" aria-label=\"Link to 智能空值处理\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> config\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { field: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'title'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { field: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'subtitle'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, wrap: [\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'（'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'）'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">], suffix: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">' - '\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }, \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 如果subtitle为空，整个segment不输出\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { field: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'author'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, defaultValue: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'匿名'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 自动处理空值，避免输出多余的符号\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"-设计亮点\">🎨 设计亮点\u003Ca href=\"#-设计亮点\" class=\"heading-anchor-link\" aria-label=\"Link to 🎨 设计亮点\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"1-链式过滤器处理\">1. 链式过滤器处理\u003Ca href=\"#1-链式过滤器处理\" class=\"heading-anchor-link\" aria-label=\"Link to 1. 链式过滤器处理\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>过滤器支持链式调用，数据经过多层处理：\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">filters\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: [\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'trim'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'lower'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, { name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'formatDate'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, format: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'MM/DD'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }]\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"2-智能符号处理\">2. 智能符号处理\u003Ca href=\"#2-智能符号处理\" class=\"heading-anchor-link\" aria-label=\"Link to 2. 智能符号处理\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>自动清理末尾多余的分隔符，确保输出整洁：\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 正则清理：/[\\s/，-]+$/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"张三，技术部，/\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> → \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"张三，技术部\"\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"3-安全的属性访问\">3. 安全的属性访问\u003Ca href=\"#3-安全的属性访问\" class=\"heading-anchor-link\" aria-label=\"Link to 3. 安全的属性访问\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>使用 \u003Ccode>Reflect.get\u003C/code> 和异常处理，避免访问不存在属性时报错：\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> val\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> fieldPath.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">split\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'.'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">).\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">reduce\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">((\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">obj\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">key\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (obj \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x26;&#x26;\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> typeof\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> obj \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'object'\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> &#x26;&#x26;\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> Object\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">prototype\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.hasOwnProperty.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">call\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(obj, key)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> Reflect.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">get\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(obj, key);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> undefined\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}, data);\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"-性能优化\">📈 性能优化\u003Ca href=\"#-性能优化\" class=\"heading-anchor-link\" aria-label=\"Link to 📈 性能优化\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Col>\n\u003Cli>\u003Cstrong>惰性求值\u003C/strong>：只有当字段值非空时才进行后续处理\u003C/li>\n\u003Cli>\u003Cstrong>短路机制\u003C/strong>：找到第一个有效值即停止搜索\u003C/li>\n\u003Cli>\u003Cstrong>缓存友好\u003C/strong>：过滤器函数可复用，避免重复创建\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"-扩展性\">🔮 扩展性\u003Ca href=\"#-扩展性\" class=\"heading-anchor-link\" aria-label=\"Link to 🔮 扩展性\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"添加新过滤器\">添加新过滤器\u003Ca href=\"#添加新过滤器\" class=\"heading-anchor-link\" aria-label=\"Link to 添加新过滤器\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">formatter.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">registerFilter\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'mask'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">str\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">maskChar\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '*'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 手机号脱敏处理\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> str.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">replace\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">/\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">\\d\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{3}\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">\\d\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{4}\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">\\d\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">{4}\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#DBEDFF\">)\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">/\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">`$1${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">maskChar\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">repeat\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">4\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">)\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}$2`\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">});\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"与模板引擎结合\">与模板引擎结合\u003Ca href=\"#与模板引擎结合\" class=\"heading-anchor-link\" aria-label=\"Link to 与模板引擎结合\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 可与Vue、React等框架的模板系统结合\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Template\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> ({ \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">config\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">data\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> formatter\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Formatter\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> &#x3C;\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">span\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>{formatter.format(config, data)}\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">span\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"-最佳实践\">🎯 最佳实践\u003Ca href=\"#-最佳实践\" class=\"heading-anchor-link\" aria-label=\"Link to 🎯 最佳实践\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Col>\n\u003Cli>\u003Cstrong>配置复用\u003C/strong>：将常用配置提取为常量\u003C/li>\n\u003Cli>\u003Cstrong>类型安全\u003C/strong>：结合TypeScript使用，获得更好的类型提示\u003C/li>\n\u003Cli>\u003Cstrong>错误处理\u003C/strong>：合理设置默认值，避免显示异常数据\u003C/li>\n\u003Cli>\u003Cstrong>性能考虑\u003C/strong>：对于大量数据处理，考虑使用缓存机制\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"总结\">总结\u003Ca href=\"#总结\" class=\"heading-anchor-link\" aria-label=\"Link to 总结\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cp>\u003Ccode>Formatter\u003C/code> 类通过配置驱动的方式，优雅地解决了字符串格式化的常见问题。它不仅提高了代码的可读性和维护性，还提供了强大的扩展能力。在实际项目中，这种设计模式可以显著减少重复代码，提升开发效率。\u003C/p>\n\u003Cp>无论是简单的字符串拼接，还是复杂的多数据源处理，\u003Ccode>Formatter\u003C/code> 都能提供统一、优雅的解决方案。推荐在需要大量字符串处理的项目中使用这种设计思路。\u003C/p>",{"headings":594,"localImagePaths":656,"remoteImagePaths":657,"frontmatter":658,"imagePaths":660},[595,598,601,604,606,608,611,614,617,620,623,625,627,629,632,635,638,641,644,647,649,651,654],{"depth":54,"slug":596,"text":597},"-解决的痛点","🎯 解决的痛点",{"depth":54,"slug":599,"text":600},"-核心设计思想","💡 核心设计思想",{"depth":54,"slug":602,"text":603},"️-核心架构","🏗️ 核心架构",{"depth":58,"slug":605,"text":605},"数据结构设计",{"depth":58,"slug":607,"text":607},"内置过滤器",{"depth":54,"slug":609,"text":610},"-实际应用场景","🚀 实际应用场景",{"depth":58,"slug":612,"text":613},"场景1用户信息展示","场景1：用户信息展示",{"depth":58,"slug":615,"text":616},"场景2日期时间处理","场景2：日期时间处理",{"depth":58,"slug":618,"text":619},"场景3多数据源合并","场景3：多数据源合并",{"depth":54,"slug":621,"text":622},"-高级特性","🔧 高级特性",{"depth":58,"slug":624,"text":624},"自定义过滤器",{"depth":58,"slug":626,"text":626},"嵌套字段访问",{"depth":58,"slug":628,"text":628},"智能空值处理",{"depth":54,"slug":630,"text":631},"-设计亮点","🎨 设计亮点",{"depth":58,"slug":633,"text":634},"1-链式过滤器处理","1. 链式过滤器处理",{"depth":58,"slug":636,"text":637},"2-智能符号处理","2. 智能符号处理",{"depth":58,"slug":639,"text":640},"3-安全的属性访问","3. 安全的属性访问",{"depth":54,"slug":642,"text":643},"-性能优化","📈 性能优化",{"depth":54,"slug":645,"text":646},"-扩展性","🔮 扩展性",{"depth":58,"slug":648,"text":648},"添加新过滤器",{"depth":58,"slug":650,"text":650},"与模板引擎结合",{"depth":54,"slug":652,"text":653},"-最佳实践","🎯 最佳实践",{"depth":54,"slug":655,"text":655},"总结",[],[],{"title":584,"description":586,"draft":18,"published":659,"minutes":500},["Date","2025-08-09T00:00:00.000Z"],[],"work-docs/viewshine/vue3-api",{"id":661,"data":663,"body":668,"filePath":669,"digest":670,"rendered":671},{"title":664,"published":665,"description":666,"tags":667,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"Vue3 组合式API实践指南",["Date","2025-08-09T00:00:00.000Z"],"Vue3组合式API的使用方法、依赖注入和组件开发最佳实践",[],"# Vue 3 常用 API 实战指南\n\nVue 3 带来了许多激动人心的新特性，其中最重要的就是 Composition API。本文将通过丰富的示例来介绍 Vue 3 中最常用的 API，帮助你快速掌握 Vue 3 的核心功能。\n\n## 🚀 Composition API 核心\n\n### ref() - 响应式引用\n\n`ref()` 是创建响应式数据的最基础 API，适用于基本数据类型和对象。\n\n```vue\n\u003Ctemplate>\n  \u003Cdiv>\n    \u003Cp>计数器: {{ count }}\u003C/p>\n    \u003Cbutton @click=\"increment\">增加\u003C/button>\n    \u003Cbutton @click=\"reset\">重置\u003C/button>\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript setup>\nimport { ref } from 'vue'\n\n// 基本类型响应式\nconst count = ref(0)\n\n// 对象引用\nconst user = ref({\n  name: '张三',\n  age: 25\n})\n\nconst increment = () => {\n  count.value++\n}\n\nconst reset = () => {\n  count.value = 0\n}\n\n// 访问对象属性\nconsole.log(user.value.name) // '张三'\n\u003C/script>\n```\n\n### reactive() - 响应式对象\n\n`reactive()` 用于创建深度响应式的对象，更适合复杂的数据结构。\n\n```vue\n\u003Ctemplate>\n  \u003Cdiv>\n    \u003Ch3>用户信息\u003C/h3>\n    \u003Cp>姓名: {{ state.user.name }}\u003C/p>\n    \u003Cp>年龄: {{ state.user.age }}\u003C/p>\n    \u003Cp>地址: {{ state.user.address.city }}\u003C/p>\n    \u003Cbutton @click=\"updateUser\">更新用户\u003C/button>\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript setup>\nimport { reactive } from 'vue'\n\nconst state = reactive({\n  user: {\n    name: '李四',\n    age: 30,\n    address: {\n      city: '北京',\n      street: '朝阳区'\n    }\n  },\n  posts: [],\n  loading: false\n})\n\nconst updateUser = () => {\n  // 直接修改，无需 .value\n  state.user.age++\n  state.user.address.city = '上海'\n}\n\u003C/script>\n```\n\n### computed() - 计算属性\n\n计算属性基于依赖进行缓存，只有依赖发生变化时才重新计算。\n\n```vue\n\u003Ctemplate>\n  \u003Cdiv>\n    \u003Cinput v-model=\"firstName\" placeholder=\"名\">\n    \u003Cinput v-model=\"lastName\" placeholder=\"姓\">\n    \u003Cp>全名: {{ fullName }}\u003C/p>\n    \u003Cp>用户信息: {{ userSummary }}\u003C/p>\n    \u003Cbutton @click=\"reverseName\">反转姓名\u003C/button>\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript setup>\nimport { ref, computed } from 'vue'\n\nconst firstName = ref('三')\nconst lastName = ref('张')\n\n// 只读计算属性\nconst fullName = computed(() => {\n  return `${lastName.value}${firstName.value}`\n})\n\n// 可写计算属性\nconst reverseName = computed({\n  get() {\n    return `${lastName.value}${firstName.value}`\n  },\n  set(value) {\n    [lastName.value, firstName.value] = value.split('')\n  }\n})\n\n// 复杂计算属性\nconst userSummary = computed(() => {\n  const name = fullName.value\n  return `用户: ${name} (${name.length}个字符)`\n})\n\u003C/script>\n```\n\n### watch() 和 watchEffect() - 侦听器\n\n监听响应式数据的变化并执行副作用。\n\n```vue\n\u003Ctemplate>\n  \u003Cdiv>\n    \u003Cinput v-model=\"searchTerm\" placeholder=\"搜索...\">\n    \u003Cp>搜索词: {{ searchTerm }}\u003C/p>\n    \u003Cp>搜索次数: {{ searchCount }}\u003C/p>\n    \u003Cdiv v-if=\"loading\">搜索中...\u003C/div>\n    \u003Cul>\n      \u003Cli v-for=\"result in searchResults\" :key=\"result\">\n        {{ result }}\n      \u003C/li>\n    \u003C/ul>\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript setup>\nimport { ref, watch, watchEffect } from 'vue'\n\nconst searchTerm = ref('')\nconst searchCount = ref(0)\nconst searchResults = ref([])\nconst loading = ref(false)\n\n// 基础 watch\nwatch(searchTerm, (newValue, oldValue) => {\n  console.log(`搜索词从 \"${oldValue}\" 变为 \"${newValue}\"`)\n  searchCount.value++\n})\n\n// 深度监听对象\nconst user = ref({ name: '张三', profile: { age: 25 } })\nwatch(user, (newUser) => {\n  console.log('用户信息变化:', newUser)\n}, { deep: true })\n\n// 监听多个源\nwatch([searchTerm, searchCount], ([newTerm, newCount]) => {\n  console.log(`第 ${newCount} 次搜索: ${newTerm}`)\n})\n\n// 立即执行 + 停止监听\nconst stopWatcher = watch(searchTerm, async (term) => {\n  if (term.length > 2) {\n    loading.value = true\n    // 模拟 API 调用\n    await new Promise(resolve => setTimeout(resolve, 500))\n    searchResults.value = [`结果1: ${term}`, `结果2: ${term}`]\n    loading.value = false\n  }\n}, { immediate: true })\n\n// watchEffect - 自动追踪依赖\nwatchEffect(() => {\n  if (searchTerm.value) {\n    document.title = `搜索: ${searchTerm.value}`\n  }\n})\n\n// 组件卸载时停止监听\n// onUnmounted(() => stopWatcher())\n\u003C/script>\n```\n\n## 🔄 生命周期钩子\n\nVue 3 的生命周期钩子在 Composition API 中以函数形式提供。\n\n```vue\n\u003Ctemplate>\n  \u003Cdiv>\n    \u003Ch3>生命周期演示\u003C/h3>\n    \u003Cp>组件状态: {{ status }}\u003C/p>\n    \u003Cp>计时器: {{ timer }}\u003C/p>\n    \u003Cbutton @click=\"toggleTimer\">{{ isRunning ? '停止' : '开始' }}计时器\u003C/button>\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript setup>\nimport {\n  ref,\n  onMounted,\n  onUpdated,\n  onUnmounted,\n  onBeforeMount,\n  onBeforeUpdate,\n  onBeforeUnmount\n} from 'vue'\n\nconst status = ref('初始化')\nconst timer = ref(0)\nconst isRunning = ref(false)\nlet intervalId = null\n\n// 组件挂载前\nonBeforeMount(() => {\n  console.log('组件即将挂载')\n  status.value = '准备挂载'\n})\n\n// 组件挂载后\nonMounted(() => {\n  console.log('组件已挂载')\n  status.value = '已挂载'\n\n  // 初始化操作，如 API 调用\n  fetchInitialData()\n})\n\n// 组件更新前\nonBeforeUpdate(() => {\n  console.log('组件即将更新')\n})\n\n// 组件更新后\nonUpdated(() => {\n  console.log('组件已更新')\n})\n\n// 组件卸载前\nonBeforeUnmount(() => {\n  console.log('组件即将卸载')\n  if (intervalId) {\n    clearInterval(intervalId)\n  }\n})\n\n// 组件卸载后\nonUnmounted(() => {\n  console.log('组件已卸载')\n})\n\nconst fetchInitialData = async () => {\n  // 模拟 API 调用\n  await new Promise(resolve => setTimeout(resolve, 1000))\n  status.value = '数据加载完成'\n}\n\nconst toggleTimer = () => {\n  if (isRunning.value) {\n    clearInterval(intervalId)\n    intervalId = null\n  } else {\n    intervalId = setInterval(() => {\n      timer.value++\n    }, 1000)\n  }\n  isRunning.value = !isRunning.value\n}\n\u003C/script>\n```\n\n## 🎯 组件通信\n\n### defineProps 和 defineEmits\n\n父子组件通信的标准方式。\n\n```vue\n\u003C!-- 子组件: UserCard.vue -->\n\u003Ctemplate>\n  \u003Cdiv class=\"user-card\">\n    \u003Ch3>{{ user.name }}\u003C/h3>\n    \u003Cp>年龄: {{ user.age }}\u003C/p>\n    \u003Cp>邮箱: {{ user.email }}\u003C/p>\n    \u003Cbutton @click=\"handleEdit\">编辑\u003C/button>\n    \u003Cbutton @click=\"handleDelete\">删除\u003C/button>\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript setup>\n// 定义 props\nconst props = defineProps({\n  user: {\n    type: Object,\n    required: true,\n    default: () => ({})\n  },\n  editable: {\n    type: Boolean,\n    default: true\n  }\n})\n\n// 定义 emits\nconst emit = defineEmits(['edit', 'delete', 'update'])\n\nconst handleEdit = () => {\n  emit('edit', props.user.id)\n}\n\nconst handleDelete = () => {\n  if (confirm('确定要删除吗？')) {\n    emit('delete', props.user.id)\n  }\n}\n\n// 带参数的事件\nconst handleUpdate = (field, value) => {\n  emit('update', {\n    id: props.user.id,\n    field,\n    value\n  })\n}\n\u003C/script>\n```\n\n```vue\n\u003C!-- 父组件使用 -->\n\u003Ctemplate>\n  \u003Cdiv>\n    \u003CUserCard\n      v-for=\"user in users\"\n      :key=\"user.id\"\n      :user=\"user\"\n      :editable=\"true\"\n      @edit=\"handleEditUser\"\n      @delete=\"handleDeleteUser\"\n      @update=\"handleUpdateUser\"\n    />\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript setup>\nimport { ref } from 'vue'\nimport UserCard from './UserCard.vue'\n\nconst users = ref([\n  { id: 1, name: '张三', age: 25, email: 'zhangsan@example.com' },\n  { id: 2, name: '李四', age: 30, email: 'lisi@example.com' }\n])\n\nconst handleEditUser = (userId) => {\n  console.log('编辑用户:', userId)\n}\n\nconst handleDeleteUser = (userId) => {\n  users.value = users.value.filter(user => user.id !== userId)\n}\n\nconst handleUpdateUser = ({ id, field, value }) => {\n  const user = users.value.find(u => u.id === id)\n  if (user) {\n    user[field] = value\n  }\n}\n\u003C/script>\n```\n\n### provide 和 inject\n\n跨层级组件通信，避免 prop 钻取。\n\n```vue\n\u003C!-- 根组件 -->\n\u003Ctemplate>\n  \u003Cdiv>\n    \u003CThemeProvider>\n      \u003CUserProfile />\n    \u003C/ThemeProvider>\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript setup>\nimport { provide, ref, readonly } from 'vue'\nimport ThemeProvider from './ThemeProvider.vue'\nimport UserProfile from './UserProfile.vue'\n\n// 主题管理\nconst theme = ref('light')\nconst changeTheme = (newTheme) => {\n  theme.value = newTheme\n}\n\n// 用户数据管理\nconst currentUser = ref({\n  id: 1,\n  name: '张三',\n  avatar: '/avatar.jpg',\n  preferences: {\n    language: 'zh-CN',\n    notifications: true\n  }\n})\n\n// 提供给子组件\nprovide('theme', {\n  theme: readonly(theme),\n  changeTheme\n})\n\nprovide('user', {\n  user: readonly(currentUser),\n  updateUser: (updates) => {\n    Object.assign(currentUser.value, updates)\n  }\n})\n\u003C/script>\n```\n\n```vue\n\u003C!-- 深层子组件 -->\n\u003Ctemplate>\n  \u003Cdiv :class=\"`profile ${theme}`\">\n    \u003Cimg :src=\"user.avatar\" :alt=\"user.name\">\n    \u003Ch2>{{ user.name }}\u003C/h2>\n    \u003Cbutton @click=\"toggleTheme\">\n      切换到 {{ theme === 'light' ? '暗' : '亮' }} 主题\n    \u003C/button>\n    \u003CSettings />\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript setup>\nimport { inject } from 'vue'\nimport Settings from './Settings.vue'\n\n// 注入依赖\nconst { theme, changeTheme } = inject('theme')\nconst { user, updateUser } = inject('user')\n\nconst toggleTheme = () => {\n  changeTheme(theme.value === 'light' ? 'dark' : 'light')\n}\n\u003C/script>\n```\n\n## 🎨 模板引用 ref\n\n直接访问 DOM 元素或组件实例。\n\n```vue\n\u003Ctemplate>\n  \u003Cdiv>\n    \u003Cinput\n      ref=\"inputRef\"\n      v-model=\"inputValue\"\n      placeholder=\"点击按钮聚焦\"\n    >\n    \u003Cbutton @click=\"focusInput\">聚焦输入框\u003C/button>\n\n    \u003Cdiv ref=\"containerRef\" class=\"container\">\n      \u003Cp>滚动区域\u003C/p>\n      \u003Cdiv v-for=\"i in 50\" :key=\"i\">项目 {{ i }}\u003C/div>\n    \u003C/div>\n    \u003Cbutton @click=\"scrollToTop\">回到顶部\u003C/button>\n\n    \u003C!-- 组件引用 -->\n    \u003CChildComponent ref=\"childRef\" />\n    \u003Cbutton @click=\"callChildMethod\">调用子组件方法\u003C/button>\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript setup>\nimport { ref, onMounted } from 'vue'\nimport ChildComponent from './ChildComponent.vue'\n\nconst inputValue = ref('')\nconst inputRef = ref(null)\nconst containerRef = ref(null)\nconst childRef = ref(null)\n\n// 聚焦输入框\nconst focusInput = () => {\n  inputRef.value?.focus()\n}\n\n// 滚动到顶部\nconst scrollToTop = () => {\n  containerRef.value?.scrollTo({ top: 0, behavior: 'smooth' })\n}\n\n// 调用子组件方法\nconst callChildMethod = () => {\n  childRef.value?.someMethod()\n}\n\nonMounted(() => {\n  // 组件挂载后访问 DOM\n  console.log('输入框元素:', inputRef.value)\n  console.log('容器元素:', containerRef.value)\n})\n\u003C/script>\n```\n\n## 🔧 工具函数\n\n### nextTick\n\n等待下次 DOM 更新循环结束后执行回调。\n\n```vue\n\u003Ctemplate>\n  \u003Cdiv>\n    \u003Cul ref=\"listRef\">\n      \u003Cli v-for=\"item in items\" :key=\"item.id\">\n        {{ item.text }}\n      \u003C/li>\n    \u003C/ul>\n    \u003Cbutton @click=\"addItem\">添加项目\u003C/button>\n    \u003Cp>列表高度: {{ listHeight }}px\u003C/p>\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript setup>\nimport { ref, nextTick } from 'vue'\n\nconst items = ref([\n  { id: 1, text: '项目 1' },\n  { id: 2, text: '项目 2' }\n])\nconst listRef = ref(null)\nconst listHeight = ref(0)\n\nconst addItem = async () => {\n  const newItem = {\n    id: Date.now(),\n    text: `项目 ${items.value.length + 1}`\n  }\n\n  items.value.push(newItem)\n\n  // 等待 DOM 更新\n  await nextTick()\n\n  // 现在可以安全地访问更新后的 DOM\n  listHeight.value = listRef.value?.offsetHeight || 0\n\n  // 滚动到新添加的项目\n  const newElement = listRef.value?.lastElementChild\n  newElement?.scrollIntoView({ behavior: 'smooth' })\n}\n\u003C/script>\n```\n\n### unref 和 toRef\n\n处理可能是 ref 或普通值的数据。\n\n```vue\n\u003Ctemplate>\n  \u003Cdiv>\n    \u003Cp>用户名: {{ userName }}\u003C/p>\n    \u003Cp>年龄: {{ userAge }}\u003C/p>\n    \u003Cbutton @click=\"updateUser\">更新用户\u003C/button>\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript setup>\nimport { ref, reactive, toRef, unref } from 'vue'\n\nconst user = reactive({\n  name: '张三',\n  age: 25,\n  email: 'zhangsan@example.com'\n})\n\n// 将响应式对象的属性转为 ref\nconst userName = toRef(user, 'name')\nconst userAge = toRef(user, 'age')\n\n// 处理可能是 ref 或普通值的函数\nconst getValue = (maybeRef) => {\n  return unref(maybeRef) // 如果是 ref 返回 .value，否则返回原值\n}\n\nconst updateUser = () => {\n  // 修改 ref 会同步到原对象\n  userName.value = '李四'\n  userAge.value = 30\n\n  console.log('用户对象:', user) // { name: '李四', age: 30, email: '...' }\n}\n\n// 使用 unref 的实用函数\nconst formatUserInfo = (nameRef, ageRef) => {\n  const name = unref(nameRef)\n  const age = unref(ageRef)\n  return `${name} (${age}岁)`\n}\n\u003C/script>\n```\n\n## 🎪 常用指令进阶用法\n\n### v-model 修饰符\n\n```vue\n\u003Ctemplate>\n  \u003Cdiv>\n    \u003C!-- 基础用法 -->\n    \u003Cinput v-model=\"message\" placeholder=\"基础绑定\">\n\n    \u003C!-- 修饰符 -->\n    \u003Cinput v-model.lazy=\"lazyValue\" placeholder=\"失焦时更新\">\n    \u003Cinput v-model.number=\"numberValue\" placeholder=\"转为数字\">\n    \u003Cinput v-model.trim=\"trimValue\" placeholder=\"自动去空格\">\n\n    \u003C!-- 自定义组件的 v-model -->\n    \u003CCustomInput v-model=\"customValue\" />\n    \u003CCustomInput v-model:title=\"title\" v-model:content=\"content\" />\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript setup>\nimport { ref } from 'vue'\nimport CustomInput from './CustomInput.vue'\n\nconst message = ref('')\nconst lazyValue = ref('')\nconst numberValue = ref(0)\nconst trimValue = ref('')\nconst customValue = ref('')\nconst title = ref('')\nconst content = ref('')\n\u003C/script>\n```\n\n### 动态指令和参数\n\n```vue\n\u003Ctemplate>\n  \u003Cdiv>\n    \u003C!-- 动态指令 -->\n    \u003Cp v-bind:[attributeName]=\"attributeValue\">动态属性\u003C/p>\n    \u003Cbutton v-on:[eventName]=\"handleEvent\">动态事件\u003C/button>\n\n    \u003C!-- 动态参数的实际应用 -->\n    \u003Cform>\n      \u003Cinput\n        v-for=\"field in formFields\"\n        :key=\"field.name\"\n        v-model=\"formData[field.name]\"\n        :[field.attributeName]=\"field.attributeValue\"\n        @[field.eventName]=\"field.handler\"\n        :placeholder=\"field.placeholder\"\n      >\n    \u003C/form>\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript setup>\nimport { ref, reactive } from 'vue'\n\nconst attributeName = ref('title')\nconst attributeValue = ref('这是一个动态标题')\nconst eventName = ref('click')\n\nconst formData = reactive({})\n\nconst formFields = ref([\n  {\n    name: 'email',\n    placeholder: '邮箱',\n    attributeName: 'type',\n    attributeValue: 'email',\n    eventName: 'blur',\n    handler: (e) => console.log('邮箱失焦:', e.target.value)\n  },\n  {\n    name: 'phone',\n    placeholder: '手机号',\n    attributeName: 'maxlength',\n    attributeValue: '11',\n    eventName: 'input',\n    handler: (e) => console.log('手机号输入:', e.target.value)\n  }\n])\n\nconst handleEvent = () => {\n  console.log('动态事件被触发')\n}\n\u003C/script>\n```\n\n## 🚀 性能优化技巧\n\n### shallowRef 和 shallowReactive\n\n对于大型数据结构，使用浅响应式可以提升性能。\n\n```vue\n\u003Ctemplate>\n  \u003Cdiv>\n    \u003Ch3>大型列表优化\u003C/h3>\n    \u003Cbutton @click=\"addItems\">添加1000个项目\u003C/button>\n    \u003Cbutton @click=\"updateFirstItem\">更新第一个项目\u003C/button>\n    \u003Cp>项目总数: {{ items.length }}\u003C/p>\n\n    \u003Cvirtual-list :items=\"items\" />\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript setup>\nimport { shallowRef, triggerRef } from 'vue'\n\n// 使用 shallowRef 优化大型数组\nconst items = shallowRef([])\n\nconst addItems = () => {\n  const newItems = Array.from({ length: 1000 }, (_, i) => ({\n    id: Date.now() + i,\n    name: `项目 ${items.value.length + i + 1}`,\n    data: { /* 复杂数据 */ }\n  }))\n\n  // 直接替换数组，而不是 push\n  items.value = [...items.value, ...newItems]\n}\n\nconst updateFirstItem = () => {\n  if (items.value.length > 0) {\n    // 修改浅响应式数据后手动触发更新\n    items.value[0].name = `更新的项目 ${Date.now()}`\n    triggerRef(items) // 手动触发响应式更新\n  }\n}\n\u003C/script>\n```\n\n### readonly 和 markRaw\n\n保护数据不被修改或标记为非响应式。\n\n```vue\n\u003Cscript setup>\nimport { ref, reactive, readonly, markRaw } from 'vue'\n\n// 只读数据\nconst config = readonly({\n  apiUrl: 'https://api.example.com',\n  timeout: 5000,\n  retries: 3\n})\n\n// 尝试修改只读数据会发出警告\n// config.apiUrl = 'other-url' // 警告: Set operation on key \"apiUrl\" failed\n\n// 标记为非响应式的对象（如第三方库实例）\nconst chart = markRaw(new SomeChartLibrary())\nconst map = markRaw(new MapLibrary())\n\nconst state = reactive({\n  user: { name: '张三' },\n  chart, // 不会被代理\n  map    // 不会被代理\n})\n\u003C/script>\n```\n\n## 📝 实用组合式函数示例\n\n### 自定义组合式函数\n\n```javascript\n// composables/useCounter.js\nimport { ref, computed } from 'vue'\n\nexport function useCounter(initialValue = 0) {\n  const count = ref(initialValue)\n\n  const increment = () => count.value++\n  const decrement = () => count.value--\n  const reset = () => count.value = initialValue\n\n  const isEven = computed(() => count.value % 2 === 0)\n  const isPositive = computed(() => count.value > 0)\n\n  return {\n    count,\n    increment,\n    decrement,\n    reset,\n    isEven,\n    isPositive\n  }\n}\n```\n\n```javascript\n// composables/useFetch.js\nimport { ref, watchEffect } from 'vue'\n\nexport function useFetch(url) {\n  const data = ref(null)\n  const error = ref(null)\n  const loading = ref(false)\n\n  const fetchData = async () => {\n    loading.value = true\n    error.value = null\n\n    try {\n      const response = await fetch(url.value || url)\n      if (!response.ok) throw new Error(response.statusText)\n      data.value = await response.json()\n    } catch (err) {\n      error.value = err.message\n    } finally {\n      loading.value = false\n    }\n  }\n\n  watchEffect(() => {\n    if (url.value || url) {\n      fetchData()\n    }\n  })\n\n  return { data, error, loading, refetch: fetchData }\n}\n```\n\n```vue\n\u003C!-- 使用组合式函数 -->\n\u003Ctemplate>\n  \u003Cdiv>\n    \u003Cdiv>\n      \u003Cp>计数器: {{ count }}\u003C/p>\n      \u003Cp>状态: {{ isEven ? '偶数' : '奇数' }}, {{ isPositive ? '正数' : '非正数' }}\u003C/p>\n      \u003Cbutton @click=\"increment\">+1\u003C/button>\n      \u003Cbutton @click=\"decrement\">-1\u003C/button>\n      \u003Cbutton @click=\"reset\">重置\u003C/button>\n    \u003C/div>\n\n    \u003Cdiv>\n      \u003Ch3>用户数据\u003C/h3>\n      \u003Cdiv v-if=\"loading\">加载中...\u003C/div>\n      \u003Cdiv v-else-if=\"error\">错误: {{ error }}\u003C/div>\n      \u003Cdiv v-else-if=\"data\">\n        \u003Cp>用户名: {{ data.name }}\u003C/p>\n        \u003Cp>邮箱: {{ data.email }}\u003C/p>\n      \u003C/div>\n      \u003Cbutton @click=\"refetch\">重新加载\u003C/button>\n    \u003C/div>\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript setup>\nimport { useCounter } from '@/composables/useCounter'\nimport { useFetch } from '@/composables/useFetch'\n\n// 使用计数器\nconst { count, increment, decrement, reset, isEven, isPositive } = useCounter(10)\n\n// 使用数据获取\nconst { data, error, loading, refetch } = useFetch('/api/user/1')\n\u003C/script>\n```\n\n## 🎉 总结\n\n### 核心优势\n- **更好的逻辑复用** - 通过组合式函数轻松共享逻辑\n- **更清晰的代码组织** - 相关逻辑可以组织在一起\n- **更好的类型推导** - TypeScript 支持更完善\n- **更小的包体积** - 支持 tree-shaking\n\n### 最佳实践\n1. **优先使用 `ref()` 和 `reactive()`** - 根据数据类型选择合适的响应式 API\n2. **合理使用计算属性** - 复杂的派生状态使用 `computed()`\n3. **善用组合式函数** - 将可复用逻辑提取为组合式函数\n4. **注意性能优化** - 大型数据使用 `shallowRef`/`shallowReactive`\n5. **正确处理副作用** - 使用 `watch`/`watchEffect` 处理异步操作","src/content/blog/work-docs/viewshine/vue3-api.md","240f536c6e121486",{"html":672,"metadata":673},"\u003Ch1 id=\"vue-3-常用-api-实战指南\">Vue 3 常用 API 实战指南\u003Ca href=\"#vue-3-常用-api-实战指南\" class=\"heading-anchor-link\" aria-label=\"Link to Vue 3 常用 API 实战指南\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>\n\u003Cp>Vue 3 带来了许多激动人心的新特性，其中最重要的就是 Composition API。本文将通过丰富的示例来介绍 Vue 3 中最常用的 API，帮助你快速掌握 Vue 3 的核心功能。\u003C/p>\n\u003Ch2 id=\"-composition-api-核心\">🚀 Composition API 核心\u003Ca href=\"#-composition-api-核心\" class=\"heading-anchor-link\" aria-label=\"Link to 🚀 Composition API 核心\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"ref---响应式引用\">ref() - 响应式引用\u003Ca href=\"#ref---响应式引用\" class=\"heading-anchor-link\" aria-label=\"Link to ref() - 响应式引用\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>\u003Ccode>ref()\u003C/code> 是创建响应式数据的最基础 API，适用于基本数据类型和对象。\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"vue\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>计数器: {{ count }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">increment\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>增加&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">reset\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>重置&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setup\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { ref } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 基本类型响应式\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> count\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 对象引用\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> user\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'张三'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  age: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">25\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> increment\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  count.value\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">++\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> reset\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  count.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 0\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 访问对象属性\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(user.value.name) \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// '张三'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"reactive---响应式对象\">reactive() - 响应式对象\u003Ca href=\"#reactive---响应式对象\" class=\"heading-anchor-link\" aria-label=\"Link to reactive() - 响应式对象\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>\u003Ccode>reactive()\u003C/code> 用于创建深度响应式的对象，更适合复杂的数据结构。\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"vue\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">h3\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>用户信息&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">h3\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>姓名: {{ state.user.name }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>年龄: {{ state.user.age }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>地址: {{ state.user.address.city }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">updateUser\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>更新用户&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setup\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { reactive } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> state\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> reactive\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  user: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'李四'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    age: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">30\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    address: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      city: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'北京'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      street: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'朝阳区'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  posts: [],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  loading: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">false\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> updateUser\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 直接修改，无需 .value\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  state.user.age\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">++\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  state.user.address.city \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '上海'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"computed---计算属性\">computed() - 计算属性\u003Ca href=\"#computed---计算属性\" class=\"heading-anchor-link\" aria-label=\"Link to computed() - 计算属性\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>计算属性基于依赖进行缓存，只有依赖发生变化时才重新计算。\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"vue\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">input\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> v-model\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">firstName\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> placeholder\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"名\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">input\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> v-model\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">lastName\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> placeholder\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"姓\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>全名: {{ fullName }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>用户信息: {{ userSummary }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">reverseName\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>反转姓名&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setup\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { ref, computed } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> firstName\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'三'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> lastName\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'张'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 只读计算属性\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> fullName\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> computed\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> `${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">lastName\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">value\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">firstName\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">value\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 可写计算属性\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> reverseName\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> computed\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  get\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> `${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">lastName\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">value\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">firstName\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">value\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  set\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">value\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    [lastName.value, firstName.value] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> value.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">split\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 复杂计算属性\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> userSummary\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> computed\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> name\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> fullName.value\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> `用户: ${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">name\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">} (${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">name\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}个字符)`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"watch-和-watcheffect---侦听器\">watch() 和 watchEffect() - 侦听器\u003Ca href=\"#watch-和-watcheffect---侦听器\" class=\"heading-anchor-link\" aria-label=\"Link to watch() 和 watchEffect() - 侦听器\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>监听响应式数据的变化并执行副作用。\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"vue\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">input\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> v-model\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">searchTerm\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> placeholder\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"搜索...\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>搜索词: {{ searchTerm }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>搜索次数: {{ searchCount }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> v-if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">loading\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>搜索中...&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">ul\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">li\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> v-for\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">result \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">in\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> searchResults\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> :\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">key\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">result\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        {{ result }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">li\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">ul\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setup\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { ref, watch, watchEffect } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> searchTerm\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> searchCount\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> searchResults\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">([])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> loading\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">false\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 基础 watch\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">watch\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(searchTerm, (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">newValue\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">oldValue\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">`搜索词从 \"${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">oldValue\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}\" 变为 \"${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">newValue\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}\"`\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  searchCount.value\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">++\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 深度监听对象\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> user\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({ name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'张三'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, profile: { age: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">25\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> } })\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">watch\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(user, (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">newUser\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'用户信息变化:'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, newUser)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}, { deep: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">true\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> })\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 监听多个源\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">watch\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">([searchTerm, searchCount], ([\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">newTerm\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">newCount\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">`第 ${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">newCount\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">} 次搜索: ${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">newTerm\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}`\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 立即执行 + 停止监听\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> stopWatcher\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> watch\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(searchTerm, \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">async\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">term\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (term.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> >\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 2\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    loading.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> true\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    // 模拟 API 调用\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    await\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> Promise\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">resolve\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =>\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setTimeout\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(resolve, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">500\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">))\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    searchResults.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">`结果1: ${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">term\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}`\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">`结果2: ${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">term\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}`\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    loading.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> false\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}, { immediate: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">true\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> })\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// watchEffect - 自动追踪依赖\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">watchEffect\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (searchTerm.value) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    document.title \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> `搜索: ${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">searchTerm\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">value\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 组件卸载时停止监听\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// onUnmounted(() => stopWatcher())\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"-生命周期钩子\">🔄 生命周期钩子\u003Ca href=\"#-生命周期钩子\" class=\"heading-anchor-link\" aria-label=\"Link to 🔄 生命周期钩子\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cp>Vue 3 的生命周期钩子在 Composition API 中以函数形式提供。\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"vue\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">h3\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>生命周期演示&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">h3\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>组件状态: {{ status }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>计时器: {{ timer }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">toggleTimer\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>{{ isRunning \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '停止'\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> :\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '开始'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }}计时器&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setup\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  ref,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  onMounted,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  onUpdated,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  onUnmounted,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  onBeforeMount,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  onBeforeUpdate,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  onBeforeUnmount\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">} \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> status\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'初始化'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> timer\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> isRunning\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">false\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> intervalId \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> null\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 组件挂载前\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">onBeforeMount\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'组件即将挂载'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  status.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '准备挂载'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 组件挂载后\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">onMounted\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'组件已挂载'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  status.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '已挂载'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 初始化操作，如 API 调用\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  fetchInitialData\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 组件更新前\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">onBeforeUpdate\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'组件即将更新'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 组件更新后\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">onUpdated\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'组件已更新'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 组件卸载前\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">onBeforeUnmount\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'组件即将卸载'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (intervalId) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    clearInterval\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(intervalId)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 组件卸载后\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">onUnmounted\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'组件已卸载'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> fetchInitialData\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> async\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 模拟 API 调用\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  await\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> Promise\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">resolve\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =>\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setTimeout\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(resolve, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1000\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">))\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  status.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '数据加载完成'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> toggleTimer\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (isRunning.value) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    clearInterval\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(intervalId)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    intervalId \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> null\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">else\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    intervalId \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setInterval\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      timer.value\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">++\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1000\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  isRunning.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> !\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">isRunning.value\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"-组件通信\">🎯 组件通信\u003Ca href=\"#-组件通信\" class=\"heading-anchor-link\" aria-label=\"Link to 🎯 组件通信\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"defineprops-和-defineemits\">defineProps 和 defineEmits\u003Ca href=\"#defineprops-和-defineemits\" class=\"heading-anchor-link\" aria-label=\"Link to defineProps 和 defineEmits\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>父子组件通信的标准方式。\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"vue\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">&#x3C;!-- 子组件: UserCard.vue -->\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> class\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"user-card\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">h3\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>{{ user.name }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">h3\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>年龄: {{ user.age }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>邮箱: {{ user.email }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">handleEdit\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>编辑&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">handleDelete\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>删除&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setup\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 定义 props\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> props\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> defineProps\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  user: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    type: Object,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    required: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">true\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    default\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> ({})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  editable: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    type: Boolean,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    default: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">true\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 定义 emits\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> emit\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> defineEmits\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">([\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'edit'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'delete'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'update'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> handleEdit\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  emit\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'edit'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, props.user.id)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> handleDelete\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">confirm\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'确定要删除吗？'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    emit\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'delete'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, props.user.id)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 带参数的事件\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> handleUpdate\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">field\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">value\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  emit\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'update'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    id: props.user.id,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    field,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    value\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  })\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"vue\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">&#x3C;!-- 父组件使用 -->\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">UserCard\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      v-for\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">user \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">in\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> users\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      :\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">key\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">user.id\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      :\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">user\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">user\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      :\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">editable\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">true\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">edit\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">handleEditUser\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">delete\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">handleDeleteUser\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">update\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">handleUpdateUser\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    />\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setup\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { ref } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> UserCard \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> './UserCard.vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> users\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">([\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { id: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'张三'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, age: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">25\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, email: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'zhangsan@example.com'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { id: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">2\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'李四'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, age: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">30\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, email: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'lisi@example.com'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> handleEditUser\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">userId\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'编辑用户:'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, userId)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> handleDeleteUser\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">userId\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  users.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> users.value.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">filter\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">user\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> user.id \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!==\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> userId)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> handleUpdateUser\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> ({ \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">id\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">field\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">value\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> user\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> users.value.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">find\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">u\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> u.id \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> id)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (user) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    user[field] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> value\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"provide-和-inject\">provide 和 inject\u003Ca href=\"#provide-和-inject\" class=\"heading-anchor-link\" aria-label=\"Link to provide 和 inject\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>跨层级组件通信，避免 prop 钻取。\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"vue\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">&#x3C;!-- 根组件 -->\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">ThemeProvider\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">UserProfile\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> />\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">ThemeProvider\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setup\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { provide, ref, readonly } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> ThemeProvider \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> './ThemeProvider.vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> UserProfile \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> './UserProfile.vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 主题管理\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> theme\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'light'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> changeTheme\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">newTheme\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  theme.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> newTheme\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 用户数据管理\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> currentUser\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  id: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'张三'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  avatar: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'/avatar.jpg'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  preferences: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    language: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'zh-CN'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    notifications: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">true\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 提供给子组件\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">provide\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'theme'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  theme: \u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">readonly\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(theme),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  changeTheme\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">provide\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'user'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  user: \u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">readonly\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(currentUser),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  updateUser\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">updates\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    Object.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">assign\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(currentUser.value, updates)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"vue\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">&#x3C;!-- 深层子组件 -->\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> :\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">class\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"`profile ${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">theme\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}`\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">img\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> :\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">src\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">user.avatar\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> :\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">alt\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">user.name\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">h2\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>{{ user.name }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">h2\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">toggleTheme\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      切换到 {{ theme \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'light'\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> ?\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '暗'\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> :\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '亮'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }} 主题\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">Settings\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> />\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setup\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { inject } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> Settings \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> './Settings.vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 注入依赖\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">theme\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">changeTheme\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> inject\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'theme'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">user\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">updateUser\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> inject\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'user'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> toggleTheme\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  changeTheme\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(theme.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'light'\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> ?\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'dark'\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> :\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'light'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"-模板引用-ref\">🎨 模板引用 ref\u003Ca href=\"#-模板引用-ref\" class=\"heading-anchor-link\" aria-label=\"Link to 🎨 模板引用 ref\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cp>直接访问 DOM 元素或组件实例。\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"vue\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">input\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">      ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"inputRef\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">      v-model\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">inputValue\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">      placeholder\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"点击按钮聚焦\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    >\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">focusInput\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>聚焦输入框&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"containerRef\"\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> class\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"container\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>滚动区域&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> v-for\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">i \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">in\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 50\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> :\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">key\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">i\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>项目 {{ i }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">scrollToTop\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>回到顶部&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    &#x3C;!-- 组件引用 -->\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">ChildComponent\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"childRef\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> />\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">callChildMethod\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>调用子组件方法&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setup\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { ref, onMounted } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> ChildComponent \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> './ChildComponent.vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> inputValue\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> inputRef\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> containerRef\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> childRef\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 聚焦输入框\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> focusInput\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  inputRef.value?.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">focus\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 滚动到顶部\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> scrollToTop\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  containerRef.value?.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">scrollTo\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({ top: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, behavior: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'smooth'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> })\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 调用子组件方法\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> callChildMethod\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  childRef.value?.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">someMethod\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">onMounted\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 组件挂载后访问 DOM\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'输入框元素:'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, inputRef.value)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'容器元素:'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, containerRef.value)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"-工具函数\">🔧 工具函数\u003Ca href=\"#-工具函数\" class=\"heading-anchor-link\" aria-label=\"Link to 🔧 工具函数\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"nexttick\">nextTick\u003Ca href=\"#nexttick\" class=\"heading-anchor-link\" aria-label=\"Link to nextTick\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>等待下次 DOM 更新循环结束后执行回调。\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"vue\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">ul\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"listRef\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">li\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> v-for\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">item \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">in\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> items\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> :\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">key\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">item.id\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        {{ item.text }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">li\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">ul\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">addItem\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>添加项目&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>列表高度: {{ listHeight }}px&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setup\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { ref, nextTick } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> items\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">([\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { id: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, text: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'项目 1'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { id: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">2\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, text: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'项目 2'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> listRef\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> listHeight\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> addItem\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> async\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> newItem\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    id: Date.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">now\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    text: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">`项目 ${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">items\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">value\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> +\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 1\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  items.value.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">push\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(newItem)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 等待 DOM 更新\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  await\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> nextTick\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 现在可以安全地访问更新后的 DOM\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  listHeight.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> listRef.value?.offsetHeight \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">||\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 0\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 滚动到新添加的项目\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> newElement\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> listRef.value?.lastElementChild\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  newElement?.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">scrollIntoView\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({ behavior: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'smooth'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> })\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"unref-和-toref\">unref 和 toRef\u003Ca href=\"#unref-和-toref\" class=\"heading-anchor-link\" aria-label=\"Link to unref 和 toRef\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>处理可能是 ref 或普通值的数据。\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"vue\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>用户名: {{ userName }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>年龄: {{ userAge }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">updateUser\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>更新用户&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setup\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { ref, reactive, toRef, unref } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> user\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> reactive\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'张三'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  age: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">25\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  email: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'zhangsan@example.com'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 将响应式对象的属性转为 ref\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> userName\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> toRef\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(user, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'name'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> userAge\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> toRef\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(user, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'age'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 处理可能是 ref 或普通值的函数\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> getValue\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">maybeRef\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> unref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(maybeRef) \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 如果是 ref 返回 .value，否则返回原值\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> updateUser\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 修改 ref 会同步到原对象\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  userName.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '李四'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  userAge.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 30\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'用户对象:'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, user) \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// { name: '李四', age: 30, email: '...' }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 使用 unref 的实用函数\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> formatUserInfo\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">nameRef\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">ageRef\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> name\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> unref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(nameRef)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> age\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> unref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(ageRef)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> `${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">name\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">} (${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">age\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}岁)`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"-常用指令进阶用法\">🎪 常用指令进阶用法\u003Ca href=\"#-常用指令进阶用法\" class=\"heading-anchor-link\" aria-label=\"Link to 🎪 常用指令进阶用法\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"v-model-修饰符\">v-model 修饰符\u003Ca href=\"#v-model-修饰符\" class=\"heading-anchor-link\" aria-label=\"Link to v-model 修饰符\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"vue\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    &#x3C;!-- 基础用法 -->\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">input\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> v-model\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">message\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> placeholder\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"基础绑定\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    &#x3C;!-- 修饰符 -->\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">input\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> v-model\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">lazy\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">lazyValue\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> placeholder\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"失焦时更新\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">input\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> v-model\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">number\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">numberValue\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> placeholder\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"转为数字\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">input\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> v-model\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">trim\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">trimValue\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> placeholder\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"自动去空格\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    &#x3C;!-- 自定义组件的 v-model -->\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">CustomInput\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> v-model\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">customValue\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> />\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">CustomInput\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> v-model\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">title\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">title\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> v-model\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">content\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">content\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> />\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setup\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { ref } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> CustomInput \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> './CustomInput.vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> message\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> lazyValue\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> numberValue\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> trimValue\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> customValue\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> title\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> content\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"动态指令和参数\">动态指令和参数\u003Ca href=\"#动态指令和参数\" class=\"heading-anchor-link\" aria-label=\"Link to 动态指令和参数\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"vue\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    &#x3C;!-- 动态指令 -->\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> v-bind\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">:[attributeName]=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">attributeValue\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>动态属性&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> v-on\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">:[eventName]=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">handleEvent\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>动态事件&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    &#x3C;!-- 动态参数的实际应用 -->\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">form\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">input\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        v-for\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">field \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">in\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> formFields\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        :\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">key\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">field.name\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">        v-model\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">formData[field.name]\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        :[field.attributeName]=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">field.attributeValue\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        @[field.eventName]=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">field.handler\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        :\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">placeholder\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">field.placeholder\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      >\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">form\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setup\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { ref, reactive } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> attributeName\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'title'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> attributeValue\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'这是一个动态标题'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> eventName\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'click'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> formData\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> reactive\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> formFields\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">([\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'email'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    placeholder: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'邮箱'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    attributeName: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'type'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    attributeValue: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'email'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    eventName: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'blur'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    handler\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">e\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'邮箱失焦:'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, e.target.value)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'phone'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    placeholder: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'手机号'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    attributeName: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'maxlength'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    attributeValue: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'11'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    eventName: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'input'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    handler\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">e\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'手机号输入:'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, e.target.value)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> handleEvent\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'动态事件被触发'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"-性能优化技巧\">🚀 性能优化技巧\u003Ca href=\"#-性能优化技巧\" class=\"heading-anchor-link\" aria-label=\"Link to 🚀 性能优化技巧\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"shallowref-和-shallowreactive\">shallowRef 和 shallowReactive\u003Ca href=\"#shallowref-和-shallowreactive\" class=\"heading-anchor-link\" aria-label=\"Link to shallowRef 和 shallowReactive\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>对于大型数据结构，使用浅响应式可以提升性能。\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"vue\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">h3\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>大型列表优化&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">h3\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">addItems\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>添加1000个项目&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">updateFirstItem\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>更新第一个项目&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>项目总数: {{ items.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">virtual-list\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> :\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">items\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">items\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> />\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setup\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { shallowRef, triggerRef } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 使用 shallowRef 优化大型数组\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> items\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> shallowRef\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">([])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> addItems\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> newItems\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> Array.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">from\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({ length: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">1000\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }, (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">_\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">i\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> ({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    id: Date.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">now\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> i,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">`项目 ${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">items\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">value\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> +\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> i\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> +\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 1\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}`\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    data: { \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">/* 复杂数据 */\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }))\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 直接替换数组，而不是 push\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  items.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">...\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">items.value, \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">...\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">newItems]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> updateFirstItem\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (items.value.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> >\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    // 修改浅响应式数据后手动触发更新\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    items.value[\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">].name \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> `更新的项目 ${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">Date\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">now\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">()\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    triggerRef\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(items) \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 手动触发响应式更新\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"readonly-和-markraw\">readonly 和 markRaw\u003Ca href=\"#readonly-和-markraw\" class=\"heading-anchor-link\" aria-label=\"Link to readonly 和 markRaw\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>保护数据不被修改或标记为非响应式。\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"vue\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setup\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { ref, reactive, readonly, markRaw } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 只读数据\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> config\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> readonly\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  apiUrl: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'https://api.example.com'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  timeout: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">5000\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  retries: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 尝试修改只读数据会发出警告\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// config.apiUrl = 'other-url' // 警告: Set operation on key \"apiUrl\" failed\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 标记为非响应式的对象（如第三方库实例）\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> chart\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> markRaw\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> SomeChartLibrary\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">())\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> map\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> markRaw\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> MapLibrary\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">())\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> state\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> reactive\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  user: { name: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'张三'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  chart, \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 不会被代理\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  map    \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 不会被代理\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"-实用组合式函数示例\">📝 实用组合式函数示例\u003Ca href=\"#-实用组合式函数示例\" class=\"heading-anchor-link\" aria-label=\"Link to 📝 实用组合式函数示例\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"自定义组合式函数\">自定义组合式函数\u003Ca href=\"#自定义组合式函数\" class=\"heading-anchor-link\" aria-label=\"Link to 自定义组合式函数\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// composables/useCounter.js\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { ref, computed } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">export\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> useCounter\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">initialValue\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> count\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(initialValue)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> increment\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> count.value\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">++\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> decrement\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> count.value\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">--\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> reset\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> count.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> initialValue\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> isEven\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> computed\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> count.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">%\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 2\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> ===\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> isPositive\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> computed\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> count.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">>\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    count,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    increment,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    decrement,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    reset,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    isEven,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    isPositive\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// composables/useFetch.js\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { ref, watchEffect } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'vue'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">export\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> useFetch\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">url\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> data\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> error\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> loading\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ref\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">false\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> fetchData\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> async\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    loading.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> true\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    error.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> null\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    try\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> response\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> await\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> fetch\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(url.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">||\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> url)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">response.ok) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">throw\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Error\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(response.statusText)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      data.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> await\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> response.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">json\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">catch\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (err) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      error.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> err.message\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">finally\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      loading.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> false\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  watchEffect\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (url.value \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">||\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> url) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">      fetchData\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  })\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { data, error, loading, refetch: fetchData }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"vue\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">&#x3C;!-- 使用组合式函数 -->\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>计数器: {{ count }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>状态: {{ isEven \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '偶数'\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> :\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '奇数'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }}, {{ isPositive \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '正数'\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> :\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '非正数'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">increment\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>+1&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">decrement\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>-1&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">reset\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>重置&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">h3\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>用户数据&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">h3\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> v-if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">loading\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>加载中...&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> v-else-if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">error\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>错误: {{ error }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> v-else-if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">data\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>用户名: {{ data.name }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>邮箱: {{ data.email }}&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">p\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> @\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">click\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">refetch\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>重新加载&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">div\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">template\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setup\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { useCounter } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '@/composables/useCounter'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { useFetch } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '@/composables/useFetch'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 使用计数器\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">count\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">increment\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">decrement\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">reset\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">isEven\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">isPositive\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> useCounter\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">10\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 使用数据获取\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">data\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">error\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">loading\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">refetch\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> useFetch\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'/api/user/1'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">script\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"-总结\">🎉 总结\u003Ca href=\"#-总结\" class=\"heading-anchor-link\" aria-label=\"Link to 🎉 总结\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"核心优势\">核心优势\u003Ca href=\"#核心优势\" class=\"heading-anchor-link\" aria-label=\"Link to 核心优势\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Cstrong>更好的逻辑复用\u003C/strong> - 通过组合式函数轻松共享逻辑\u003C/li>\n\u003Cli>\u003Cstrong>更清晰的代码组织\u003C/strong> - 相关逻辑可以组织在一起\u003C/li>\n\u003Cli>\u003Cstrong>更好的类型推导\u003C/strong> - TypeScript 支持更完善\u003C/li>\n\u003Cli>\u003Cstrong>更小的包体积\u003C/strong> - 支持 tree-shaking\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"最佳实践\">最佳实践\u003Ca href=\"#最佳实践\" class=\"heading-anchor-link\" aria-label=\"Link to 最佳实践\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Col>\n\u003Cli>\u003Cstrong>优先使用 \u003Ccode>ref()\u003C/code> 和 \u003Ccode>reactive()\u003C/code>\u003C/strong> - 根据数据类型选择合适的响应式 API\u003C/li>\n\u003Cli>\u003Cstrong>合理使用计算属性\u003C/strong> - 复杂的派生状态使用 \u003Ccode>computed()\u003C/code>\u003C/li>\n\u003Cli>\u003Cstrong>善用组合式函数\u003C/strong> - 将可复用逻辑提取为组合式函数\u003C/li>\n\u003Cli>\u003Cstrong>注意性能优化\u003C/strong> - 大型数据使用 \u003Ccode>shallowRef\u003C/code>/\u003Ccode>shallowReactive\u003C/code>\u003C/li>\n\u003Cli>\u003Cstrong>正确处理副作用\u003C/strong> - 使用 \u003Ccode>watch\u003C/code>/\u003Ccode>watchEffect\u003C/code> 处理异步操作\u003C/li>\n\u003C/ol>",{"headings":674,"localImagePaths":744,"remoteImagePaths":745,"frontmatter":746,"imagePaths":749},[675,678,681,684,687,690,693,696,699,702,705,708,711,714,717,720,723,725,728,731,734,737,739,742,743],{"depth":30,"slug":676,"text":677},"vue-3-常用-api-实战指南","Vue 3 常用 API 实战指南",{"depth":54,"slug":679,"text":680},"-composition-api-核心","🚀 Composition API 核心",{"depth":58,"slug":682,"text":683},"ref---响应式引用","ref() - 响应式引用",{"depth":58,"slug":685,"text":686},"reactive---响应式对象","reactive() - 响应式对象",{"depth":58,"slug":688,"text":689},"computed---计算属性","computed() - 计算属性",{"depth":58,"slug":691,"text":692},"watch-和-watcheffect---侦听器","watch() 和 watchEffect() - 侦听器",{"depth":54,"slug":694,"text":695},"-生命周期钩子","🔄 生命周期钩子",{"depth":54,"slug":697,"text":698},"-组件通信","🎯 组件通信",{"depth":58,"slug":700,"text":701},"defineprops-和-defineemits","defineProps 和 defineEmits",{"depth":58,"slug":703,"text":704},"provide-和-inject","provide 和 inject",{"depth":54,"slug":706,"text":707},"-模板引用-ref","🎨 模板引用 ref",{"depth":54,"slug":709,"text":710},"-工具函数","🔧 工具函数",{"depth":58,"slug":712,"text":713},"nexttick","nextTick",{"depth":58,"slug":715,"text":716},"unref-和-toref","unref 和 toRef",{"depth":54,"slug":718,"text":719},"-常用指令进阶用法","🎪 常用指令进阶用法",{"depth":58,"slug":721,"text":722},"v-model-修饰符","v-model 修饰符",{"depth":58,"slug":724,"text":724},"动态指令和参数",{"depth":54,"slug":726,"text":727},"-性能优化技巧","🚀 性能优化技巧",{"depth":58,"slug":729,"text":730},"shallowref-和-shallowreactive","shallowRef 和 shallowReactive",{"depth":58,"slug":732,"text":733},"readonly-和-markraw","readonly 和 markRaw",{"depth":54,"slug":735,"text":736},"-实用组合式函数示例","📝 实用组合式函数示例",{"depth":58,"slug":738,"text":738},"自定义组合式函数",{"depth":54,"slug":740,"text":741},"-总结","🎉 总结",{"depth":58,"slug":227,"text":227},{"depth":58,"slug":481,"text":481},[],[],{"title":664,"description":666,"draft":18,"published":747,"minutes":748},["Date","2025-08-09T00:00:00.000Z"],15,[],"work-docs/uniubi/tplink",{"id":750,"data":752,"body":757,"filePath":758,"digest":759,"rendered":760},{"title":753,"published":754,"description":755,"tags":756,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"TPLink路由器配置指南",["Date","2025-08-09T00:00:00.000Z"],"TPLink路由器认证规则配置、Wi-Fi认证问题解决方案以及各平台认证地址汇总",[],"# TPLink 路由器\n\n## 路由器配置\n\n### 认证规则配置\n\n![image.png](/assets/imgs/tplink_config_portal.png)\n\n### 免认证策略 添加认证地址\n\n以下配置需要2个，一个TCP 一个UDP\n\n![image.png](/assets/imgs/tplink_config_url.png)\n\n## 问题记录\n\n### 华为手机无法进入Wi-Fi认证页面\n\n> 表现为 一直在 connectivitycheck.cbgapp.huawei.com 这个地址加载)\n\n各大平台/终端有Wi-Fi认证地址，这个认证地址会告知用户 Wi-Fi是否需要登录，如果需要登录会跳转到Wi-Fi的认证页面。华为自带浏览器/UC浏览器无法处理手机认证结果。\n\n**Wi-Fi认证流程如下图**\n\n![](/assets/imgs/tplink_portal_flow.jpeg)\n\n解决方式：换QQ浏览器/Chrome。\n可用: QQ浏览器/Chrome浏览器\n不可用: UC浏览器/360浏览器/夸克浏览器/百度\n未测试:  手机厂商自带浏览器与其他\n\n### 各平台Wi-Fi认证地址\n\n1. 通用\n    1. ios/mac [http://captive.apple.com/](http://captive.apple.com/ \"http://captive.apple.com/\")\n    2. win\n       10 [http://www.msftconnecttest.com/redirect](http://www.msftconnecttest.com/redirect \"http://www.msftconnecttest.com/redirect\")\n    3. win\n       11 [http://edge.microsoft.com/captiveportal/generate\\_204](http://edge.microsoft.com/captiveportal/generate_204 \"http://edge.microsoft.com/captiveportal/generate_204\")\n    4. android\n        - [http://www.gstatic.com/generate\\_204](http://www.gstatic.com/generate_204 \"http://www.gstatic.com/generate_204\")\n        - [http://connectivitycheck.gstatic.com/generate\\_204](http://connectivitycheck.gstatic.com/generate_204 \"http://connectivitycheck.gstatic.com/generate_204\")\n2. 第三方\n    1.\n   华为 [http://connectivitycheck.cbg-app.huawei.com](http://connectivitycheck.cbg-app.huawei.com \"http://connectivitycheck.cbg-app.huawei.com\")\n    2.\n   小米 [http://connect.rom.miui.com/generate\\_204](http://connect.rom.miui.com/generate_204 \"http://connect.rom.miui.com/generate_204\")\n    3.\n   vivo [http://wifi.vivo.com.cn/generate\\_204](http://wifi.vivo.com.cn/generate_204 \"http://wifi.vivo.com.cn/generate_204\")\n    4. google ...\n\n### from action\n\n配置了action属性时，form 会将form包裹的表单值提交到 action对应的URL。\n\n```tsx\nconst formRef = useRef\u003CHTMLFormElement>(null);\n\n\u003Cform\n  style={{ display: 'none' }}\n  id=\"formQuestion\"\n  name=\"formQuestion\"\n  method=\"get\"\n  action={`http://${state.wlanacip}:8080/portal/auth`}\n  target=\"_self\"\n  ref={formRef}\n>\n  \u003Cinput\n    type=\"hidden\"\n    id=\"username\"\n    name=\"username\"\n    value={state.username}\n  />\n  \u003Cinput\n    type=\"hidden\"\n    id=\"password\"\n    name=\"password\"\n    value={state.password}\n  />\n\u003C/from>\n\u003Cbutton\n  onClick={() => {\n    if (fromRef.current) {\n      fromRef.current.submit();\n    }\n  }}\n>\n  提交\n\u003C/button>\n```\n\n**问题: 无法获取到URL请求结果**\n\n### jquery get\n\n```ts\nconst parseConfig = (data: string) => {\n  try {\n    const startIndex = data.indexOf('{');\n    const endIndex = data.indexOf('}');\n    const cfg = data.substring(startIndex, endIndex + 1);\n    const cfgPara = $.parseJSON(cfg);\n    if (WIFI_SUCCESS_TIPS.includes(cfgPara.logonTip)) {\n      // ...\n    } else if (WIFI_FAILURE_TIPS.includes(cfgPara.logonTip)) {\n      // ...\n    } else {\n      console.log('未知错误，请联系管理员);\n    }\n  } catch (e) {\n    console.log(e, '未知错误，请联系管理员');\n  }\n};\n\n\nconst { ssid, ...restState } = state;\n$.get(\n  `http://${\n    state.wlanacip\n  }:8080/portal/auth?${QueryString.stringify({\n    ...restState,\n    username: userName,\n    password: passWord,\n    ssid: decodeURIComponent(ssid),\n    authtype: 5,\n  })}`,\n  parseConfig,\n);\n```\n\njquery 的 get 方法可以得到 \\_本地请求 \\_的返回结果\n\n### iframe 嵌套、postMessage\n\n都因为 跨域获取不到认证请求结果。","src/content/blog/work-docs/uniubi/TPLink.md","b13bddc9c88d9296",{"html":761,"metadata":762},"\u003Ch1 id=\"tplink-路由器\">TPLink 路由器\u003Ca href=\"#tplink-路由器\" class=\"heading-anchor-link\" aria-label=\"Link to TPLink 路由器\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>\n\u003Ch2 id=\"路由器配置\">路由器配置\u003Ca href=\"#路由器配置\" class=\"heading-anchor-link\" aria-label=\"Link to 路由器配置\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"认证规则配置\">认证规则配置\u003Ca href=\"#认证规则配置\" class=\"heading-anchor-link\" aria-label=\"Link to 认证规则配置\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cfigure>\u003Cimg src=\"/assets/imgs/tplink_config_portal.png\" alt=\"image.png\">\u003Cfigcaption>image.png\u003C/figcaption>\u003C/figure>\n\u003Ch3 id=\"免认证策略-添加认证地址\">免认证策略 添加认证地址\u003Ca href=\"#免认证策略-添加认证地址\" class=\"heading-anchor-link\" aria-label=\"Link to 免认证策略 添加认证地址\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>以下配置需要2个，一个TCP 一个UDP\u003C/p>\n\u003Cfigure>\u003Cimg src=\"/assets/imgs/tplink_config_url.png\" alt=\"image.png\">\u003Cfigcaption>image.png\u003C/figcaption>\u003C/figure>\n\u003Ch2 id=\"问题记录\">问题记录\u003Ca href=\"#问题记录\" class=\"heading-anchor-link\" aria-label=\"Link to 问题记录\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"华为手机无法进入wi-fi认证页面\">华为手机无法进入Wi-Fi认证页面\u003Ca href=\"#华为手机无法进入wi-fi认证页面\" class=\"heading-anchor-link\" aria-label=\"Link to 华为手机无法进入Wi-Fi认证页面\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cblockquote>\n\u003Cp>表现为 一直在 connectivitycheck.cbgapp.huawei.com 这个地址加载)\u003C/p>\n\u003C/blockquote>\n\u003Cp>各大平台/终端有Wi-Fi认证地址，这个认证地址会告知用户 Wi-Fi是否需要登录，如果需要登录会跳转到Wi-Fi的认证页面。华为自带浏览器/UC浏览器无法处理手机认证结果。\u003C/p>\n\u003Cp>\u003Cstrong>Wi-Fi认证流程如下图\u003C/strong>\u003C/p>\n\u003Cp>\u003Cimg src=\"/assets/imgs/tplink_portal_flow.jpeg\" alt=\"\">\u003C/p>\n\u003Cp>解决方式：换QQ浏览器/Chrome。\n可用: QQ浏览器/Chrome浏览器\n不可用: UC浏览器/360浏览器/夸克浏览器/百度\n未测试:  手机厂商自带浏览器与其他\u003C/p>\n\u003Ch3 id=\"各平台wi-fi认证地址\">各平台Wi-Fi认证地址\u003Ca href=\"#各平台wi-fi认证地址\" class=\"heading-anchor-link\" aria-label=\"Link to 各平台Wi-Fi认证地址\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Col>\n\u003Cli>通用\n\u003Col>\n\u003Cli>ios/mac \u003Ca href=\"http://captive.apple.com/\" title=\"http://captive.apple.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">http://captive.apple.com/\u003C/a>\u003C/li>\n\u003Cli>win\n10 \u003Ca href=\"http://www.msftconnecttest.com/redirect\" title=\"http://www.msftconnecttest.com/redirect\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">http://www.msftconnecttest.com/redirect\u003C/a>\u003C/li>\n\u003Cli>win\n11 \u003Ca href=\"http://edge.microsoft.com/captiveportal/generate_204\" title=\"http://edge.microsoft.com/captiveportal/generate_204\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">http://edge.microsoft.com/captiveportal/generate_204\u003C/a>\u003C/li>\n\u003Cli>android\n\u003Cul>\n\u003Cli>\u003Ca href=\"http://www.gstatic.com/generate_204\" title=\"http://www.gstatic.com/generate_204\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">http://www.gstatic.com/generate_204\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"http://connectivitycheck.gstatic.com/generate_204\" title=\"http://connectivitycheck.gstatic.com/generate_204\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">http://connectivitycheck.gstatic.com/generate_204\u003C/a>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ol>\n\u003C/li>\n\u003Cli>第三方\n1.\n华为 \u003Ca href=\"http://connectivitycheck.cbg-app.huawei.com\" title=\"http://connectivitycheck.cbg-app.huawei.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">http://connectivitycheck.cbg-app.huawei.com\u003C/a>\n2.\n小米 \u003Ca href=\"http://connect.rom.miui.com/generate_204\" title=\"http://connect.rom.miui.com/generate_204\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">http://connect.rom.miui.com/generate_204\u003C/a>\n3.\nvivo \u003Ca href=\"http://wifi.vivo.com.cn/generate_204\" title=\"http://wifi.vivo.com.cn/generate_204\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">http://wifi.vivo.com.cn/generate_204\u003C/a>\n4. google …\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"from-action\">from action\u003Ca href=\"#from-action\" class=\"heading-anchor-link\" aria-label=\"Link to from action\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>配置了action属性时，form 会将form包裹的表单值提交到 action对应的URL。\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"tsx\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> formRef\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> useRef\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">HTMLFormElement\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">form\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  style\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">{{ display: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'none'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  id\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"formQuestion\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  name\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"formQuestion\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  method\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"get\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  action\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">{\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">`http://${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">state\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">wlanacip\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}:8080/portal/auth`\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  target\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"_self\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  ref\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">{formRef}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">input\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    type\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"hidden\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    id\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"username\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    name\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"username\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    value\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">{state.username}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  />\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">input\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    type\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"hidden\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    id\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"password\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    name\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"password\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    value\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">{state.password}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  />\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">from\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  onClick\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">{() \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (fromRef.current) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      fromRef.current.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">submit\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  提交\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#85E89D\">button\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cp>\u003Cstrong>问题: 无法获取到URL请求结果\u003C/strong>\u003C/p>\n\u003Ch3 id=\"jquery-get\">jquery get\u003Ca href=\"#jquery-get\" class=\"heading-anchor-link\" aria-label=\"Link to jquery get\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"ts\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> parseConfig\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">data\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  try\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> startIndex\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> data.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">indexOf\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'{'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> endIndex\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> data.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">indexOf\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'}'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> cfg\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> data.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">substring\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(startIndex, endIndex \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> cfgPara\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> $.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">parseJSON\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(cfg);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">WIFI_SUCCESS_TIPS\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">includes\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(cfgPara.logonTip)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">      // ...\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">else\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">WIFI_FAILURE_TIPS\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">includes\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(cfgPara.logonTip)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">      // ...\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">else\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'未知错误，请联系管理员)\u003C/span>\u003Cspan style=\"color:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  } \u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">catch\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (e) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    console.log(e, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'未知错误，请联系管理员'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">const { ssid, ...restState } = state;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">$.get(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">  `http://${\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    state\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">wlanacip\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">  }:8080/portal/auth?${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">QueryString\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">stringify\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    ...\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">restState\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">    username: \u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">userName\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">    password: \u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">passWord\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">    ssid: \u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">decodeURIComponent\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">(\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">ssid\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">    authtype: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">5\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">  })\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}`\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  parseConfig,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cp>jquery 的 get 方法可以得到 _本地请求 _的返回结果\u003C/p>\n\u003Ch3 id=\"iframe-嵌套postmessage\">iframe 嵌套、postMessage\u003Ca href=\"#iframe-嵌套postmessage\" class=\"heading-anchor-link\" aria-label=\"Link to iframe 嵌套、postMessage\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>都因为 跨域获取不到认证请求结果。\u003C/p>",{"headings":763,"localImagePaths":791,"remoteImagePaths":792,"frontmatter":793,"imagePaths":795},[764,767,769,771,774,776,779,782,785,788],{"depth":30,"slug":765,"text":766},"tplink-路由器","TPLink 路由器",{"depth":54,"slug":768,"text":768},"路由器配置",{"depth":58,"slug":770,"text":770},"认证规则配置",{"depth":58,"slug":772,"text":773},"免认证策略-添加认证地址","免认证策略 添加认证地址",{"depth":54,"slug":775,"text":775},"问题记录",{"depth":58,"slug":777,"text":778},"华为手机无法进入wi-fi认证页面","华为手机无法进入Wi-Fi认证页面",{"depth":58,"slug":780,"text":781},"各平台wi-fi认证地址","各平台Wi-Fi认证地址",{"depth":58,"slug":783,"text":784},"from-action","from action",{"depth":58,"slug":786,"text":787},"jquery-get","jquery get",{"depth":58,"slug":789,"text":790},"iframe-嵌套postmessage","iframe 嵌套、postMessage",[],[],{"title":753,"description":755,"draft":18,"published":794,"minutes":54},["Date","2025-08-09T00:00:00.000Z"],[],"work-docs/uniubi/cancel-request",{"id":796,"data":798,"body":803,"filePath":804,"digest":805,"rendered":806},{"title":799,"published":800,"description":801,"tags":802,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"取消重复请求的实现方案",["Date","2025-08-09T00:00:00.000Z"],"使用AbortController和axios cancelToken防止重复请求，提升应用性能",[],"# 取消重复请求\n\n1. 请求发出，以 url + params 生成 请求的key，将key添加到 队列中。\n2. 请求完成，将key 从队列中删除。\n3. 请求未完成，再次发出请求，判断队列中是否存在key，若存在，将请求取消。\n4. 可通过设置白名单规避取消重复请求的逻辑。\n\n## 使用 AbortController\n\n```ts\n// 请求队列\nconst pendingRequests = new Map();\n\nfunction hashObject(obj: unknown): string {\n  const str = JSON.stringify(obj);\n  // 使用简单的哈希算法，在实际使用时可以选择 crypto\n  return str.split('').reduce((hash, char) => {\n    return ((hash \u003C\u003C 5) - hash) + char.charCodeAt(0) | 0;\n  }, 0).toString(36);\n}\n\n// 根据请求得到的唯一值，用于取消重复请求\nfunction getRequestKey(\n  url: string,\n  { method, params, data }: AxiosRequestConfig,\n): string {\n  // 使用 URL 对象处理 url\n  const urlObj = new URL(url, window.location.origin);\n\n  // 使用 crypto 生成更短的唯一标识\n  const paramsHash = params ? hashObject(params) : '';\n  const dataHash = data ? hashObject(data) : '';\n\n  return `${method}:${urlObj.pathname}:${paramsHash}:${dataHash}`;\n}\n\n// 生成请求键值\nconst requestKey = getRequestKey(url, config);\nconst { signal } = controller;\nconfig.signal = signal;\n// 如果重复请求,取消前一个\nif (pendingRequests.has(requestKey)) {\n  pendingRequests.get(requestKey).abort();\n}\npendingRequests.set(requestKey, controller);\n\n```\n\n## ~~使用 axios cancelToken~~\n\n```ts\nconst WHITE_LIST: string[] = [];\n\n// 已发请求\nconst pendingRequest = new Map();\n// 请求发出，添加到队列\nconst addPendingRequest = (config: AxiosRequestConfig) => {\n  const requestKey = generateReqKey(config);\n  config.cancelToken =\n    config.cancelToken ||\n    new axios.CancelToken((cancel) => {\n      if (!pendingRequest.has(requestKey)) {\n        pendingRequest.set(requestKey, cancel);\n      }\n    });\n};\n\n// 请求完成，移除请求\nconst removePendingRequest = (config: AxiosRequestConfig) => {\n  const requestKey = generateReqKey(config);\n  // 检查是否存在重复请求，若存在则取消已发的请求\n  if (pendingRequest.has(requestKey)) {\n    const cancelToken = pendingRequest.get(requestKey);\n    cancelToken(requestKey);\n    pendingRequest.delete(requestKey);\n  }\n};\n\n// 根据请求URL以及参数生成Key(请求时间戳要注意)\nconst generateReqKey = (config: AxiosRequestConfig) => {\n  const { method, url, params, data } = config;\n  const newParams = _.omit(params, ['t']);\n  return [method, url, qs.stringify(newParams), qs.stringify(data)].join('&');\n};\n\n\nconst service = axios.create({\n  baseURL: process.env.BASE_API, // api的base_url\n  // timeout: 5000, // request timeout\n});\n\nservice.interceptors.request.use((config) => {\n  if (!WHITE_LIST.includes(config.url as string)) {\n    removePendingRequest(config);\n    addPendingRequest(config);\n  }\n})\n\nservice.interceptors.response.use((config) => {\n  // 从pendingRequest对象中移除请求\n  removePendingRequest(response.config);\n})\n```","src/content/blog/work-docs/uniubi/cancel-request.md","bef58c76c3fa92a4",{"html":807,"metadata":808},"\u003Ch1 id=\"取消重复请求\">取消重复请求\u003Ca href=\"#取消重复请求\" class=\"heading-anchor-link\" aria-label=\"Link to 取消重复请求\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>\n\u003Col>\n\u003Cli>请求发出，以 url + params 生成 请求的key，将key添加到 队列中。\u003C/li>\n\u003Cli>请求完成，将key 从队列中删除。\u003C/li>\n\u003Cli>请求未完成，再次发出请求，判断队列中是否存在key，若存在，将请求取消。\u003C/li>\n\u003Cli>可通过设置白名单规避取消重复请求的逻辑。\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"使用-abortcontroller\">使用 AbortController\u003Ca href=\"#使用-abortcontroller\" class=\"heading-anchor-link\" aria-label=\"Link to 使用 AbortController\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"ts\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 请求队列\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> pendingRequests\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Map\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> hashObject\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">obj\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> unknown\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> str\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> JSON\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">stringify\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(obj);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 使用简单的哈希算法，在实际使用时可以选择 crypto\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> str.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">split\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">).\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">reduce\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">((\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">hash\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">char\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> ((hash \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x3C;&#x3C;\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 5\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">-\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> hash) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> char.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">charCodeAt\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">).\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">toString\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">36\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 根据请求得到的唯一值，用于取消重复请求\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> getRequestKey\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">  url\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">method\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">params\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">data\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> AxiosRequestConfig\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 使用 URL 对象处理 url\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> urlObj\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> URL\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(url, window.location.origin);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 使用 crypto 生成更短的唯一标识\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> paramsHash\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> params \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> hashObject\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(params) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> ''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> dataHash\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> data \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> hashObject\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(data) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> ''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> `${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">method\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}:${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">urlObj\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">pathname\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}:${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">paramsHash\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}:${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">dataHash\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}`\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 生成请求键值\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> requestKey\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> getRequestKey\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(url, config);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">signal\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> controller;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">config.signal \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> signal;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 如果重复请求,取消前一个\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (pendingRequests.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">has\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(requestKey)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  pendingRequests.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">get\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(requestKey).\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">abort\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">pendingRequests.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">set\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(requestKey, controller);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"使用-axios-canceltoken\">\u003Cdel>使用 axios cancelToken\u003C/del>\u003Ca href=\"#使用-axios-canceltoken\" class=\"heading-anchor-link\" aria-label=\"Link to 使用 axios cancelToken\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"ts\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> WHITE_LIST\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">[] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 已发请求\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> pendingRequest\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Map\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 请求发出，添加到队列\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> addPendingRequest\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">config\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> AxiosRequestConfig\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> requestKey\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> generateReqKey\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(config);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  config.cancelToken \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    config.cancelToken \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">||\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    new\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> axios.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">CancelToken\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">((\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">cancel\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">pendingRequest.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">has\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(requestKey)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        pendingRequest.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">set\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(requestKey, cancel);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 请求完成，移除请求\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> removePendingRequest\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">config\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> AxiosRequestConfig\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> requestKey\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> generateReqKey\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(config);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 检查是否存在重复请求，若存在则取消已发的请求\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (pendingRequest.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">has\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(requestKey)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> cancelToken\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> pendingRequest.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">get\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(requestKey);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    cancelToken\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(requestKey);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    pendingRequest.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">delete\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(requestKey);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 根据请求URL以及参数生成Key(请求时间戳要注意)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> generateReqKey\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">config\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> AxiosRequestConfig\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">method\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">url\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">params\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">data\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> config;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> newParams\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> _.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">omit\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(params, [\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'t'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [method, url, qs.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">stringify\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(newParams), qs.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">stringify\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(data)].\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">join\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'&#x26;'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> service\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> axios.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">create\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  baseURL: process.env.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">BASE_API\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// api的base_url\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // timeout: 5000, // request timeout\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">});\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">service.interceptors.request.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">use\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">((\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">config\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">WHITE_LIST\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">includes\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(config.url \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">as\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    removePendingRequest\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(config);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    addPendingRequest\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(config);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">service.interceptors.response.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">use\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">((\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">config\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 从pendingRequest对象中移除请求\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  removePendingRequest\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(response.config);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">})\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>",{"headings":809,"localImagePaths":818,"remoteImagePaths":819,"frontmatter":820,"imagePaths":822},[810,812,815],{"depth":30,"slug":811,"text":811},"取消重复请求",{"depth":54,"slug":813,"text":814},"使用-abortcontroller","使用 AbortController",{"depth":54,"slug":816,"text":817},"使用-axios-canceltoken","使用 axios cancelToken",[],[],{"title":799,"description":801,"draft":18,"published":821,"minutes":54},["Date","2025-08-09T00:00:00.000Z"],[],"work-docs/uniubi/encapsulated-axios",{"id":823,"data":825,"body":830,"filePath":831,"digest":832,"rendered":833},{"title":826,"published":827,"description":828,"tags":829,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"Axios封装与请求管理",["Date","2025-08-09T00:00:00.000Z"],"TypeScript实现的Axios封装方案，包含错误处理、请求去重和状态管理",[],"# 封装 axios 方法\n\n```ts\nimport { AESToken } from '.';\nimport type { AxiosRequestConfig } from 'axios';\nimport axios from 'axios';\n\nconst REQUEST_METHOD = {\n  Get: 'GET',\n  Post: 'POST',\n  Delete: 'DELETE',\n  Put: 'PUT',\n}\n\ntype Method = (typeof REQUEST_METHOD)[keyof typeof REQUEST_METHOD];\n\n// 用于转发请求的代理地址\nconst BASE_LINE_PROXY_PATH = '/api';\n// 用于 token 加密（基线）\nconst BASE_LINE_KEY_24 = 'HKCADQN7E5WJ3KQRPACNZ3QH';\n\n// 取消请求白名单\nconst CANCEL_WHITE_LIST: Array\u003C{ path: string, method: Method }> = [];\n\n// 超时时间\nconst TIMEOUT = 5 * 1000;\n\n// token 报错\nconst TOKEN_ERROR_STATUS = 3001;\n\n// 请求队列\nconst pendingRequests = new Map();\n\n// token 请求状态码\nconst HttpStatus = {\n  OK: 200,\n  Redirection: 300,\n  OK_OTHER: 9200,\n  BadRequest: 400,\n  Unauthorized: 401,\n  Forbidden: 403,\n  NotFound: 404,\n  InternalServerError: 500,\n  UnKnownError: 9300,\n  ClientError: 9400,\n  ServerError: 9500,\n} as const;\n\ntype HttpStatus = (typeof HttpStatus)[keyof typeof HttpStatus];\n\n// https 状态提示语\nconst HttpStatusMessage = new Map\u003CHttpStatus, string>([\n  [HttpStatus.BadRequest, ['参数错误']],\n  [HttpStatus.Unauthorized, ['未授权']],\n  [HttpStatus.Forbidden, ['禁止访问']],\n  [HttpStatus.NotFound, ['请求不存在']],\n  [HttpStatus.InternalServerError, ['服务器错误']],\n  [HttpStatus.ClientError, ['客户端错误']],\n  [HttpStatus.ServerError, ['服务器错误']],\n  [HttpStatus.UnKnownError, ['未知错误']],\n]);\n\nfunction hashObject(obj: unknown): string {\n  const str = JSON.stringify(obj);\n  // 使用简单的哈希算法，在实际使用时可以选择 crypto\n  return str.split('').reduce((hash, char) => {\n    return ((hash \u003C\u003C 5) - hash) + char.charCodeAt(0) | 0;\n  }, 0).toString(36);\n}\n\n// 根据请求得到的唯一值，用于取消重复请求\nfunction getRequestKey(\n  url: string,\n  { method, params, data }: AxiosRequestConfig,\n): string {\n  // 使用 URL 对象处理 url\n  const urlObj = new URL(url, window.location.origin);\n\n  // 使用 crypto 生成更短的唯一标识\n  const paramsHash = params ? hashObject(params) : '';\n  const dataHash = data ? hashObject(data) : '';\n\n  return `${method}:${urlObj.pathname}:${paramsHash}:${dataHash}`;\n}\n\nfunction handleError(error: Error) {\n  if (axios.isCancel(error)) {\n    console.log('请求取消的错误', error.message);\n  } else {\n    console.log('其他未知的错误', (error as Error).message);\n  }\n}\n\nfunction getHttpStatus(statusCode: number): HttpStatus {\n  // 请求完成\n  if (statusCode === HttpStatus.OK) {\n    return HttpStatus.OK;\n  }\n\n  if (statusCode > HttpStatus.OK && statusCode \u003C HttpStatus.Redirection) {\n    return HttpStatus.OK_OTHER;\n  }\n\n  if (statusCode >= HttpStatus.Redirection && statusCode \u003C HttpStatus.BadRequest) {\n    return HttpStatus.Redirection;\n  }\n\n  if (statusCode >= HttpStatus.BadRequest && statusCode \u003C HttpStatus.ServerError) {\n    switch (statusCode) {\n      case HttpStatus.BadRequest:\n        return HttpStatus.BadRequest;\n      case HttpStatus.Unauthorized:\n        return HttpStatus.Unauthorized;\n      case HttpStatus.Forbidden:\n        return HttpStatus.Forbidden;\n      case HttpStatus.NotFound:\n        return HttpStatus.NotFound;\n      default:\n        return HttpStatus.ClientError;\n    }\n  }\n\n  if (statusCode > HttpStatus.InternalServerError) {\n    return HttpStatus.ServerError;\n  }\n\n  return HttpStatus.UnKnownError;\n}\n\nexport default async function request(url: string, config: AxiosRequestConfig) {\n  const controller = new AbortController();\n  // 生成请求键值\n  const requestKey = getRequestKey(url, config);\n  const { signal } = controller;\n  config.signal = signal;\n  // 如果重复请求 且不是白名单中的请求路径,取消前一个\n  if (pendingRequests.has(requestKey) && !CANCEL_WHITE_LIST.some(item => item.path === url && item.method === config.method)) {\n    pendingRequests.get(requestKey).abort();\n  }\n  pendingRequests.set(requestKey, controller);\n\n  const secret = AESToken(BASE_LINE_KEY_24);\n  const { headers = {}, params: configParams, ...axiosRequestConfig } = config;\n\n  // 防止 GET 请求缓存GET\n  const t = new Date().getTime();\n  const isGetRequest = config.method === 'GET';\n  const params = isGetRequest ? { ...(configParams || {}), t } : { t };\n  try {\n    const response = await axios(url, {\n      headers: {\n        ...headers,\n        token: secret,\n      },\n      ...axiosRequestConfig,\n      baseURL: BASE_LINE_PROXY_PATH,\n      timeout: TIMEOUT,\n      params: isGetRequest ? params : configParams,\n    });\n    const { status } = response;\n    const httpStatus = getHttpStatus(status);\n    const httpStatusMessage = HttpStatusMessage.get(httpStatus);\n\n    if ([HttpStatus.OK, HttpStatus.OK_OTHER, HttpStatus.Redirection].includes(httpStatus)) {\n      if (!response.data.success && response.data.status === TOKEN_ERROR_STATUS) {\n        return null;\n      }\n      if (!response.data.success) {\n        return null;\n      }\n      return response.data;\n    } else {\n      const message = httpStatusMessage?.[0] ?? '未知错误';\n      return new Error(message);\n    }\n  } catch (error) {\n    handleError(error as Error);\n    throw error;\n  } finally {\n    pendingRequests.delete(requestKey);\n  }\n}\n```","src/content/blog/work-docs/uniubi/encapsulated-axios.md","fdfc200535812f7f",{"html":834,"metadata":835},"\u003Ch1 id=\"封装-axios-方法\">封装 axios 方法\u003Ca href=\"#封装-axios-方法\" class=\"heading-anchor-link\" aria-label=\"Link to 封装 axios 方法\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"ts\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { AESToken } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '.'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> type\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { AxiosRequestConfig } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'axios'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">import\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> axios \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">from\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'axios'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> REQUEST_METHOD\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  Get: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'GET'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  Post: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'POST'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  Delete: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'DELETE'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  Put: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'PUT'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">type\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Method\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">typeof\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> REQUEST_METHOD\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)[\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">keyof\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> typeof\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> REQUEST_METHOD\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 用于转发请求的代理地址\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> BASE_LINE_PROXY_PATH\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '/api'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 用于 token 加密（基线）\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> BASE_LINE_KEY_24\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'HKCADQN7E5WJ3KQRPACNZ3QH'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 取消请求白名单\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> CANCEL_WHITE_LIST\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Array\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;{ \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">path\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">method\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Method\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }> \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 超时时间\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> TIMEOUT\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 5\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> *\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 1000\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// token 报错\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> TOKEN_ERROR_STATUS\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 3001\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 请求队列\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> pendingRequests\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Map\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// token 请求状态码\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> HttpStatus\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  OK: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">200\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  Redirection: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">300\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  OK_OTHER: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">9200\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  BadRequest: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">400\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  Unauthorized: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">401\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  Forbidden: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">403\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  NotFound: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">404\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  InternalServerError: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">500\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  UnKnownError: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">9300\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  ClientError: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">9400\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  ServerError: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">9500\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">} \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">as\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> const\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">type\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> HttpStatus\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">typeof\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus)[\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">keyof\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> typeof\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// https 状态提示语\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> HttpStatusMessage\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Map\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">HttpStatus\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">>([\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  [HttpStatus.BadRequest, [\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'参数错误'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  [HttpStatus.Unauthorized, [\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'未授权'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  [HttpStatus.Forbidden, [\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'禁止访问'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  [HttpStatus.NotFound, [\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'请求不存在'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  [HttpStatus.InternalServerError, [\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'服务器错误'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  [HttpStatus.ClientError, [\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'客户端错误'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  [HttpStatus.ServerError, [\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'服务器错误'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  [HttpStatus.UnKnownError, [\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'未知错误'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">]);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> hashObject\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">obj\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> unknown\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> str\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> JSON\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">stringify\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(obj);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 使用简单的哈希算法，在实际使用时可以选择 crypto\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> str.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">split\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">).\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">reduce\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">((\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">hash\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">char\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> ((hash \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x3C;&#x3C;\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 5\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">-\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> hash) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">+\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> char.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">charCodeAt\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">|\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">).\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">toString\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">36\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 根据请求得到的唯一值，用于取消重复请求\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> getRequestKey\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">  url\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  { \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">method\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">params\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">data\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> }\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> AxiosRequestConfig\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 使用 URL 对象处理 url\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> urlObj\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> URL\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(url, window.location.origin);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 使用 crypto 生成更短的唯一标识\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> paramsHash\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> params \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> hashObject\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(params) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> ''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> dataHash\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> data \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> hashObject\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(data) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> ''\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> `${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">method\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}:${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">urlObj\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">.\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">pathname\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}:${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">paramsHash\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}:${\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">dataHash\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">}`\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> handleError\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">error\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Error\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (axios.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">isCancel\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(error)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'请求取消的错误'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, error.message);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">else\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'其他未知的错误'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, (error \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">as\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Error\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">).message);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> getHttpStatus\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">statusCode\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> number\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> HttpStatus\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 请求完成\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (statusCode \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">OK\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">OK\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (statusCode \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">OK\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> &#x26;&#x26;\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> statusCode \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x3C;\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.Redirection) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">OK_OTHER\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (statusCode \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">>=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.Redirection \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x26;&#x26;\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> statusCode \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x3C;\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.BadRequest) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.Redirection;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (statusCode \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">>=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.BadRequest \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x26;&#x26;\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> statusCode \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x3C;\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.ServerError) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    switch\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (statusCode) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      case\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.BadRequest:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.BadRequest;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      case\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.Unauthorized:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.Unauthorized;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      case\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.Forbidden:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.Forbidden;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      case\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.NotFound:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.NotFound;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      default\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.ClientError;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (statusCode \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.InternalServerError) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.ServerError;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatus.UnKnownError;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">export\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> default\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> async\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> function\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> request\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">url\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">config\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> AxiosRequestConfig\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> controller\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> AbortController\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 生成请求键值\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> requestKey\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> getRequestKey\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(url, config);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">signal\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> controller;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  config.signal \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> signal;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 如果重复请求 且不是白名单中的请求路径,取消前一个\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (pendingRequests.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">has\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(requestKey) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x26;&#x26;\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> !\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">CANCEL_WHITE_LIST\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">some\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">item\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> item.path \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> url \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x26;&#x26;\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> item.method \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> config.method)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    pendingRequests.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">get\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(requestKey).\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">abort\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  pendingRequests.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">set\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(requestKey, controller);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> secret\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> AESToken\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">BASE_LINE_KEY_24\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">headers\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {}, \u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">params\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">configParams\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">...\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">axiosRequestConfig\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> config;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 防止 GET 请求缓存GET\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> t\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Date\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">().\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">getTime\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> isGetRequest\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> config.method \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'GET'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> params\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> isGetRequest \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">...\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(configParams \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">||\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {}), t } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { t };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  try\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> response\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> await\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> axios\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(url, {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      headers: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        ...\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">headers,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">        token: secret,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      ...\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">axiosRequestConfig,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      baseURL: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">BASE_LINE_PROXY_PATH\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      timeout: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">TIMEOUT\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      params: isGetRequest \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">?\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> params \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> configParams,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> { \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">status\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> response;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> httpStatus\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> getHttpStatus\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(status);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> httpStatusMessage\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> HttpStatusMessage.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">get\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(httpStatus);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> ([HttpStatus.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">OK\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, HttpStatus.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">OK_OTHER\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, HttpStatus.Redirection].\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">includes\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(httpStatus)) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">response.data.success \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">&#x26;&#x26;\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> response.data.status \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> TOKEN_ERROR_STATUS\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        return\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">response.data.success) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">        return\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> response.data;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">else\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> message\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> httpStatusMessage?.[\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">??\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '未知错误'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      return\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Error\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(message);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">catch\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (error) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    handleError\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(error \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">as\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Error\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    throw\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> error;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">finally\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    pendingRequests.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">delete\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(requestKey);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>",{"headings":836,"localImagePaths":840,"remoteImagePaths":841,"frontmatter":842,"imagePaths":844},[837],{"depth":30,"slug":838,"text":839},"封装-axios-方法","封装 axios 方法",[],[],{"title":826,"description":828,"draft":18,"published":843,"minutes":58},["Date","2025-08-09T00:00:00.000Z"],[],"work-docs/uniubi/mini-bluetooth",{"id":845,"data":847,"body":852,"filePath":853,"assetImports":854,"digest":856,"rendered":857},{"title":848,"published":849,"description":850,"tags":851,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"小程序蓝牙开发指南",["Date","2025-08-09T00:00:00.000Z"],"微信小程序蓝牙通信协议实现，包含中回回弹仪设备连接和数据交互",[],"# 小程序蓝牙\n\n## 目录\n\n- [中回 回弹仪](#中回-回弹仪)\n\n## 中回 回弹仪\n\n文档 [中回无线蓝牙数字回弹仪通信协议（V1.2） .pdf](\u003Chttps://www.yuque.com/attachments/yuque/0/2023/pdf/22890312/1685598468945-64c89754-eb02-435c-8cc2-99a6e16eefc7.pdf?_lake_card={\"src\"%3A\"https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fpdf%2F22890312%2F1685598468945-64c89754-eb02-435c-8cc2-99a6e16eefc7.pdf\"%2C\"name\"%3A\"中回无线蓝牙数字回弹仪通信协议（V1.2） .pdf\"%2C\"size\"%3A207255%2C\"ext\"%3A\"pdf\"%2C\"source\"%3A\"\"%2C\"status\"%3A\"done\"%2C\"download\"%3Atrue%2C\"taskId\"%3A\"u7366cbb8-cfea-4082-b609-e33a8475131\"%2C\"taskType\"%3A\"transfer\"%2C\"type\"%3A\"application%2Fpdf\"%2C\"mode\"%3A\"title\"%2C\"id\"%3A\"u00dc7892\"%2C\"card\"%3A\"file\"}> \"中回无线蓝牙数字回弹仪通信协议（V1.2） .pdf\")\n\n![image.png](https://cdn.nlark.com/yuque/0/2023/png/22890312/1685438292734-02e1d8de-8c24-422d-a127-a832703faf58.png#averageHue=%233c2e2b\\&clientId=u88b57cb8-32c0-4\\&from=paste\\&height=737\\&id=uea56a64e\\&originHeight=737\\&originWidth=877\\&originalType=binary\\&ratio=1\\&rotation=0\\&showTitle=false\\&size=249979\\&status=done\\&style=none\\&taskId=u553b9e09-3edf-4484-8451-9747372228f\\&title=\\&width=877 \"image.png\")\n\n```typescript\n// 监听信道\nconst startNotify = (hexValues: number[]) => {\n  Taro.notifyBLECharacteristicValueChange({\n    state: true,\n    deviceId: deviceId.current,\n    serviceId: serviceId.current,\n    characteristicId: notifyId.current,\n    success: () => {},\n    fail: () => {},\n    complete: () => {\n      startWrite(hexValues);\n    },\n  });\n  Taro.onBLECharacteristicValueChange(result => {\n    const value = BufferToString(result.value);\n    console.log(result, value, 'onBLECharacteristicValueChange');\n  });\n};\n\n// 发送信令\nconst startWrite = (message: number[]) => {\n  // 创建一个Uint8Array\n  const uint8Array = new Uint8Array(message);\n  // 将Uint8Array转换为ArrayBuffer\n  const arrayBuffer = uint8Array.buffer;\n  Taro.writeBLECharacteristicValue({\n    deviceId: deviceId.current,\n    serviceId: serviceId.current,\n    characteristicId: writeId.current,\n    value: arrayBuffer,\n    success: () => {\n      console.log('写入成功');\n    },\n    fail: () => {\n      console.log('写入失败');\n    },\n  });\n};\n\n  // 通知设备：获取设备信息\n  const getDeviceInfo = () => {\n    const hexValues = [0x24, 0x52, 0x44, 0x49, 0xdf, 0x23, 0x0d, 0x0a];\n    startNotify(hexValues);\n  };\n\n  // 通知设备：准备采集数据\n  const prepare = () => {\n    const hexValues = [0x24, 0x53, 0x52, 0x53, 0xf8, 0x23, 0x0d, 0x0a];\n    startNotify(hexValues);\n  };\n\n  // 通知设备：停止采集数据\n  const disconnect = () => {\n    const hexValues = [0x24, 0x45, 0x52, 0x53, 0xea, 0x23, 0x0d, 0x0a];\n    startNotify(hexValues);\n  };\n\n```","src/content/blog/work-docs/uniubi/mini-bluetooth.md",[855],"https://cdn.nlark.com/yuque/0/2023/png/22890312/1685438292734-02e1d8de-8c24-422d-a127-a832703faf58.png#averageHue=%233c2e2b&clientId=u88b57cb8-32c0-4&from=paste&height=737&id=uea56a64e&originHeight=737&originWidth=877&originalType=binary&ratio=1&rotation=0&showTitle=false&size=249979&status=done&style=none&taskId=u553b9e09-3edf-4484-8451-9747372228f&title=&width=877","1b5be3bfbdbf23fd",{"html":858,"metadata":859},"\u003Ch1 id=\"小程序蓝牙\">小程序蓝牙\u003Ca href=\"#小程序蓝牙\" class=\"heading-anchor-link\" aria-label=\"Link to 小程序蓝牙\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>\n\u003Ch2 id=\"目录\">目录\u003Ca href=\"#目录\" class=\"heading-anchor-link\" aria-label=\"Link to 目录\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ca href=\"#%E4%B8%AD%E5%9B%9E-%E5%9B%9E%E5%BC%B9%E4%BB%AA\">中回 回弹仪\u003C/a>\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"中回-回弹仪\">中回 回弹仪\u003Ca href=\"#中回-回弹仪\" class=\"heading-anchor-link\" aria-label=\"Link to 中回 回弹仪\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cp>文档 \u003Ca href=\"https://www.yuque.com/attachments/yuque/0/2023/pdf/22890312/1685598468945-64c89754-eb02-435c-8cc2-99a6e16eefc7.pdf?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fpdf%2F22890312%2F1685598468945-64c89754-eb02-435c-8cc2-99a6e16eefc7.pdf%22%2C%22name%22%3A%22%E4%B8%AD%E5%9B%9E%E6%97%A0%E7%BA%BF%E8%93%9D%E7%89%99%E6%95%B0%E5%AD%97%E5%9B%9E%E5%BC%B9%E4%BB%AA%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE%EF%BC%88V1.2%EF%BC%89%20.pdf%22%2C%22size%22%3A207255%2C%22ext%22%3A%22pdf%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22u7366cbb8-cfea-4082-b609-e33a8475131%22%2C%22taskType%22%3A%22transfer%22%2C%22type%22%3A%22application%2Fpdf%22%2C%22mode%22%3A%22title%22%2C%22id%22%3A%22u00dc7892%22%2C%22card%22%3A%22file%22%7D\" title=\"中回无线蓝牙数字回弹仪通信协议（V1.2） .pdf\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">中回无线蓝牙数字回弹仪通信协议（V1.2） .pdf\u003C/a>\u003C/p>\n\u003Cfigure>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;inferSize&#x22;:true,&#x22;src&#x22;:&#x22;https://cdn.nlark.com/yuque/0/2023/png/22890312/1685438292734-02e1d8de-8c24-422d-a127-a832703faf58.png#averageHue=%233c2e2b&#x26;clientId=u88b57cb8-32c0-4&#x26;from=paste&#x26;height=737&#x26;id=uea56a64e&#x26;originHeight=737&#x26;originWidth=877&#x26;originalType=binary&#x26;ratio=1&#x26;rotation=0&#x26;showTitle=false&#x26;size=249979&#x26;status=done&#x26;style=none&#x26;taskId=u553b9e09-3edf-4484-8451-9747372228f&#x26;title=&#x26;width=877&#x22;,&#x22;alt&#x22;:&#x22;image.png&#x22;,&#x22;title&#x22;:&#x22;image.png&#x22;,&#x22;index&#x22;:0}\">\u003Cfigcaption>image.png\u003C/figcaption>\u003C/figure>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 监听信道\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> startNotify\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">hexValues\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> number\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">[]) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  Taro.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">notifyBLECharacteristicValueChange\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    state: \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">true\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    deviceId: deviceId.current,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    serviceId: serviceId.current,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    characteristicId: notifyId.current,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    success\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {},\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    fail\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {},\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    complete\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">      startWrite\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(hexValues);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  Taro.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">onBLECharacteristicValueChange\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">result\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> value\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> BufferToString\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(result.value);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(result, value, \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'onBLECharacteristicValueChange'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 发送信令\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> startWrite\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">message\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> number\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">[]) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 创建一个Uint8Array\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> uint8Array\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Uint8Array\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(message);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 将Uint8Array转换为ArrayBuffer\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> arrayBuffer\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> uint8Array.buffer;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  Taro.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">writeBLECharacteristicValue\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    deviceId: deviceId.current,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    serviceId: serviceId.current,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    characteristicId: writeId.current,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    value: arrayBuffer,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    success\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'写入成功'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    fail\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      console.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">log\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">'写入失败'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 通知设备：获取设备信息\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> getDeviceInfo\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> hexValues\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x24\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x52\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x44\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x49\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0xdf\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x23\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x0d\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x0a\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    startNotify\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(hexValues);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 通知设备：准备采集数据\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> prepare\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> hexValues\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x24\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x53\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x52\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x53\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0xf8\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x23\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x0d\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x0a\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    startNotify\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(hexValues);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 通知设备：停止采集数据\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> disconnect\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> hexValues\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x24\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x45\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x52\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x53\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0xea\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x23\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x0d\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">0x0a\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">    startNotify\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(hexValues);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>\u003C/div>",{"headings":860,"localImagePaths":868,"remoteImagePaths":869,"frontmatter":870,"imagePaths":872},[861,863,865],{"depth":30,"slug":862,"text":862},"小程序蓝牙",{"depth":54,"slug":864,"text":864},"目录",{"depth":54,"slug":866,"text":867},"中回-回弹仪","中回 回弹仪",[],[855],{"title":848,"description":850,"draft":18,"published":871,"minutes":30},["Date","2025-08-09T00:00:00.000Z"],[855],"work-docs/uniubi/video-monitoring",{"id":873,"data":875,"body":880,"filePath":881,"assetImports":882,"digest":890,"rendered":891},{"title":876,"published":877,"description":878,"tags":879,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"视频监控系统技术方案",["Date","2025-08-09T00:00:00.000Z"],"视频监控平台的延迟优化、小程序集成和多播放器组件实现",[],"# 视频监控\n\n## 1. 平台端\n\n### 1.1 ehome 协议 缓冲很频繁\n\nhls 播放地址的 ts 切片时长是1s，网速比较慢的情况下缓冲会比较频繁， gc的服务参数配置里 可以将切片改成更长时间，减少http请求数量。\n\n### 1.2 直播延迟优化\n\n- 使用更快的网络连接，如有线网络或 5G 网络。\n- 减少编码器的编码延迟，这可以通过调整编码器的配置参数来实现。\n- 采用实时流处理技术，如 WebRTC，它可以大幅降低直播延迟。\n- ~~使用内容分发网络（CDN），它可以通过缓存和分发内容来提高网络性能。~~\n\n### 1.3 直播流延迟优化（HLS）\n\n- 减小片段长度：通常情况下，片段长度越小，直播延迟越小。不过，如果片段长度太小，会导致视频质量下降，因此减小片段长度的**前提**是 可以保证视频质量。\n- 使用配置更高的服务器：高性能服务器降低延迟 ~~（打钱）~~。\n- ~~使用 CDN 加速：使用 CDN (内容分发网络) 能够帮助将直播流媒体的数据分发到用户的设备上，从而减少延迟。~~\n- 使用更好的网络：直播流媒体传输的延迟与网络环境有很大关系，因此应该选择一个稳定性较高的网络来进行直播。\n\n## 2 小程序\n\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/22890312/1663920612466-836ce386-90a9-45bd-a29a-7ccf5225f46f.png#averageHue=%23faf9f9\\&clientId=u4a56f34d-1aa8-4\\&from=paste\\&height=358\\&id=u34e1b5bd\\&originHeight=422\\&originWidth=722\\&originalType=binary\\&ratio=1\\&rotation=0\\&showTitle=false\\&size=55057\\&status=done\\&style=none\\&taskId=uce3fcd01-694c-4a5a-9149-99199282115\\&title=\\&width=613 \"image.png\")\n\n![企业微信截图\\_317cc2b2-76a1-4bbf-bd93-06429b948fbc.png](https://cdn.nlark.com/yuque/0/2022/png/22890312/1663920704553-e5690ab5-40c0-480a-9c5a-647633c22ff6.png#averageHue=%23fcfbfb\\&clientId=u4a56f34d-1aa8-4\\&from=paste\\&height=280\\&id=u7cece303\\&originHeight=552\\&originWidth=603\\&originalType=binary\\&ratio=1\\&rotation=0\\&showTitle=false\\&size=60655\\&status=done\\&style=none\\&taskId=u173c7e0f-b095-4cdb-8d31-e93d861b33f\\&title=\\&width=306 \"企业微信截图_317cc2b2-76a1-4bbf-bd93-06429b948fbc.png\")\n\n![企业微信截图\\_665a1898-18f4-4b18-b178-5e7e946b45c6.png](https://cdn.nlark.com/yuque/0/2022/png/22890312/1663920717161-70059e4b-cf3a-4f7d-bd68-6128533d1572.png#averageHue=%23fbf9f9\\&clientId=u4a56f34d-1aa8-4\\&from=paste\\&height=278\\&id=u4f1b5ca6\\&originHeight=402\\&originWidth=604\\&originalType=binary\\&ratio=1\\&rotation=0\\&showTitle=false\\&size=49113\\&status=done\\&style=none\\&taskId=ua069a4c3-aad0-4580-993c-e2978918180\\&title=\\&width=418 \"企业微信截图_665a1898-18f4-4b18-b178-5e7e946b45c6.png\")\n\n1. 必须https\n2. 目前是由运维放置校验文件，因为 校验文件 放在 public 下面会被打包进 dist/js 中\n3. 资质文件: 认证 比较困难，在 h5 页面实现功能，通过 webview 嵌套。\n4. token 通过 url 传递到 h5 页面。\n\n## 3 三合一组件\n\n```json\n\"xgplayer\": \"^2.31.2\",\n\"xgplayer-flv.js\": \"^2.3.0\",\n\"xgplayer-hls.js\": \"^2.6.0\"\n\"qn-rtplayer-web\": \"^1.0.1\",\n\"ezuikit-js\": \"^0.2.3\",\n```\n\n### 3.1 引用关系\n\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/22890312/1646640230444-7257d0ec-ae50-41c1-a97b-5971a3bbebb6.png#averageHue=%23262b32\\&clientId=uc2971265-8f6f-4\\&from=paste\\&height=405\\&id=u411717d9\\&originHeight=405\\&originWidth=338\\&originalType=binary\\&ratio=1\\&rotation=0\\&showTitle=false\\&size=35992\\&status=done\\&style=none\\&taskId=u9df10ad1-3833-4a43-bbe2-c797a2303b9\\&title=\\&width=338 \"image.png\")\n\n![](https://cdn.nlark.com/yuque/0/2022/jpeg/22890312/1646641132081-cdbec8f9-6341-46eb-b974-df147182c6d6.jpeg)\n\n### 3.2 VideoPlayer - 萤石云播放\n\n#### 3.2.1 文档\n\n[GitHub - Ezviz-OpenBiz/EZUIKit-JavaScript-npm: 轻应用npm版本，降低接入难度，适配自定义UI，适配主流框架 轻应用npm版本，降低接入难度，适配自定义UI，适配主流框架. Contribute to Ezviz-OpenBiz/EZUIKit-JavaScript-npm development by creating an account on GitHub. https://github.com/Ezviz-OpenBiz/EZUIKit-JavaScript-npm](https://github.com/Ezviz-OpenBiz/EZUIKit-JavaScript-npm \"GitHub - Ezviz-OpenBiz/EZUIKit-JavaScript-npm: 轻应用npm版本，降低接入难度，适配自定义UI，适配主流框架 轻应用npm版本，降低接入难度，适配自定义UI，适配主流框架. Contribute to Ezviz-OpenBiz/EZUIKit-JavaScript-npm development by creating an account on GitHub. https://github.com/Ezviz-OpenBiz/EZUIKit-JavaScript-npm\")\n\n#### 3.2.2 暂停\n\n萤石云播放器(直播模式)暂停后播放器显示为黑色背景，这里使用 `ezuikit-js`的截图 API `capturePicture`截取最后一帧的图片 覆盖于播放器上方。\n\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/22890312/1646640850898-68d51382-dce2-405c-a462-be7ff07557f3.png#averageHue=%23292e36\\&clientId=uc2971265-8f6f-4\\&from=paste\\&height=154\\&id=ue6094e4e\\&originHeight=154\\&originWidth=905\\&originalType=binary\\&ratio=1\\&rotation=0\\&showTitle=false\\&size=46456\\&status=done\\&style=none\\&taskId=u2c704f21-d973-4bb1-9c8c-3ca3fadb3fb\\&title=\\&width=905 \"image.png\")\n\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/22890312/1646640880703-83f32b91-4471-472f-ba36-1d17b39988f4.png#averageHue=%23292d36\\&clientId=uc2971265-8f6f-4\\&from=paste\\&height=821\\&id=WywmD\\&originHeight=821\\&originWidth=836\\&originalType=binary\\&ratio=1\\&rotation=0\\&showTitle=false\\&size=135158\\&status=done\\&style=none\\&taskId=u3c8afea5-d35a-4349-a1c6-0b4b882bb03\\&title=\\&width=836 \"image.png\")\n\n### 3.3 WebRtcPlayer - 七牛云 webrtc\n\n#### 3.3.1 文档地址\n\n[低延时 Web SDK\\_SDK 下载\\_直播云 - 七牛开发者中心 低延时 Web SDK https://developer.qiniu.com/pili/7730/geek-web-sdk](https://developer.qiniu.com/pili/7730/geek-web-sdk \"低延时 Web SDK_SDK 下载_直播云 - 七牛开发者中心 低延时 Web SDK https://developer.qiniu.com/pili/7730/geek-web-sdk\")\n\n#### 3.3.2 状态\n\n只有停止状态 无暂停状态\n\n## 4 FlvPlayer - 七牛云 Flv / IPC Flv 播放\n\n### 4.1 HlsPlayer - 七牛云 Hls / IPC Hls 播放\n\n#### 4.1.1 文档地址\n\n[xgplayer](https://v2.h5player.bytedance.com/gettingStarted/ \"xgplayer\")\n\n[xgplayer-hls-js](https://v2.h5player.bytedance.com/plugins/#xgplayer-hls-js \"xgplayer-hls-js\")\n\n[hls.js](https://github.com/video-dev/hls.js/blob/master/docs/API.md#fine-tuning \"hls.js\")\n\n### 4.2 注意点\n\n1. 工地这边视频组件有大量工地业务相关的内容。\n2. 目前是使用播放器自带的播放/暂停/全屏等功能，播放不同地址的视频时UI 没有完全统一。\n3. 工地业务上，不能使用 `xgplayer-flv`与 `xgplayer-hls`，应该是兼容性问题\n   1. `xgplayer-flv`是 字节团队自己开发的播放库，没有其他依赖，`xgplayer-flv.js`是在 `flv.js`的基础上封装。`xgplayer-flv.js`兼容性要好一些。","src/content/blog/work-docs/uniubi/video-monitoring.md",[883,884,885,886,887,888,889],"https://cdn.nlark.com/yuque/0/2022/png/22890312/1663920612466-836ce386-90a9-45bd-a29a-7ccf5225f46f.png#averageHue=%23faf9f9&clientId=u4a56f34d-1aa8-4&from=paste&height=358&id=u34e1b5bd&originHeight=422&originWidth=722&originalType=binary&ratio=1&rotation=0&showTitle=false&size=55057&status=done&style=none&taskId=uce3fcd01-694c-4a5a-9149-99199282115&title=&width=613","https://cdn.nlark.com/yuque/0/2022/png/22890312/1663920704553-e5690ab5-40c0-480a-9c5a-647633c22ff6.png#averageHue=%23fcfbfb&clientId=u4a56f34d-1aa8-4&from=paste&height=280&id=u7cece303&originHeight=552&originWidth=603&originalType=binary&ratio=1&rotation=0&showTitle=false&size=60655&status=done&style=none&taskId=u173c7e0f-b095-4cdb-8d31-e93d861b33f&title=&width=306","https://cdn.nlark.com/yuque/0/2022/png/22890312/1663920717161-70059e4b-cf3a-4f7d-bd68-6128533d1572.png#averageHue=%23fbf9f9&clientId=u4a56f34d-1aa8-4&from=paste&height=278&id=u4f1b5ca6&originHeight=402&originWidth=604&originalType=binary&ratio=1&rotation=0&showTitle=false&size=49113&status=done&style=none&taskId=ua069a4c3-aad0-4580-993c-e2978918180&title=&width=418","https://cdn.nlark.com/yuque/0/2022/png/22890312/1646640230444-7257d0ec-ae50-41c1-a97b-5971a3bbebb6.png#averageHue=%23262b32&clientId=uc2971265-8f6f-4&from=paste&height=405&id=u411717d9&originHeight=405&originWidth=338&originalType=binary&ratio=1&rotation=0&showTitle=false&size=35992&status=done&style=none&taskId=u9df10ad1-3833-4a43-bbe2-c797a2303b9&title=&width=338","https://cdn.nlark.com/yuque/0/2022/jpeg/22890312/1646641132081-cdbec8f9-6341-46eb-b974-df147182c6d6.jpeg","https://cdn.nlark.com/yuque/0/2022/png/22890312/1646640850898-68d51382-dce2-405c-a462-be7ff07557f3.png#averageHue=%23292e36&clientId=uc2971265-8f6f-4&from=paste&height=154&id=ue6094e4e&originHeight=154&originWidth=905&originalType=binary&ratio=1&rotation=0&showTitle=false&size=46456&status=done&style=none&taskId=u2c704f21-d973-4bb1-9c8c-3ca3fadb3fb&title=&width=905","https://cdn.nlark.com/yuque/0/2022/png/22890312/1646640880703-83f32b91-4471-472f-ba36-1d17b39988f4.png#averageHue=%23292d36&clientId=uc2971265-8f6f-4&from=paste&height=821&id=WywmD&originHeight=821&originWidth=836&originalType=binary&ratio=1&rotation=0&showTitle=false&size=135158&status=done&style=none&taskId=u3c8afea5-d35a-4349-a1c6-0b4b882bb03&title=&width=836","83495ba7e201c281",{"html":892,"metadata":893},"\u003Ch1 id=\"视频监控\">视频监控\u003Ca href=\"#视频监控\" class=\"heading-anchor-link\" aria-label=\"Link to 视频监控\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>\n\u003Ch2 id=\"1-平台端\">1. 平台端\u003Ca href=\"#1-平台端\" class=\"heading-anchor-link\" aria-label=\"Link to 1. 平台端\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"11-ehome-协议-缓冲很频繁\">1.1 ehome 协议 缓冲很频繁\u003Ca href=\"#11-ehome-协议-缓冲很频繁\" class=\"heading-anchor-link\" aria-label=\"Link to 1.1 ehome 协议 缓冲很频繁\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>hls 播放地址的 ts 切片时长是1s，网速比较慢的情况下缓冲会比较频繁， gc的服务参数配置里 可以将切片改成更长时间，减少http请求数量。\u003C/p>\n\u003Ch3 id=\"12-直播延迟优化\">1.2 直播延迟优化\u003Ca href=\"#12-直播延迟优化\" class=\"heading-anchor-link\" aria-label=\"Link to 1.2 直播延迟优化\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cul>\n\u003Cli>使用更快的网络连接，如有线网络或 5G 网络。\u003C/li>\n\u003Cli>减少编码器的编码延迟，这可以通过调整编码器的配置参数来实现。\u003C/li>\n\u003Cli>采用实时流处理技术，如 WebRTC，它可以大幅降低直播延迟。\u003C/li>\n\u003Cli>\u003Cdel>使用内容分发网络（CDN），它可以通过缓存和分发内容来提高网络性能。\u003C/del>\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"13-直播流延迟优化hls\">1.3 直播流延迟优化（HLS）\u003Ca href=\"#13-直播流延迟优化hls\" class=\"heading-anchor-link\" aria-label=\"Link to 1.3 直播流延迟优化（HLS）\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cul>\n\u003Cli>减小片段长度：通常情况下，片段长度越小，直播延迟越小。不过，如果片段长度太小，会导致视频质量下降，因此减小片段长度的\u003Cstrong>前提\u003C/strong>是 可以保证视频质量。\u003C/li>\n\u003Cli>使用配置更高的服务器：高性能服务器降低延迟 \u003Cdel>（打钱）\u003C/del>。\u003C/li>\n\u003Cli>\u003Cdel>使用 CDN 加速：使用 CDN (内容分发网络) 能够帮助将直播流媒体的数据分发到用户的设备上，从而减少延迟。\u003C/del>\u003C/li>\n\u003Cli>使用更好的网络：直播流媒体传输的延迟与网络环境有很大关系，因此应该选择一个稳定性较高的网络来进行直播。\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"2-小程序\">2 小程序\u003Ca href=\"#2-小程序\" class=\"heading-anchor-link\" aria-label=\"Link to 2 小程序\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cfigure>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;inferSize&#x22;:true,&#x22;src&#x22;:&#x22;https://cdn.nlark.com/yuque/0/2022/png/22890312/1663920612466-836ce386-90a9-45bd-a29a-7ccf5225f46f.png#averageHue=%23faf9f9&#x26;clientId=u4a56f34d-1aa8-4&#x26;from=paste&#x26;height=358&#x26;id=u34e1b5bd&#x26;originHeight=422&#x26;originWidth=722&#x26;originalType=binary&#x26;ratio=1&#x26;rotation=0&#x26;showTitle=false&#x26;size=55057&#x26;status=done&#x26;style=none&#x26;taskId=uce3fcd01-694c-4a5a-9149-99199282115&#x26;title=&#x26;width=613&#x22;,&#x22;alt&#x22;:&#x22;image.png&#x22;,&#x22;title&#x22;:&#x22;image.png&#x22;,&#x22;index&#x22;:0}\">\u003Cfigcaption>image.png\u003C/figcaption>\u003C/figure>\n\u003Cfigure>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;inferSize&#x22;:true,&#x22;src&#x22;:&#x22;https://cdn.nlark.com/yuque/0/2022/png/22890312/1663920704553-e5690ab5-40c0-480a-9c5a-647633c22ff6.png#averageHue=%23fcfbfb&#x26;clientId=u4a56f34d-1aa8-4&#x26;from=paste&#x26;height=280&#x26;id=u7cece303&#x26;originHeight=552&#x26;originWidth=603&#x26;originalType=binary&#x26;ratio=1&#x26;rotation=0&#x26;showTitle=false&#x26;size=60655&#x26;status=done&#x26;style=none&#x26;taskId=u173c7e0f-b095-4cdb-8d31-e93d861b33f&#x26;title=&#x26;width=306&#x22;,&#x22;alt&#x22;:&#x22;企业微信截图_317cc2b2-76a1-4bbf-bd93-06429b948fbc.png&#x22;,&#x22;title&#x22;:&#x22;企业微信截图_317cc2b2-76a1-4bbf-bd93-06429b948fbc.png&#x22;,&#x22;index&#x22;:0}\">\u003Cfigcaption>企业微信截图_317cc2b2-76a1-4bbf-bd93-06429b948fbc.png\u003C/figcaption>\u003C/figure>\n\u003Cfigure>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;inferSize&#x22;:true,&#x22;src&#x22;:&#x22;https://cdn.nlark.com/yuque/0/2022/png/22890312/1663920717161-70059e4b-cf3a-4f7d-bd68-6128533d1572.png#averageHue=%23fbf9f9&#x26;clientId=u4a56f34d-1aa8-4&#x26;from=paste&#x26;height=278&#x26;id=u4f1b5ca6&#x26;originHeight=402&#x26;originWidth=604&#x26;originalType=binary&#x26;ratio=1&#x26;rotation=0&#x26;showTitle=false&#x26;size=49113&#x26;status=done&#x26;style=none&#x26;taskId=ua069a4c3-aad0-4580-993c-e2978918180&#x26;title=&#x26;width=418&#x22;,&#x22;alt&#x22;:&#x22;企业微信截图_665a1898-18f4-4b18-b178-5e7e946b45c6.png&#x22;,&#x22;title&#x22;:&#x22;企业微信截图_665a1898-18f4-4b18-b178-5e7e946b45c6.png&#x22;,&#x22;index&#x22;:0}\">\u003Cfigcaption>企业微信截图_665a1898-18f4-4b18-b178-5e7e946b45c6.png\u003C/figcaption>\u003C/figure>\n\u003Col>\n\u003Cli>必须https\u003C/li>\n\u003Cli>目前是由运维放置校验文件，因为 校验文件 放在 public 下面会被打包进 dist/js 中\u003C/li>\n\u003Cli>资质文件: 认证 比较困难，在 h5 页面实现功能，通过 webview 嵌套。\u003C/li>\n\u003Cli>token 通过 url 传递到 h5 页面。\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"3-三合一组件\">3 三合一组件\u003Ca href=\"#3-三合一组件\" class=\"heading-anchor-link\" aria-label=\"Link to 3 三合一组件\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"json\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"xgplayer\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"^2.31.2\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"xgplayer-flv.js\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"^2.3.0\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"xgplayer-hls.js\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"^2.6.0\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"qn-rtplayer-web\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"^1.0.1\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"ezuikit-js\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">: \u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">\"^0.2.3\"\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch3 id=\"31-引用关系\">3.1 引用关系\u003Ca href=\"#31-引用关系\" class=\"heading-anchor-link\" aria-label=\"Link to 3.1 引用关系\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cfigure>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;inferSize&#x22;:true,&#x22;src&#x22;:&#x22;https://cdn.nlark.com/yuque/0/2022/png/22890312/1646640230444-7257d0ec-ae50-41c1-a97b-5971a3bbebb6.png#averageHue=%23262b32&#x26;clientId=uc2971265-8f6f-4&#x26;from=paste&#x26;height=405&#x26;id=u411717d9&#x26;originHeight=405&#x26;originWidth=338&#x26;originalType=binary&#x26;ratio=1&#x26;rotation=0&#x26;showTitle=false&#x26;size=35992&#x26;status=done&#x26;style=none&#x26;taskId=u9df10ad1-3833-4a43-bbe2-c797a2303b9&#x26;title=&#x26;width=338&#x22;,&#x22;alt&#x22;:&#x22;image.png&#x22;,&#x22;title&#x22;:&#x22;image.png&#x22;,&#x22;index&#x22;:0}\">\u003Cfigcaption>image.png\u003C/figcaption>\u003C/figure>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;inferSize&#x22;:true,&#x22;src&#x22;:&#x22;https://cdn.nlark.com/yuque/0/2022/jpeg/22890312/1646641132081-cdbec8f9-6341-46eb-b974-df147182c6d6.jpeg&#x22;,&#x22;alt&#x22;:&#x22;&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003Ch3 id=\"32-videoplayer---萤石云播放\">3.2 VideoPlayer - 萤石云播放\u003Ca href=\"#32-videoplayer---萤石云播放\" class=\"heading-anchor-link\" aria-label=\"Link to 3.2 VideoPlayer - 萤石云播放\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Ch4 id=\"321-文档\">3.2.1 文档\u003Ca href=\"#321-文档\" class=\"heading-anchor-link\" aria-label=\"Link to 3.2.1 文档\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cp>\u003Ca href=\"https://github.com/Ezviz-OpenBiz/EZUIKit-JavaScript-npm\" title=\"GitHub - Ezviz-OpenBiz/EZUIKit-JavaScript-npm: 轻应用npm版本，降低接入难度，适配自定义UI，适配主流框架 轻应用npm版本，降低接入难度，适配自定义UI，适配主流框架. Contribute to Ezviz-OpenBiz/EZUIKit-JavaScript-npm development by creating an account on GitHub. https://github.com/Ezviz-OpenBiz/EZUIKit-JavaScript-npm\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">GitHub - Ezviz-OpenBiz/EZUIKit-JavaScript-npm: 轻应用npm版本，降低接入难度，适配自定义UI，适配主流框架 轻应用npm版本，降低接入难度，适配自定义UI，适配主流框架. Contribute to Ezviz-OpenBiz/EZUIKit-JavaScript-npm development by creating an account on GitHub. https://github.com/Ezviz-OpenBiz/EZUIKit-JavaScript-npm\u003C/a>\u003C/p>\n\u003Ch4 id=\"322-暂停\">3.2.2 暂停\u003Ca href=\"#322-暂停\" class=\"heading-anchor-link\" aria-label=\"Link to 3.2.2 暂停\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cp>萤石云播放器(直播模式)暂停后播放器显示为黑色背景，这里使用 \u003Ccode>ezuikit-js\u003C/code>的截图 API \u003Ccode>capturePicture\u003C/code>截取最后一帧的图片 覆盖于播放器上方。\u003C/p>\n\u003Cfigure>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;inferSize&#x22;:true,&#x22;src&#x22;:&#x22;https://cdn.nlark.com/yuque/0/2022/png/22890312/1646640850898-68d51382-dce2-405c-a462-be7ff07557f3.png#averageHue=%23292e36&#x26;clientId=uc2971265-8f6f-4&#x26;from=paste&#x26;height=154&#x26;id=ue6094e4e&#x26;originHeight=154&#x26;originWidth=905&#x26;originalType=binary&#x26;ratio=1&#x26;rotation=0&#x26;showTitle=false&#x26;size=46456&#x26;status=done&#x26;style=none&#x26;taskId=u2c704f21-d973-4bb1-9c8c-3ca3fadb3fb&#x26;title=&#x26;width=905&#x22;,&#x22;alt&#x22;:&#x22;image.png&#x22;,&#x22;title&#x22;:&#x22;image.png&#x22;,&#x22;index&#x22;:0}\">\u003Cfigcaption>image.png\u003C/figcaption>\u003C/figure>\n\u003Cfigure>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;inferSize&#x22;:true,&#x22;src&#x22;:&#x22;https://cdn.nlark.com/yuque/0/2022/png/22890312/1646640880703-83f32b91-4471-472f-ba36-1d17b39988f4.png#averageHue=%23292d36&#x26;clientId=uc2971265-8f6f-4&#x26;from=paste&#x26;height=821&#x26;id=WywmD&#x26;originHeight=821&#x26;originWidth=836&#x26;originalType=binary&#x26;ratio=1&#x26;rotation=0&#x26;showTitle=false&#x26;size=135158&#x26;status=done&#x26;style=none&#x26;taskId=u3c8afea5-d35a-4349-a1c6-0b4b882bb03&#x26;title=&#x26;width=836&#x22;,&#x22;alt&#x22;:&#x22;image.png&#x22;,&#x22;title&#x22;:&#x22;image.png&#x22;,&#x22;index&#x22;:0}\">\u003Cfigcaption>image.png\u003C/figcaption>\u003C/figure>\n\u003Ch3 id=\"33-webrtcplayer---七牛云-webrtc\">3.3 WebRtcPlayer - 七牛云 webrtc\u003Ca href=\"#33-webrtcplayer---七牛云-webrtc\" class=\"heading-anchor-link\" aria-label=\"Link to 3.3 WebRtcPlayer - 七牛云 webrtc\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Ch4 id=\"331-文档地址\">3.3.1 文档地址\u003Ca href=\"#331-文档地址\" class=\"heading-anchor-link\" aria-label=\"Link to 3.3.1 文档地址\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cp>\u003Ca href=\"https://developer.qiniu.com/pili/7730/geek-web-sdk\" title=\"低延时 Web SDK_SDK 下载_直播云 - 七牛开发者中心 低延时 Web SDK https://developer.qiniu.com/pili/7730/geek-web-sdk\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">低延时 Web SDK_SDK 下载_直播云 - 七牛开发者中心 低延时 Web SDK https://developer.qiniu.com/pili/7730/geek-web-sdk\u003C/a>\u003C/p>\n\u003Ch4 id=\"332-状态\">3.3.2 状态\u003Ca href=\"#332-状态\" class=\"heading-anchor-link\" aria-label=\"Link to 3.3.2 状态\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cp>只有停止状态 无暂停状态\u003C/p>\n\u003Ch2 id=\"4-flvplayer---七牛云-flv--ipc-flv-播放\">4 FlvPlayer - 七牛云 Flv / IPC Flv 播放\u003Ca href=\"#4-flvplayer---七牛云-flv--ipc-flv-播放\" class=\"heading-anchor-link\" aria-label=\"Link to 4 FlvPlayer - 七牛云 Flv / IPC Flv 播放\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Ch3 id=\"41-hlsplayer---七牛云-hls--ipc-hls-播放\">4.1 HlsPlayer - 七牛云 Hls / IPC Hls 播放\u003Ca href=\"#41-hlsplayer---七牛云-hls--ipc-hls-播放\" class=\"heading-anchor-link\" aria-label=\"Link to 4.1 HlsPlayer - 七牛云 Hls / IPC Hls 播放\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Ch4 id=\"411-文档地址\">4.1.1 文档地址\u003Ca href=\"#411-文档地址\" class=\"heading-anchor-link\" aria-label=\"Link to 4.1.1 文档地址\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h4>\n\u003Cp>\u003Ca href=\"https://v2.h5player.bytedance.com/gettingStarted/\" title=\"xgplayer\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">xgplayer\u003C/a>\u003C/p>\n\u003Cp>\u003Ca href=\"https://v2.h5player.bytedance.com/plugins/#xgplayer-hls-js\" title=\"xgplayer-hls-js\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">xgplayer-hls-js\u003C/a>\u003C/p>\n\u003Cp>\u003Ca href=\"https://github.com/video-dev/hls.js/blob/master/docs/API.md#fine-tuning\" title=\"hls.js\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">hls.js\u003C/a>\u003C/p>\n\u003Ch3 id=\"42-注意点\">4.2 注意点\u003Ca href=\"#42-注意点\" class=\"heading-anchor-link\" aria-label=\"Link to 4.2 注意点\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Col>\n\u003Cli>工地这边视频组件有大量工地业务相关的内容。\u003C/li>\n\u003Cli>目前是使用播放器自带的播放/暂停/全屏等功能，播放不同地址的视频时UI 没有完全统一。\u003C/li>\n\u003Cli>工地业务上，不能使用 \u003Ccode>xgplayer-flv\u003C/code>与 \u003Ccode>xgplayer-hls\u003C/code>，应该是兼容性问题\n\u003Col>\n\u003Cli>\u003Ccode>xgplayer-flv\u003C/code>是 字节团队自己开发的播放库，没有其他依赖，\u003Ccode>xgplayer-flv.js\u003C/code>是在 \u003Ccode>flv.js\u003C/code>的基础上封装。\u003Ccode>xgplayer-flv.js\u003C/code>兼容性要好一些。\u003C/li>\n\u003C/ol>\n\u003C/li>\n\u003C/ol>",{"headings":894,"localImagePaths":948,"remoteImagePaths":949,"frontmatter":950,"imagePaths":952},[895,897,900,903,906,909,912,915,918,921,924,927,930,933,936,939,942,945],{"depth":30,"slug":896,"text":896},"视频监控",{"depth":54,"slug":898,"text":899},"1-平台端","1. 平台端",{"depth":58,"slug":901,"text":902},"11-ehome-协议-缓冲很频繁","1.1 ehome 协议 缓冲很频繁",{"depth":58,"slug":904,"text":905},"12-直播延迟优化","1.2 直播延迟优化",{"depth":58,"slug":907,"text":908},"13-直播流延迟优化hls","1.3 直播流延迟优化（HLS）",{"depth":54,"slug":910,"text":911},"2-小程序","2 小程序",{"depth":54,"slug":913,"text":914},"3-三合一组件","3 三合一组件",{"depth":58,"slug":916,"text":917},"31-引用关系","3.1 引用关系",{"depth":58,"slug":919,"text":920},"32-videoplayer---萤石云播放","3.2 VideoPlayer - 萤石云播放",{"depth":283,"slug":922,"text":923},"321-文档","3.2.1 文档",{"depth":283,"slug":925,"text":926},"322-暂停","3.2.2 暂停",{"depth":58,"slug":928,"text":929},"33-webrtcplayer---七牛云-webrtc","3.3 WebRtcPlayer - 七牛云 webrtc",{"depth":283,"slug":931,"text":932},"331-文档地址","3.3.1 文档地址",{"depth":283,"slug":934,"text":935},"332-状态","3.3.2 状态",{"depth":54,"slug":937,"text":938},"4-flvplayer---七牛云-flv--ipc-flv-播放","4 FlvPlayer - 七牛云 Flv / IPC Flv 播放",{"depth":58,"slug":940,"text":941},"41-hlsplayer---七牛云-hls--ipc-hls-播放","4.1 HlsPlayer - 七牛云 Hls / IPC Hls 播放",{"depth":283,"slug":943,"text":944},"411-文档地址","4.1.1 文档地址",{"depth":58,"slug":946,"text":947},"42-注意点","4.2 注意点",[],[883,884,885,886,887,888,889],{"title":876,"description":878,"draft":18,"published":951,"minutes":283},["Date","2025-08-09T00:00:00.000Z"],[883,884,885,886,887,888,889],"work-docs/uniubi/voice-speech",{"id":953,"data":955,"body":960,"filePath":961,"digest":962,"rendered":963},{"title":956,"published":957,"description":958,"tags":959,"draft":18,"pin":19,"toc":20,"lang":21,"abbrlink":21},"语音播报技术实现方案",["Date","2025-08-09T00:00:00.000Z"],"从原生API到自定义polyfill，解决跨平台语音播报兼容性问题",[],"# 语音播报\n\n## 原生API\n\n1. PC 兼容性很好。\n2. 代码非常简洁。\n\n```typescript\nconst text = \"哈哈哈哈哈\"\n\nconst synth = window.speechSynthesis;\nlet utterance: SpeechSynthesisUtterance | null =\n  new SpeechSynthesisUtterance(text);\nsynth.speak(utterance);\n// 销毁实例\nutterance = null;\n```\n\n但是：**电视机大屏APP 无法使用**，APP 的浏览器外壳版本不支持，所以尝试 自定义polyfill。\n\n## polyfill - audio 标签 + queue\n\n```typescript\nconstructor() {\n  this.utteranceQueue: SpeechSynthesisUtterance[] = [];\n  this.audio = new Audio();\n}\n\n\nprivate async playNext (utteranceQueue): void => {\n  const SpeechSynthesisUtterancePolyfill = utteranceQueue.shift();\n\n  this.speaking = false;\n  if (utteranceQueue.length) {\n    this.pending = true;\n  } else {\n    this.pending = false;\n  }\n\n  if (SpeechSynthesisUtterancePolyfill) {\n    this.audio.src = '-----';\n   \tawait this.audio.play();\n  }\n};\n\nspeak(SpeechSynthesisUtterancePolyfill: SpeechSynthesisUtterance) {\n  this.pending = true;\n  utteranceQueue.push(SpeechSynthesisUtterancePolyfill);\n  if (this.speaking || this.paused) {\n\n  } else {\n    this.playNext(utteranceQueue);\n  }\n};\n\n```\n\npolyfill： 数据推送时 根据数据得到播报文本 后合成为语音，并转为一个语音地址，随后 实例化 一个 audio 标签，用这个标签播放语音地址。现在使用的 合成 API是 Google 的， \\~\\~虽然免费 （以公司业务量，免费的额度不够用） \\~\\~ 但是合成得到的 语音地址国内十有八九无法访问，所以需要国内厂商提供的 API （公司没有）。\n\n### 自定义 polyfill (audio标签)  后的 问题：\n\n1. APP 外壳不支持 audio 标签 ~~（升级可能可以解决）~~。 升级无法解决，应该不是audio的问题，25 楼 5个电视机，测试 1个可以，3个不可用，1个未测试。其中，可用的电视机与一个不可用电视机 型号、系统版本等 都一样。\n2. **需要进行语音合成（阿里云、腾讯云、华为云......）。**\n3. **DOMExpection**: 无法看出是什么类型的错误，未知原因，外壳是X5？？？QQ 浏览器 对这个API的支持是未知。\n\n## polyfill - AudioContext + queue\n\n2个版本：前一个版本比较通用，当前版本比较受 业务 限制，但是可以减少 **入队列到播放** 的等待时间。\n\n### 提前初始化音频\n\n在实例化 class 之后立即 将音频资源初始化为 `Audio Buffer` , 这样可以在播放音频的时候， 资源请求和 Buffer 化的时间可以省略下来，在网络较差的时候 体验有比较大的提升。\n**但是，提前初始化意味着资源是确定的，如果 资源不确定就要在入栈时即时转换为 Buffer.**\n以下是主要代码\n\n```typescript\n// 签到音频\nconst IN_URL =\n  'https://fe-cloud.uni-ubi.com/radio/1681294990939-%E7%AD%BE%E5%88%B0%E6%88%90%E5%8A%9F.mp3';\n\n// 签退音频\nconst OUT_URL =\n  'https://fe-cloud.uni-ubi.com/radio/1681294990954-%E7%AD%BE%E9%80%80%E6%88%90%E5%8A%9F.mp3';\n\nconst queue = new AudioQueue();\n\n// 提前初始化音频Buffer。\n// AudioQueue.initInBuffer();\n// AudioQueue.initOutBuffer()\n\nexport default class AudioQueue {\n  private audioContext: AudioContext;\n  private queue: string[];\n  private isPlaying: boolean;\n  private inBuffer: AudioBuffer;\n  private outBuffer: AudioBuffer;\n\n  constructor() {\n    this.audioContext = new AudioContext();\n    this.queue = [];\n    this.isPlaying = false;\n    this.inBuffer = this.audioContext.createBuffer(\n      1,\n      this.audioContext.sampleRate * 2,\n      this.audioContext.sampleRate,\n    );\n    this.outBuffer = this.audioContext.createBuffer(\n      1,\n      this.audioContext.sampleRate * 2,\n      this.audioContext.sampleRate,\n    );\n  }\n\n  // 新播报 入队列\n  enqueue(audioType: string): void {\n    this.queue.push(audioType);\n    if (!this.isPlaying) {\n      this.playNext();\n    }\n  }\n\n  // 初始化音频\n  async initInBuffer() {\n    const audioBuffer = await fetch(IN_URL)\n      .then((response) => response.arrayBuffer())\n      .then((arrayBuffer) => this.audioContext.decodeAudioData(arrayBuffer));\n    this.inBuffer = audioBuffer;\n  }\n\n  // 初始化音频\n  async initOutBuffer() {\n    const audioBuffer = await fetch(OUT_URL)\n      .then((response) => response.arrayBuffer())\n      .then((arrayBuffer) => this.audioContext.decodeAudioData(arrayBuffer));\n    this.outBuffer = audioBuffer;\n  }\n\n  // 播放音频\n  private async playAudio(audioType: string): Promise\u003Cvoid> {\n    // 资源地址不确定时 使用这种方案\n    // const audioBuffer = await fetch(audioUrl)\n    //   .then((response) => response.arrayBuffer())\n    //   .then((arrayBuffer) => this.audioContext.decodeAudioData(arrayBuffer));\n    // const audioSource = this.audioContext.createBufferSource();\n    // 取 buffer\n    audioSource.buffer = audioType === 'in' ? this.inBuffer : this.outBuffer;\n    audioSource.connect(this.audioContext.destination);\n    audioSource.start();\n\n    return new Promise((resolve) => {\n      // 播放结束\n      audioSource.onended = () => {\n        resolve();\n      };\n    });\n  }\n\n  // 播放队列中的下一个音频\n  private async playNext(): Promise\u003Cvoid> {\n    if (this.queue.length === 0) {\n      this.isPlaying = false;\n      return;\n    }\n\n    this.isPlaying = true;\n    // const nextAudioType = this.queue.shift() as string;\n    const url = this.queue.shift()\n    await this.playAudio(nextAudioType);\n    await this.playNext();\n  }\n}\n\n```\n\n## 其他尝试\n\n[https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills \"https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills\")","src/content/blog/work-docs/uniubi/voice-speech.md","324da3149b2782fc",{"html":964,"metadata":965},"\u003Ch1 id=\"语音播报\">语音播报\u003Ca href=\"#语音播报\" class=\"heading-anchor-link\" aria-label=\"Link to 语音播报\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>\n\u003Ch2 id=\"原生api\">原生API\u003Ca href=\"#原生api\" class=\"heading-anchor-link\" aria-label=\"Link to 原生API\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Col>\n\u003Cli>PC 兼容性很好。\u003C/li>\n\u003Cli>代码非常简洁。\u003C/li>\n\u003C/ol>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> text\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> \"哈哈哈哈哈\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> synth\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> window.speechSynthesis;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">let\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> utterance\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> SpeechSynthesisUtterance\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> |\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> null\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> SpeechSynthesisUtterance\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(text);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">synth.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">speak\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(utterance);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 销毁实例\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">utterance \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> null\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cp>但是：\u003Cstrong>电视机大屏APP 无法使用\u003C/strong>，APP 的浏览器外壳版本不支持，所以尝试 自定义polyfill。\u003C/p>\n\u003Ch2 id=\"polyfill---audio-标签--queue\">polyfill - audio 标签 + queue\u003Ca href=\"#polyfill---audio-标签--queue\" class=\"heading-anchor-link\" aria-label=\"Link to polyfill - audio 标签 + queue\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">constructor\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">  this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.utteranceQueue: SpeechSynthesisUtterance[] \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">  this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.audio \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Audio\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">private async \u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">playNext\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (utteranceQueue)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> void\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> SpeechSynthesisUtterancePolyfill\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> utteranceQueue.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">shift\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">  this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.speaking \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> false\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (utteranceQueue.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.pending \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> true\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">else\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.pending \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> false\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (SpeechSynthesisUtterancePolyfill) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.audio.src \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> '-----'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">   \tawait\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.audio.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">play\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">speak\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(SpeechSynthesisUtterancePolyfill: SpeechSynthesisUtterance) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">  this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.pending \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> true\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  utteranceQueue.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">push\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(SpeechSynthesisUtterancePolyfill);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.speaking \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">||\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.paused) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  } \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">else\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">playNext\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(utteranceQueue);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">};\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Cp>polyfill： 数据推送时 根据数据得到播报文本 后合成为语音，并转为一个语音地址，随后 实例化 一个 audio 标签，用这个标签播放语音地址。现在使用的 合成 API是 Google 的， ~~虽然免费 （以公司业务量，免费的额度不够用） ~~ 但是合成得到的 语音地址国内十有八九无法访问，所以需要国内厂商提供的 API （公司没有）。\u003C/p>\n\u003Ch3 id=\"自定义-polyfill-audio标签--后的-问题\">自定义 polyfill (audio标签)  后的 问题：\u003Ca href=\"#自定义-polyfill-audio标签--后的-问题\" class=\"heading-anchor-link\" aria-label=\"Link to 自定义 polyfill (audio标签)  后的 问题：\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Col>\n\u003Cli>APP 外壳不支持 audio 标签 \u003Cdel>（升级可能可以解决）\u003C/del>。 升级无法解决，应该不是audio的问题，25 楼 5个电视机，测试 1个可以，3个不可用，1个未测试。其中，可用的电视机与一个不可用电视机 型号、系统版本等 都一样。\u003C/li>\n\u003Cli>\u003Cstrong>需要进行语音合成（阿里云、腾讯云、华为云…）。\u003C/strong>\u003C/li>\n\u003Cli>\u003Cstrong>DOMExpection\u003C/strong>: 无法看出是什么类型的错误，未知原因，外壳是X5？？？QQ 浏览器 对这个API的支持是未知。\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"polyfill---audiocontext--queue\">polyfill - AudioContext + queue\u003Ca href=\"#polyfill---audiocontext--queue\" class=\"heading-anchor-link\" aria-label=\"Link to polyfill - AudioContext + queue\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cp>2个版本：前一个版本比较通用，当前版本比较受 业务 限制，但是可以减少 \u003Cstrong>入队列到播放\u003C/strong> 的等待时间。\u003C/p>\n\u003Ch3 id=\"提前初始化音频\">提前初始化音频\u003Ca href=\"#提前初始化音频\" class=\"heading-anchor-link\" aria-label=\"Link to 提前初始化音频\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h3>\n\u003Cp>在实例化 class 之后立即 将音频资源初始化为 \u003Ccode>Audio Buffer\u003C/code> , 这样可以在播放音频的时候， 资源请求和 Buffer 化的时间可以省略下来，在网络较差的时候 体验有比较大的提升。\n\u003Cstrong>但是，提前初始化意味着资源是确定的，如果 资源不确定就要在入栈时即时转换为 Buffer.\u003C/strong>\n以下是主要代码\u003C/p>\n\u003Cdiv class=\"code-block-wrapper\">\u003Cbutton class=\"code-copy-button\" type=\"button\" aria-label=\"Copy code\">\u003C/button>\u003Cpre class=\"astro-code astro-code-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\" data-copy-button-added=\"true\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 签到音频\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> IN_URL\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">  'https://fe-cloud.uni-ubi.com/radio/1681294990939-%E7%AD%BE%E5%88%B0%E6%88%90%E5%8A%9F.mp3'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 签退音频\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> OUT_URL\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\">  'https://fe-cloud.uni-ubi.com/radio/1681294990954-%E7%AD%BE%E9%80%80%E6%88%90%E5%8A%9F.mp3'\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> queue\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> AudioQueue\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// 提前初始化音频Buffer。\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// AudioQueue.initInBuffer();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">// AudioQueue.initOutBuffer()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">export\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> default\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> class\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> AudioQueue\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  private\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"> audioContext\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> AudioContext\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  private\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"> queue\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">[];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  private\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"> isPlaying\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> boolean\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  private\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"> inBuffer\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> AudioBuffer\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  private\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"> outBuffer\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> AudioBuffer\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  constructor\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.audioContext \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> AudioContext\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.queue \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> [];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.isPlaying \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> false\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.inBuffer \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.audioContext.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">createBuffer\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">      1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">      this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.audioContext.sampleRate \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">*\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 2\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">      this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.audioContext.sampleRate,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    );\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.outBuffer \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.audioContext.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">createBuffer\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">      1\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">      this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.audioContext.sampleRate \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">*\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 2\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">      this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.audioContext.sampleRate,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    );\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 新播报 入队列\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">  enqueue\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">audioType\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> void\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.queue.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">push\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(audioType);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">!\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.isPlaying) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">      this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">playNext\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 初始化音频\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  async\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> initInBuffer\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> audioBuffer\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> await\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> fetch\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">IN_URL\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      .\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">then\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">((\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">response\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> response.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">arrayBuffer\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">())\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      .\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">then\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">((\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">arrayBuffer\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.audioContext.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">decodeAudioData\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arrayBuffer));\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.inBuffer \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> audioBuffer;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 初始化音频\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  async\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> initOutBuffer\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> audioBuffer\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> await\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> fetch\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">OUT_URL\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      .\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">then\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">((\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">response\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> response.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">arrayBuffer\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">())\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      .\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">then\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">((\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">arrayBuffer\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.audioContext.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">decodeAudioData\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(arrayBuffer));\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.outBuffer \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> audioBuffer;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 播放音频\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  private\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> async\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> playAudio\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">audioType\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> string\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">)\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Promise\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">void\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    // 资源地址不确定时 使用这种方案\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    // const audioBuffer = await fetch(audioUrl)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    //   .then((response) => response.arrayBuffer())\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    //   .then((arrayBuffer) => this.audioContext.decodeAudioData(arrayBuffer));\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    // const audioSource = this.audioContext.createBufferSource();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    // 取 buffer\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    audioSource.buffer \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> audioType \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">===\u003C/span>\u003Cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> 'in'\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> ?\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.inBuffer \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.outBuffer;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    audioSource.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">connect\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.audioContext.destination);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    audioSource.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">start\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    return\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> new\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> Promise\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">((\u003C/span>\u003Cspan style=\"color:#E36209;--shiki-dark:#FFAB70\">resolve\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">      // 播放结束\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      audioSource.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">onended\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> () \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=>\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">        resolve\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">      };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">  // 播放队列中的下一个音频\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">  private\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> async\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> playNext\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">()\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Promise\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">&#x3C;\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">void\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    if\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"> (\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.queue.\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">length\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> ===\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> 0\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">      this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.isPlaying \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> false\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">      return\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\">    this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.isPlaying \u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">=\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> true\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A737D;--shiki-dark:#6A737D\">    // const nextAudioType = this.queue.shift() as string;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    const\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> url\u003C/span>\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> =\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.queue.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">shift\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    await\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">playAudio\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">(nextAudioType);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D73A49;--shiki-dark:#F97583\">    await\u003C/span>\u003Cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> this\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">playNext\u003C/span>\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>\u003C/div>\n\u003Ch2 id=\"其他尝试\">其他尝试\u003Ca href=\"#其他尝试\" class=\"heading-anchor-link\" aria-label=\"Link to 其他尝试\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h2>\n\u003Cp>\u003Ca href=\"https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills\" title=\"https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills\" target=\"_blank\" rel=\"nofollow noopener noreferrer external\">https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills\u003C/a>\u003C/p>",{"headings":966,"localImagePaths":985,"remoteImagePaths":986,"frontmatter":987,"imagePaths":989},[967,969,972,975,978,981,983],{"depth":30,"slug":968,"text":968},"语音播报",{"depth":54,"slug":970,"text":971},"原生api","原生API",{"depth":54,"slug":973,"text":974},"polyfill---audio-标签--queue","polyfill - audio 标签 + queue",{"depth":58,"slug":976,"text":977},"自定义-polyfill-audio标签--后的-问题","自定义 polyfill (audio标签)  后的 问题：",{"depth":54,"slug":979,"text":980},"polyfill---audiocontext--queue","polyfill - AudioContext + queue",{"depth":58,"slug":982,"text":982},"提前初始化音频",{"depth":54,"slug":984,"text":984},"其他尝试",[],[],{"title":956,"description":958,"draft":18,"published":988,"minutes":283},["Date","2025-08-09T00:00:00.000Z"],[],"about",["Map",992,993],"about-zh",{"id":992,"data":994,"body":995,"filePath":996,"digest":997,"rendered":998},{"lang":21},"# About","src/content/about/about-zh.md","05aef143c2d3c29b",{"html":999,"metadata":1000},"\u003Ch1 id=\"about\">About\u003Ca href=\"#about\" class=\"heading-anchor-link\" aria-label=\"Link to About\">\u003Csvg viewBox=\"0 0 24 24\" aria-hidden=\"true\" fill=\"currentColor\">\u003Cpath d=\"M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z\">\u003C/path>\u003Cpath d=\"m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z\">\u003C/path>\u003C/svg>\u003C/a>\u003C/h1>",{"headings":1001,"localImagePaths":1004,"remoteImagePaths":1005,"frontmatter":1006,"imagePaths":1007},[1002],{"depth":30,"slug":990,"text":1003},"About",[],[],{"minutes":30},[]]